{"version":3,"file":"earthjs.js","sources":["../src/versor.js","../src/earthjs.js","../src/plugins/versorDragPlugin.js","../src/plugins/wheelZoomPlugin.js","../src/plugins/threejsPlugin.js","../src/plugins/canvasPlugin.js","../src/plugins/oceanPlugin.js","../src/plugins/configPlugin.js","../src/plugins/graticuleCanvas.js","../src/plugins/graticulePlugin.js","../src/plugins/fauxGlobePlugin.js","../src/plugins/autorotatePlugin.js","../src/plugins/countrySelectCanvas.js","../src/plugins/countryTooltipCanvas.js","../src/plugins/countryTooltipPlugin.js","../src/plugins/barTooltipPlugin.js","../src/plugins/placesPlugin.js","../src/plugins/worldCanvas.js","../src/plugins/worldPlugin.js","../src/plugins/worldThreejs.js","../src/plugins/centerPlugin.js","../src/plugins/flattenPlugin.js","../src/plugins/barPlugin.js","../src/plugins/dotsPlugin.js","../src/plugins/dotsCanvas.js","../src/plugins/pingsCanvas.js","../src/plugins/pingsPlugin.js","../src/plugins/debugThreejs.js","../src/pluginLoader/commonPlugins.js","../index.js"],"sourcesContent":["// Version 0.0.0. Copyright 2017 Mike Bostock.\nexport default function() {\n    var acos = Math.acos,\n        asin = Math.asin,\n        atan2 = Math.atan2,\n        cos = Math.cos,\n        max = Math.max,\n        min = Math.min,\n        PI = Math.PI,\n        sin = Math.sin,\n        sqrt = Math.sqrt,\n        radians = PI / 180,\n        degrees = 180 / PI;\n\n    // Returns the unit quaternion for the given Euler rotation angles [λ, φ, γ].\n    function versor(e) {\n      var l = e[0] / 2 * radians, sl = sin(l), cl = cos(l), // λ / 2\n          p = e[1] / 2 * radians, sp = sin(p), cp = cos(p), // φ / 2\n          g = e[2] / 2 * radians, sg = sin(g), cg = cos(g); // γ / 2\n      return [\n        cl * cp * cg + sl * sp * sg,\n        sl * cp * cg - cl * sp * sg,\n        cl * sp * cg + sl * cp * sg,\n        cl * cp * sg - sl * sp * cg\n      ];\n    }\n\n    // Returns Cartesian coordinates [x, y, z] given spherical coordinates [λ, φ].\n    versor.cartesian = function(e) {\n      var l = e[0] * radians, p = e[1] * radians, cp = cos(p);\n      return [cp * cos(l), cp * sin(l), sin(p)];\n    };\n\n    // Returns the Euler rotation angles [λ, φ, γ] for the given quaternion.\n    versor.rotation = function(q) {\n      return [\n        atan2(2 * (q[0] * q[1] + q[2] * q[3]), 1 - 2 * (q[1] * q[1] + q[2] * q[2])) * degrees,\n        asin(max(-1, min(1, 2 * (q[0] * q[2] - q[3] * q[1])))) * degrees,\n        atan2(2 * (q[0] * q[3] + q[1] * q[2]), 1 - 2 * (q[2] * q[2] + q[3] * q[3])) * degrees\n      ];\n    };\n\n    // Returns the quaternion to rotate between two cartesian points on the sphere.\n    versor.delta = function(v0, v1) {\n      var w = cross(v0, v1), l = sqrt(dot(w, w));\n      if (!l) return [1, 0, 0, 0];\n      var t = acos(max(-1, min(1, dot(v0, v1)))) / 2, s = sin(t); // t = θ / 2\n      return [cos(t), w[2] / l * s, -w[1] / l * s, w[0] / l * s];\n    };\n\n    // Returns the quaternion that represents q0 * q1.\n    versor.multiply = function(q0, q1) {\n      return [\n        q0[0] * q1[0] - q0[1] * q1[1] - q0[2] * q1[2] - q0[3] * q1[3],\n        q0[0] * q1[1] + q0[1] * q1[0] + q0[2] * q1[3] - q0[3] * q1[2],\n        q0[0] * q1[2] - q0[1] * q1[3] + q0[2] * q1[0] + q0[3] * q1[1],\n        q0[0] * q1[3] + q0[1] * q1[2] - q0[2] * q1[1] + q0[3] * q1[0]\n      ];\n    };\n\n    function cross(v0, v1) {\n      return [\n        v0[1] * v1[2] - v0[2] * v1[1],\n        v0[2] * v1[0] - v0[0] * v1[2],\n        v0[0] * v1[1] - v0[1] * v1[0]\n      ];\n    }\n\n    function dot(v0, v1) {\n      return v0[0] * v1[0] + v0[1] * v1[1] + v0[2] * v1[2];\n    }\n\n    return versor;\n}\n","import versorFn from './versor.js';\n\nconst versor = versorFn();\nconst earthjs = (options={}) => {\n    /*eslint no-console: 0 */\n    clearInterval(earthjs.ticker);\n    options = Object.assign({\n        transparent: false,\n        select: '#earth',\n        rotate: 130,\n    }, options);\n    const _ = {\n        onResize: {},\n        onResizeKeys: [],\n\n        onRefresh: {},\n        onRefreshKeys: [],\n\n        onInterval: {},\n        onIntervalKeys: [],\n\n        renderOrder: [\n            'renderThree',\n            'svgAddDropShadow',\n            'svgAddCanvas',\n            'canvasAddGraticule',\n            'canvasAddWorldOrCountries',\n            'canvasAddDots',\n            'svgAddOcean',\n            'svgAddGlobeShading',\n            'svgAddGraticule',\n            'svgAddWorldOrCountries',\n            'svgAddGlobeHilight',\n            'svgAddPlaces',\n            'svgAddPings',\n            'svgAddDots',\n            'svgAddBar',\n            'svgAddBarTooltip',\n            'addCountryTooltip',\n            'addCountryCenteroid',\n        ],\n        ready: null,\n        loadingData: null,\n        promeses: []\n    }\n    const drag = false;\n    const svg = d3.selectAll(options.select);\n    let width = svg.attr('width'), height = svg.attr('height');\n    if (!width || !height) {\n        width = options.width || 700;\n        height = options.height || 500;\n        svg.attr(\"width\", width).attr(\"height\", height);\n    }\n    const center = [width/2, height/2];\n    Object.defineProperty(options, 'width', {\n        get: () => width,\n        set: (x) => {\n            width = x;\n            center[0] = x/2;\n        }\n    });\n    Object.defineProperty(options, 'height', {\n        get: () => height,\n        set: (x) => {\n            height = x;\n            center[1] = x/2;\n        }\n    });\n    const globe = {\n        _: {\n            svg,\n            drag,\n            versor,\n            center,\n            options,\n        },\n        $: {},\n        $slc: {},\n        ready(fn) {\n            if (fn) {\n                if (_.promeses.length>0) {\n                    _.loadingData = true;\n                    const q = d3.queue();\n                    _.promeses.forEach(obj => {\n                        obj.urls.forEach(url => {\n                            let ext = url.split('.').pop();\n                            if (ext==='geojson') {\n                                ext = 'json';\n                            }\n                            q.defer(d3[ext], url);\n                        });\n                    })\n                    q.await(function() {\n                        let args = [].slice.call(arguments);\n                        const err = args.shift();\n                        _.promeses.forEach(obj => {\n                            const ln = obj.urls.length;\n                            const ar = args.slice(0,ln);\n                            const ready = globe[obj.name].ready;\n                            ar.unshift(err);\n\n                            if (ready) {\n                                ready.apply(globe, ar);\n                            } else {\n                                obj.onReady.apply(globe, ar);\n                            }\n                            args = args.slice(ln);\n                        });\n                        _.loadingData = false;\n                        fn.call(globe);\n                    });\n                }\n            } else {\n                return _.loadingData;\n            }\n        },\n        register(obj) {\n            const ar = {};\n            globe[obj.name] = ar;\n            Object.keys(obj).forEach(function(fn) {\n                if ([\n                    'urls',\n                    'onReady',\n                    'onInit',\n                    'onResize',\n                    'onRefresh',\n                    'onInterval'].indexOf(fn)===-1) {\n                    if (typeof(obj[fn])==='function') {\n                        ar[fn] = function() {\n                            return obj[fn].apply(globe, arguments);\n                        }\n                    }\n                }\n            });\n            if (obj.onInit) {\n                obj.onInit.call(globe);\n            }\n            qEvent(obj,'onResize');\n            qEvent(obj,'onRefresh');\n            qEvent(obj,'onInterval');\n            if (obj.urls && obj.onReady) {\n                _.promeses.push({\n                    name: obj.name,\n                    urls: obj.urls,\n                    onReady: obj.onReady\n                });\n            }\n            return globe;\n        }\n    }\n\n    //----------------------------------------\n    let earths = [];\n    let ticker = null;\n    const __ = globe._;\n\n    globe.svgDraw = function(twinEarth) {\n        const $ = globe.$;\n        earths = twinEarth || [];\n        _.renderOrder.forEach(function(renderer) {\n            $[renderer] && $[renderer].call(globe);\n        });\n        earths.forEach(function(p) {\n            p.svgDraw(null);\n        });\n        if (ticker===null && earths!==[]) {\n            __.ticker();\n        }\n        return globe;\n    }\n\n    globe.$slc.defs = __.svg.append(\"defs\");\n    __.ticker = function(interval) {\n        const intervalRun = __.intervalRun;\n        interval = interval || 50;\n        ticker = setInterval(() => { // 33% less CPU compare with d3.timer\n            intervalRun.call(globe);\n            earths.forEach(function(p) {\n                p._.intervalRun.call(p);\n            });\n        }, interval);\n        earthjs.ticker = ticker;\n        return globe;\n    }\n\n    //----------------------------------------\n    // Helper\n    __.scale = function(y) {\n        __.proj.scale(y);\n        __.resize();\n        __.refresh();\n        return globe;\n    }\n\n    __.rotate = function(r) {\n        __.proj.rotate(r);\n        __.refresh();\n        return globe;\n    }\n\n    __.intervalRun = function() {\n        _.onIntervalKeys.forEach(function(fn) {\n            _.onInterval[fn].call(globe);\n        });\n        return globe;\n    }\n\n    __.refresh = function(filter) {\n        const keys = filter ? _.onRefreshKeys.filter(d => filter.test(d)) : _.onRefreshKeys;\n        keys.forEach(function(fn) {\n            _.onRefresh[fn].call(globe);\n        });\n        return globe;\n    }\n\n    __.resize = function() {\n        _.onResizeKeys.forEach(function(fn) {\n            _.onResize[fn].call(globe);\n        });\n        return globe;\n    }\n\n    __.orthoGraphic = function() {\n        return d3.geoOrthographic()\n            .rotate([__.options.rotate, 0])\n            .scale(__.options.width / 3.5)\n            .translate(__.center)\n            .precision(0.1)\n            .clipAngle(90);\n    }\n\n    __.addRenderer = function(name) {\n        if (_.renderOrder.indexOf(name)<0) {\n            _.renderOrder.push(name);\n        }\n    }\n\n    __.proj = __.orthoGraphic();\n    __.path = d3.geoPath().projection(__.proj);\n    return globe;\n    //----------------------------------------\n    function qEvent(obj, qname) {\n        if (obj[qname]) {\n            _[qname][obj.name] = obj[qname];\n            _[qname+'Keys'] = Object.keys(_[qname]);\n        }\n    }\n}\nexport default earthjs;\n","// Mike Bostock’s Block https://bl.ocks.org/mbostock/7ea1dde508cec6d2d95306f92642bc42\nexport default function() {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, q: null, sync: [], mouse: null, onDrag: {}, onDragKeys: []};\n\n    function dragSetup() {\n        const __ = this._;\n        const versor = __.versor;\n        _.svg.call(d3.drag()\n            .on('start',dragstarted)\n            .on('end',  dragsended)\n            .on('drag', dragged));\n\n        let v0, // Mouse position in Cartesian coordinates at start of drag gesture.\n            r0, // Projection rotation as Euler angles at start.\n            q0; // Projection rotation as versor at start.\n\n        function rotate(r) {\n            const d = r[0] - r0[0];\n            r[0] = d + this._.proj.rotate()[0];\n            if (r[0] >= 180)\n                r[0] -= 360;\n            this._.rotate(r);\n        }\n\n        function dragstarted() {\n            v0 = versor.cartesian(__.proj.invert(d3.mouse(this)));\n            r0 = __.proj.rotate();\n            q0 = versor(r0);\n            __.drag = null;\n            __.refresh();\n            _.mouse = null;\n        }\n\n        function dragged() {\n            const mouse = d3.mouse(this);\n            const v1 = versor.cartesian(__.proj.rotate(r0).invert(mouse)),\n                q1 = versor.multiply(q0, versor.delta(v0, v1)),\n                r1 = versor.rotation(q1);\n            __.rotate(r1);\n            __.drag = true;\n            _.mouse = mouse;\n            _.onDragKeys.forEach(k => {\n                _.onDrag[k].call(this, mouse);\n            });\n        }\n\n        function dragsended() {\n            const r = __.proj.rotate();\n            _.sync.forEach(function(g) {\n                rotate.call(g, r);\n            })\n            __.drag = false;\n            __.refresh();\n            _.mouse = null;\n        }\n    }\n\n    return {\n        name: 'versorDragPlugin',\n        onInit() {\n            _.svg = this._.svg;\n            dragSetup.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg.call(d3.drag()\n                    .on('start',null)\n                    .on('end',  null)\n                    .on('drag', null));\n                _.svg = d3.selectAll(q);\n                dragSetup.call(this);\n            }\n            return _.svg;\n        },\n        sync(arr) {\n            _.sync = arr;\n        },\n        mouse() {\n            return _.mouse;\n        },\n        onDrag(obj) {\n            Object.assign(_.onDrag, obj);\n            _.onDragKeys = Object.keys(_.onDrag);\n        }\n    }\n}\n","export default function() {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, q: null, sync: []};\n\n    function zoomSetup() {\n        const __ = this._;\n        _.svg.on('wheel', function() {\n            let y = d3.event.deltaY+__.proj.scale();\n            y = (y<20 ? 20 : (y>999 ? 1000 : y));\n            __.scale(y);\n            _.sync.forEach(function(g) {\n                g._.scale.call(g, y);\n            })\n        });\n    }\n\n    return {\n        name: 'wheelZoomPlugin',\n        onInit() {\n            _.svg = this._.svg;\n            zoomSetup.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg.on('wheel', null);\n                _.svg = d3.selectAll(q);\n                zoomSetup.call(this);\n            }\n            return _.svg;\n        },\n        sync(arr) {\n            _.sync = arr;\n        }\n    }\n}\n","// Philippe Rivière’s https://bl.ocks.org/Fil/9ed0567b68501ee3c3fef6fbe3c81564\n// https://gist.github.com/Fil/ad107bae48e0b88014a0e3575fe1ba64\nexport default function() {\n    const _ = {renderer: null, scene: null, camera: null, scale: null};\n\n    function renderThree() {\n        setTimeout(function() {\n            _.renderer.render(_.scene, _.camera);\n        },1);\n    }\n\n    return {\n        name: 'threejsPlugin',\n        onInit() {\n            const\n                width = this._.options.width,\n                height= this._.options.height;\n            _.scene  = new THREE.Scene()\n            _.yAxis  = new THREE.Vector3(0,1,0);\n            _.camera = new THREE.OrthographicCamera(-width / 2, width / 2, height / 2, -height / 2, 0.1, 10000)\n            _.camera.position.z = 500; // (higher than RADIUS + size of the bubble)\n            this._.camera = _.camera;\n\n            // Create renderer object.\n            _.renderer = new THREE.WebGLRenderer({antialias: true});\n            _.renderer.domElement.id = 'three-js';\n            _.renderer.setClearColor('white', 1);\n            _.renderer.setSize(width, height);\n            document.body.appendChild(_.renderer.domElement)\n\n            this.renderThree = renderThree; // renderer\n        },\n        onRefresh() {\n            renderThree.call(this);\n        },\n        addObject(obj) {\n            _.scene.add(obj);\n        }\n    }\n}\n","// Bo Ericsson’s Block http://bl.ocks.org/boeric/aa80b0048b7e39dd71c8fbe958d1b1d4\nexport default () => {\n    /*eslint no-console: 0 */\n    const _ = {canvas: null, path: null, q: null}\n\n    function svgAddCanvas() {\n        if (this._.options.showCanvas) {\n            if (!_.canvas) {\n                const fObject = this._.svg.append(\"g\").attr(\"class\",\"canvas\").append(\"foreignObject\")\n                .attr(\"x\", 0)\n                .attr(\"y\", 0)\n                .attr(\"width\", this._.options.width)\n                .attr(\"height\", this._.options.height);\n                const fBody = fObject.append(\"xhtml:body\")\n                .style(\"margin\", \"0px\")\n                .style(\"padding\", \"0px\")\n                .style(\"background-color\", \"none\")\n                .style(\"width\", this._.options.width + \"px\")\n                .style(\"height\", this._.options.height + \"px\");\n                _.canvas = fBody.append(\"canvas\");\n            }\n            _.canvas\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._.options.width)\n            .attr(\"height\", this._.options.height);\n            return _.canvas;\n        }\n    }\n\n    return {\n        name: 'canvasPlugin',\n        onInit() {\n            this._.options.showCanvas = true;\n            this.$.svgAddCanvas = svgAddCanvas;\n            _.path = d3.geoPath().projection(this._.proj);\n        },\n        onRefresh() {\n            const width = this._.options.width,\n                  height= this._.options.height;\n            _.canvas.each(function() {\n                this.getContext(\"2d\").clearRect(0, 0, width, height);\n            });\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.canvas = d3.selectAll(q);\n            }\n            return _.canvas;\n        },\n        render(fn, drawTo, options=[]) {\n            if (this._.options.showCanvas) {\n                var rChange = false;\n                const proj = this._.proj;\n                const r = proj.rotate();\n                const _this = this;\n                _.canvas.each(function(obj, idx) {\n                    if (!drawTo || drawTo.indexOf(idx)>-1) {\n                        const o = options[idx] || {};\n                        if (o.rotate) {\n                            rChange = true;\n                            proj.rotate([r[0]+o.rotate, r[1], r[2]]);\n                        } else if (rChange) {\n                            rChange = false;\n                            proj.rotate(r);\n                        }\n                        const context = this.getContext(\"2d\");\n                        fn.call(_this, context, _.path.context(context));\n                    }\n                });\n                if (rChange) {\n                    rChange = false;\n                    proj.rotate(r);\n                }\n            }\n        }\n    }\n}\n","export default function() {\n    const _ = {svg:null, q: null, scale: 0};\n\n    function svgAddOcean() {\n        _.svg.selectAll('#ocean,.ocean').remove();\n        if (this._.options.showOcean) {\n            const ocean_fill = this.$slc.defs.append(\"radialGradient\")\n                .attr(\"id\", \"ocean\")\n                .attr(\"cx\", \"75%\")\n                .attr(\"cy\", \"25%\");\n            ocean_fill.append(\"stop\")\n                .attr(\"offset\", \"5%\")\n                .attr(\"stop-color\", \"#ddf\");\n            ocean_fill.append(\"stop\")\n                .attr(\"offset\", \"100%\")\n                .attr(\"stop-color\", \"#9ab\");\n            _.ocean = _.svg.append(\"g\").attr(\"class\",\"ocean\").append(\"circle\")\n                .attr(\"cx\",this._.center[0]).attr(\"cy\", this._.center[1])\n                .attr(\"class\", \"noclicks\");\n            resize.call(this);\n        }\n    }\n\n    function resize() {\n        if (_.ocean && this._.options.showOcean) {\n            _.ocean.attr(\"r\", this._.proj.scale()+_.scale);\n        }\n    }\n\n    return {\n        name: 'oceanPlugin',\n        onInit() {\n            this.$.svgAddOcean = svgAddOcean;\n            this._.options.showOcean = true;\n            _.svg = this._.svg;\n        },\n        onResize() {\n            resize.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        scale(sz) {\n            if (sz) {\n                _.scale = sz;\n                resize.call(this);\n            } else {\n                return _.scale;\n            }\n        }\n    }\n}\n","export default function() {\n    return {\n        name: 'configPlugin',\n        set(newOpt) {\n            if (newOpt) {\n                Object.assign(this._.options, newOpt);\n                if (newOpt.spin!==undefined) {\n                    const rotate = this.autorotatePlugin;\n                    newOpt.spin ? rotate.start() :rotate.stop();\n                }\n                this.svgDraw();\n            }\n            return Object.assign({}, this._.options);\n        }\n    }\n}\n","export default function() {\n    const datumGraticule = d3.geoGraticule()();\n    const _ = {style: {}, drawTo: null};\n\n    function canvasAddGraticule() {\n        const __ = this._;\n        if (__.options.showGraticule) {\n            if (__.options.transparent || __.options.transparentGraticule) {\n                __.proj.clipAngle(180);\n            }\n            this.canvasPlugin.render(function(context, path) {\n                context.beginPath();\n                path(datumGraticule);\n                context.lineWidth = 0.3;\n                context.strokeStyle = _.style.line || 'rgba(119,119,119,0.4)';\n                context.stroke();\n            }, _.drawTo);\n            __.proj.clipAngle(90);\n        }\n    }\n\n    return {\n        name: 'graticuleCanvas',\n        onInit() {\n            this.$.canvasAddGraticule = canvasAddGraticule;\n            this._.options.transparentGraticule = false;\n            this._.options.showGraticule = true;\n        },\n        onRefresh() {\n            canvasAddGraticule.call(this);\n        },\n        style(s) {\n            if (s) {\n                _.style = s;\n            }\n            return _.style;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        }\n    }\n}\n","export default function() {\n    const _ = {svg:null, q: null, graticule: d3.geoGraticule()}\n    const $ = {};\n\n    function svgAddGraticule() {\n        _.svg.selectAll('.graticule').remove();\n        if (this._.options.showGraticule) {\n            $.graticule = _.svg.append(\"g\").attr(\"class\",\"graticule\").append(\"path\")\n                .datum(_.graticule).attr(\"class\", \"noclicks\");\n            refresh.call(this);\n        }\n    }\n\n    function refresh() {\n        if ($.graticule && this._.options.showGraticule) {\n            $.graticule.attr(\"d\", this._.path);\n        }\n    }\n\n    return {\n        name: 'graticulePlugin',\n        onInit() {\n            this.$.svgAddGraticule = svgAddGraticule;\n            this._.options.showGraticule = true;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","// Derek Watkins’s Block http://bl.ocks.org/dwtkns/4686432\nexport default function() {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, q: null};\n\n    function svgAddDropShadow() {\n        const __ = this._;\n        _.svg.selectAll('#drop_shadow,.drop_shadow').remove();\n        if (__.options.showGlobeShadow) {\n            const drop_shadow = this.$slc.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"drop_shadow\")\n                  .attr(\"cx\", \"50%\")\n                  .attr(\"cy\", \"50%\");\n                drop_shadow.append(\"stop\")\n                  .attr(\"offset\",\"20%\").attr(\"stop-color\", \"#000\")\n                  .attr(\"stop-opacity\",\".5\")\n                drop_shadow.append(\"stop\")\n                  .attr(\"offset\",\"100%\").attr(\"stop-color\", \"#000\")\n                  .attr(\"stop-opacity\",\"0\")\n            _.dropShadow = _.svg.append(\"g\").attr(\"class\",\"drop_shadow\").append(\"ellipse\")\n                  .attr(\"cx\", __.center[0])\n                  .attr(\"cy\", __.options.height-50)\n                  .attr(\"rx\", __.proj.scale()*0.90)\n                  .attr(\"ry\", __.proj.scale()*0.25)\n                  .attr(\"class\", \"noclicks\")\n                  .style(\"fill\", \"url(#drop_shadow)\");\n        }\n    }\n\n    function svgAddGlobeShading() {\n        const __ = this._;\n        _.svg.selectAll('#shading,.shading').remove();\n        if (__.options.showGlobeShading) {\n            const globe_shading = this.$slc.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"shading\")\n                  .attr(\"cx\", \"50%\")\n                  .attr(\"cy\", \"40%\");\n                globe_shading.append(\"stop\")\n                  .attr(\"offset\",\"50%\").attr(\"stop-color\", \"#9ab\")\n                  .attr(\"stop-opacity\",\"0\")\n                globe_shading.append(\"stop\")\n                  .attr(\"offset\",\"100%\").attr(\"stop-color\", \"#3e6184\")\n                  .attr(\"stop-opacity\",\"0.3\")\n            _.globeShading = _.svg.append(\"g\").attr(\"class\",\"shading\").append(\"circle\")\n                .attr(\"cx\", __.center[0]).attr(\"cy\", __.center[1])\n                .attr(\"r\",  __.proj.scale())\n                .attr(\"class\",\"noclicks\")\n                .style(\"fill\", \"url(#shading)\");\n        }\n    }\n\n    function svgAddGlobeHilight() {\n        const __ = this._;\n        _.svg.selectAll('#hilight,.hilight').remove();\n        if (__.options.showGlobeHilight) {\n            const globe_highlight = this.$slc.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"hilight\")\n                  .attr(\"cx\", \"75%\")\n                  .attr(\"cy\", \"25%\");\n                globe_highlight.append(\"stop\")\n                  .attr(\"offset\", \"5%\").attr(\"stop-color\", \"#ffd\")\n                  .attr(\"stop-opacity\",\"0.6\");\n                globe_highlight.append(\"stop\")\n                  .attr(\"offset\", \"100%\").attr(\"stop-color\", \"#ba9\")\n                  .attr(\"stop-opacity\",\"0.2\");\n            _.globeHilight = _.svg.append(\"g\").attr(\"class\",\"hilight\").append(\"circle\")\n                .attr(\"cx\", __.center[0]).attr(\"cy\", __.center[1])\n                .attr(\"r\",  __.proj.scale())\n                .attr(\"class\",\"noclicks\")\n                .style(\"fill\", \"url(#hilight)\");\n        }\n    }\n\n    return {\n        name: 'fauxGlobePlugin',\n        onInit() {\n            const {options} = this._;\n            options.showGlobeShadow  = true;\n            options.showGlobeShading = true;\n            options.showGlobeHilight = true;\n            this.$.svgAddDropShadow   = svgAddDropShadow;\n            this.$.svgAddGlobeHilight = svgAddGlobeHilight;\n            this.$.svgAddGlobeShading = svgAddGlobeShading;\n            _.svg = this._.svg;\n        },\n        onResize() {\n            const __ = this._;\n            const {options} = __;\n            const scale = __.proj.scale();\n            if (_.globeShading && options.showGlobeShading) {\n                _.globeShading.attr(\"r\", scale);\n            }\n            if (_.globeHilight && options.showGlobeHilight) {\n                _.globeHilight.attr(\"r\", scale);\n            }\n            if (_.dropShadow && options.showGlobeShadow) {\n                _.dropShadow\n                .attr(\"cy\", scale+250)\n                .attr(\"rx\", scale*0.90)\n                .attr(\"ry\", scale*0.25);\n            }\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","export default degPerSec => {\n    /*eslint no-console: 0 */\n    const _ = {\n        lastTick: new Date(), // d3.now(),\n        degree: degPerSec/1000,\n        sync: []\n    }\n\n    function rotate(delta) {\n        const r = this._.proj.rotate();\n        r[0] += _.degree * delta;\n        this._.rotate(r);\n    }\n\n    return {\n        name: 'autorotatePlugin',\n        onInit() {\n            this._.options.spin = true;\n        },\n        onInterval() {\n            const now = new Date(); // d3.now();\n            if (this._.options.spin && !this._.drag) {\n                const delta = now - _.lastTick;\n                rotate.call(this, delta);\n                _.sync.forEach(g => rotate.call(g, delta));\n            }\n            _.lastTick = now;\n        },\n        speed(degPerSec) {\n            _.degree = degPerSec/1000;\n        },\n        start() {\n            this._.options.spin = true;\n        },\n        stop() {\n            this._.options.spin = false;\n        },\n        sync(arr) {\n            _.sync = arr;\n        }\n    };\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    /*eslint no-debugger: 0 */\n    /*eslint no-console: 0 */\n    const _ = {countries: null, country: null, mouse: null, onHover: {}, onHoverKeys: []};\n\n    // https://github.com/d3/d3-polygon\n    function polygonContains(polygon, point) {\n        var n = polygon.length\n        var p = polygon[n - 1]\n        var x = point[0], y = point[1]\n        var x0 = p[0], y0 = p[1]\n        var x1, y1\n        var inside = false\n        for (var i = 0; i < n; ++i) {\n            p = polygon[i], x1 = p[0], y1 = p[1]\n            if (((y1 > y) !== (y0 > y)) && (x < (x0 - x1) * (y - y1) / (y0 - y1) + x1)) inside = !inside\n            x0 = x1, y0 = y1\n        }\n        return inside\n    }\n\n    return {\n        name: 'countrySelectCanvas',\n        onInit() {\n            const __ = this._;\n            const worldCanvas = this.worldCanvas;\n            const {world} = worldCanvas.data();\n            if (world) {\n                _.countries = topojson.feature(world, world.objects.countries);\n            }\n            const mouseMoveHandler = function() {\n                const mouse = d3.mouse(this);\n                const pos = __.proj.invert(mouse);\n                _.country = _.countries.features.find(function(f) {\n                    return f.geometry.coordinates.find(function(c1) {\n                        return polygonContains(c1, pos) || c1.find(function(c2) {\n                            return polygonContains(c2, pos)\n                        })\n                    })\n                });\n                _.mouse = mouse;\n                _.onHoverKeys.forEach(k => {\n                    _.onHover[k].call(this, _.mouse, _.country);\n                });\n\n            }\n            __.svg.on(\"mousemove\", mouseMoveHandler);\n            if (this.versorDragPlugin) {\n                this.versorDragPlugin.onDrag({\n                    countrySelectCanvas: mouseMoveHandler\n                });\n            }\n        },\n        data() {\n            return {\n                country: _.country,\n                mouse: _.mouse\n            };\n        },\n        onHover(obj) {\n            Object.assign(_.onHover, obj);\n            _.onHoverKeys = Object.keys(_.onHover);\n        },\n        world(w) {\n            _.countries = topojson.feature(w, w.objects.countries);\n        }\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    /*eslint no-debugger: 0 */\n    /*eslint no-console: 0 */\n    const _ = {show: false};\n    const countryTooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"countryTooltip\");\n\n    function refresh(mouse) {\n        return countryTooltip\n        .style(\"left\", (mouse[0] + 7) + \"px\")\n        .style(\"top\", (mouse[1] - 15) + \"px\")\n    }\n\n    function hideTooltip() {\n        countryTooltip\n        .style(\"opacity\", 0)\n        .style(\"display\", \"none\");\n    }\n\n    return {\n        name: 'countryTooltipCanvas',\n        onInit() {\n            const _this = this;\n            const toolTipsHandler = function() {\n                const {country, mouse} = _this.countrySelectCanvas.data();\n                if (country) {\n                    const countryName = _this.worldCanvas.countryName(country);\n                    if (countryName) {\n                        refresh(mouse)\n                        .style(\"display\", \"block\")\n                        .style(\"opacity\", 1)\n                        .text(countryName.name);\n                    } else {\n                        hideTooltip()\n                    }\n                } else {\n                    hideTooltip()\n                }\n            }\n            this.countrySelectCanvas.onHover({\n                countryTooltipCanvas: toolTipsHandler\n            });\n            if (this.versorDragPlugin) {\n                this.versorDragPlugin.onDrag({\n                    countryTooltipCanvas: toolTipsHandler\n                });\n            }\n        },\n        onRefresh() {\n            if (this._.drag && _.show) {\n                refresh(this.versorDragPlugin.mouse());\n            }\n        },\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    /*eslint no-console: 0 */\n    const _ = {show: false};\n    const countryTooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"countryTooltip\");\n\n    function addCountryTooltip() {\n        const _this = this;\n        this.worldPlugin.$countries()\n        .on(\"mouseover\", function(d) {\n            if (!_this._.drag) {\n                _.show = true;\n                const country = _this.worldPlugin.countryName.call(_this, d);\n                refresh(d3.mouse(this))\n                .style(\"display\", \"block\")\n                .style(\"opacity\", 1)\n                .text(country.name);\n            }\n        })\n        .on(\"mouseout\", function() {\n            if (!_this._.drag) {\n                _.show = false;\n                countryTooltip.style(\"opacity\", 0)\n                .style(\"display\", \"none\");\n            }\n        })\n        .on(\"mousemove\", function() {\n            if (!_this._.drag) {\n                refresh(d3.mouse(this));\n            }\n        });\n    }\n\n    function refresh(mouse) {\n        return countryTooltip\n        .style(\"left\", (mouse[0] + 7) + \"px\")\n        .style(\"top\", (mouse[1] - 15) + \"px\")\n    }\n\n    return {\n        name: 'countryTooltipPlugin',\n        onInit() {\n            this.$.addCountryTooltip = addCountryTooltip;\n        },\n        onRefresh() {\n            if (this._.drag && _.show) {\n                refresh(this.versorDragPlugin.mouse());\n            }\n        },\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    /*eslint no-debugger: 0 */\n    /*eslint no-console: 0 */\n    const barTooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"barTooltip\");\n\n    function svgAddBarTooltip() {\n        const _this = this;\n        this.barPlugin.$bar()\n        .on(\"mouseover\", function() {\n            const i = +this.dataset.index;\n            var d = _this.barPlugin.data().features[i];\n            if (_this.barTooltipPlugin.onShow) {\n                d = _this.barTooltipPlugin.onShow.call(this, d, i, barTooltip);\n            }\n            _this.barTooltipPlugin.show(d)\n            .style(\"left\", (d3.event.pageX + 7) + \"px\")\n            .style(\"top\", (d3.event.pageY - 15) + \"px\")\n            .style(\"display\", \"block\")\n            .style(\"opacity\", 1);\n        })\n        .on(\"mouseout\", function() {\n            barTooltip.style(\"opacity\", 0)\n            .style(\"display\", \"none\");\n        })\n        .on(\"mousemove\", function() {\n            barTooltip.style(\"left\", (d3.event.pageX + 7) + \"px\")\n            .style(\"top\", (d3.event.pageY - 15) + \"px\");\n        });\n    }\n\n    return {\n        name: 'barTooltipPlugin',\n        onInit() {\n            this.$.svgAddBarTooltip = svgAddBarTooltip;\n        },\n        show(d) {\n            const props = d.properties;\n            const title = Object.keys(props).map(k => k+': '+props[k]).join(\"<br/>\");\n            return barTooltip.html(title)\n        }\n    }\n}\n","export default function(urlPlaces) {\n    const _ = {svg:null, q: null, places: null};\n    const $ = {};\n\n    function svgAddPlaces() {\n        _.svg.selectAll('.points,.labels').remove();\n        if (_.places) {\n            if (this._.options.showPlaces) {\n                svgAddPlacePoints.call(this);\n                svgAddPlaceLabels.call(this);\n                refresh.call(this);\n            }\n        }\n    }\n\n    function refresh() {\n        if ($.placePoints) {\n            $.placePoints.attr(\"d\", this._.path);\n            position_labels.call(this);\n        }\n    }\n\n    function svgAddPlacePoints() {\n        $.placePoints = _.svg.append(\"g\").attr(\"class\",\"points\").selectAll(\"path\")\n            .data(_.places.features).enter().append(\"path\")\n            .attr(\"class\", \"point\");\n    }\n\n    function svgAddPlaceLabels() {\n        $.placeLabels = _.svg.append(\"g\").attr(\"class\",\"labels\").selectAll(\"text\")\n            .data(_.places.features).enter().append(\"text\")\n            .attr(\"class\", \"label\")\n            .text(function(d) { return d.properties.name });\n    }\n\n    function position_labels() {\n        const _this = this;\n        const centerPos = this._.proj.invert(this._.center);\n\n        $.placeLabels\n            .attr(\"text-anchor\",function(d) {\n                const x = _this._.proj(d.geometry.coordinates)[0];\n                return x < _this._.center[0]-20 ? \"end\" :\n                       x < _this._.center[0]+20 ? \"middle\" :\n                       \"start\"\n            })\n            .attr(\"transform\", function(d) {\n                const loc = _this._.proj(d.geometry.coordinates),\n                    x = loc[0],\n                    y = loc[1];\n                const offset = x < _this._.center[0] ? -5 : 5;\n                return \"translate(\" + (x+offset) + \",\" + (y-2) + \")\"\n            })\n            .style(\"display\", function(d) {\n                return d3.geoDistance(d.geometry.coordinates, centerPos) > 1.57 ? 'none' : 'inline';\n            });\n    }\n\n    return {\n        name: 'placesPlugin',\n        urls: urlPlaces && [urlPlaces],\n        onReady(err, places) {\n            _.places = places;\n        },\n        onInit() {\n            this.$.svgAddPlaces = svgAddPlaces;\n            this._.options.showPlaces = true;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(p) {\n            if (p) {\n                const data = p.placesPlugin.data()\n                _.places = data.places;\n            } else {\n                return {places: _.places}\n            }\n        }\n    };\n}\n","// John J Czaplewski’s Block http://bl.ocks.org/jczaplew/6798471\nexport default (urlWorld, urlCountryNames) => {\n    /*eslint no-debugger: 0 */\n    /*eslint no-console: 0 */\n    const _ = {world: null, countryNames: null, style: {}, drawTo: null, options: {}};\n\n    function canvasAddWorldOrCountries() {\n        const __ = this._;\n        if (_.world && __.options.showLand) {\n            if (!__.drag && __.options.transparent || __.options.transparentWorld) {\n                __.proj.clipAngle(180);\n                this.canvasPlugin.render(function(context, path) {\n                    context.beginPath();\n                    path(_.land);\n                    context.fillStyle = _.style.backLand || 'rgba(119,119,119,0.2)';\n                    context.fill();\n                }, _.drawTo, _.options);\n                __.proj.clipAngle(90);\n            }\n            if (!__.drag && __.options.showCountries) {\n                canvasAddCountries.call(this);\n                if (__.options.showLakes) {\n                    canvasAddLakes.call(this);\n                }\n            } else {\n                canvasAddWorld.call(this);\n            }\n            if (this.countrySelectCanvas) {\n                const {country} = this.countrySelectCanvas.data();\n                this.canvasPlugin.render(function(context, path) {\n                    context.beginPath();\n                    path(country);\n                    context.fillStyle = 'rgba(117, 0, 0, 0.4)';\n                    context.fill();\n                });\n            }\n        }\n    }\n\n    function canvasAddWorld() {\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(_.land);\n            context.fillStyle = _.style.land || 'rgba(117, 87, 57, 0.4)';\n            context.fill();\n        }, _.drawTo, _.options);\n    }\n\n    function canvasAddCountries() {\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(_.countries);\n            context.lineWidth = 0.5;\n            context.fillStyle = _.style.land || 'rgba(117, 87, 57, 0.4)';\n            context.strokeStyle = _.style.countries || 'rgba(80, 64, 39, 0.6)';\n            context.fill();\n            context.stroke();\n        }, _.drawTo, _.options);\n    }\n\n    function canvasAddLakes() {\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(_.lakes);\n            context.fillStyle = _.style.lakes || 'rgba(80, 87, 97, 0.4)';\n            context.fill();\n        }, _.drawTo, _.options);\n    }\n\n    let urls = null;\n    if (urlWorld) {\n        urls = [urlWorld];\n        if (urlCountryNames) {\n            urls.push(urlCountryNames);\n        }\n    }\n\n    return {\n        name: 'worldCanvas',\n        urls: urls,\n        onReady(err, world, countryNames) {\n            this.worldCanvas.data({world, countryNames});\n        },\n        onInit() {\n            const options = this._.options;\n            options.showLand = true;\n            options.showLakes = true;\n            options.showCountries = true;\n            options.transparentWorld = false;\n            this.$.canvasAddWorldOrCountries = canvasAddWorldOrCountries;\n        },\n        onRefresh() {\n            canvasAddWorldOrCountries.call(this);\n        },\n        data(data) {\n            if (data) {\n                _.world = data.world;\n                _.countryNames = data.countryNames;\n                _.land = topojson.feature(_.world, _.world.objects.land);\n                _.lakes = topojson.feature(_.world, _.world.objects.ne_110m_lakes);\n                _.countries = topojson.feature(_.world, _.world.objects.countries);\n            }\n            return {\n                world: _.world ,\n                countryNames: _.countryNames\n            }\n        },\n        countryName(d) {\n            let cname = '';\n            if (_.countryNames) {\n                cname = _.countryNames.find(function(x) {\n                    return x.id==d.id;\n                });\n            }\n            return cname;\n        },\n        style(s) {\n            if (s) {\n                _.style = s;\n            }\n            return _.style;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        },\n        options(options) {\n            _.options = options;\n        }\n    }\n}\n","export default function(urlWorld, urlCountryNames) {\n    const _ = {svg:null, q: null, world: null, countryNames: null};\n    const $ = {};\n\n    function svgAddWorldOrCountries() {\n        _.svg.selectAll('.land,.lakes,.countries').remove();\n        if (this._.options.showLand) {\n            if (_.world) {\n                if (this._.options.showCountries) {\n                    this.$.svgAddCountries.call(this);\n                } else {\n                    this.$.svgAddWorld.call(this);\n                }\n                if (this._.options.showLakes) {\n                    this.$.svgAddLakes.call(this);\n                }\n            }\n            refresh.call(this);\n        }\n    }\n\n    function refresh() {\n        if (_.world && this._.options.showLand) {\n            if (this._.options.showCountries) {\n                $.countries.attr(\"d\", this._.path);\n            } else {\n                $.world.attr(\"d\", this._.path);\n            }\n            if (this._.options.showLakes) {\n                $.lakes.attr(\"d\", this._.path);\n            }\n        }\n    }\n\n    function svgAddWorld() {\n        $.world = _.svg.append(\"g\").attr(\"class\",\"land\").append(\"path\").datum(_.land);\n    }\n\n    function svgAddCountries() {\n        $.countries = _.svg.append(\"g\").attr(\"class\",\"countries\").selectAll(\"path\")\n            .data(_.countries.features).enter().append(\"path\")\n            .attr(\"id\",function(d) {return 'x'+d.id});\n    }\n\n    function svgAddLakes() {\n        $.lakes = _.svg.append(\"g\").attr(\"class\",\"lakes\").append(\"path\").datum(_.lakes);\n    }\n\n    let urls = null;\n    if (urlWorld) {\n        urls = [urlWorld];\n        if (urlCountryNames) {\n            urls.push(urlCountryNames);\n        }\n    }\n    return {\n        name: 'worldPlugin',\n        urls: urls,\n        onReady(err, world, countryNames) {\n            this.worldPlugin.data({world, countryNames});\n        },\n        onInit() {\n            this._.options.showLand = true;\n            this._.options.showLakes = true;\n            this._.options.showCountries = true;\n            this.$.svgAddWorldOrCountries = svgAddWorldOrCountries;\n            this.$.svgAddCountries = svgAddCountries;\n            this.$.svgAddLakes = svgAddLakes;\n            this.$.svgAddWorld = svgAddWorld;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        countries() {\n            return _.countries.features;\n        },\n        data(data) {\n            if (data) {\n                _.world = data.world;\n                _.countryNames = data.countryNames;\n                _.land = topojson.feature(_.world, _.world.objects.land);\n                _.lakes = topojson.feature(_.world, _.world.objects.ne_110m_lakes);\n                _.countries = topojson.feature(_.world, _.world.objects.countries);\n            }\n            return {\n                world: _.world ,\n                countryNames: _.countryNames\n            }\n        },\n        countryName(d) {\n            let cname = '';\n            if (_.countryNames) {\n                cname = _.countryNames.find(function(x) {\n                    return x.id==d.id;\n                });\n            }\n            return cname;\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        $countries() {\n            return $.countries;\n        }\n    };\n}\n","export default function() {\n    const _ = {sphereObject: null};\n\n    function addWorld() {\n        if (!_.sphereObject) {\n            const _this  = this;\n            const group  = new THREE.Group();\n            const loader = new THREE.TextureLoader();\n            loader.load(\"./d/world.jpg\", function(texture) {\n                const geometry   = new THREE.SphereGeometry( 200, 20, 20 );\n                const material   = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 } );\n                _.sphereObject = new THREE.Mesh( geometry, material );\n                group.add(_.sphereObject);\n                rotate.call(_this);\n            });\n            _this.threejsPlugin.addObject(group);\n        }\n    }\n\n    function rotate() {\n        const rt = this._.proj.rotate();\n        rt[0] -= 90;\n        const q1 = this._.versor(rt);\n        const q2 = new THREE.Quaternion(-q1[2], q1[1], q1[3], q1[0]);\n        _.sphereObject.setRotationFromQuaternion(q2);\n    }\n\n    return {\n        name: 'worldThreejs',\n        onInit() {\n            addWorld.call(this);\n        },\n        onRefresh() {\n            if (_.sphereObject) {\n                rotate.call(this);\n            }\n        }\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default () => {\n    /*eslint no-console: 0 */\n    const _ = {focused: null, svgAddCountriesOld: null}\n\n    function country(cnt, id) {\n        id = id.replace('x', '');\n        for(let i=0, l=cnt.length; i<l; i++) {\n            if(cnt[i].id == id) {return cnt[i];}\n        }\n    }\n\n    function transition(p) {\n        d3.transition()\n        .duration(2500)\n        .tween(\"rotate\", () => {\n            const  r = d3.interpolate(this._.proj.rotate(), [-p[0], -p[1], 0]);\n            return t => {\n                this._.rotate(r(t));\n            };\n        })\n    }\n\n    function addCountryCenteroid() {\n        const _this = this;\n        this.worldPlugin.$countries()\n        .on(\"click\", function() {\n            if (_this._.options.enableCenter) {\n                const id = this.id.replace('x', '');\n                const c = _this.worldPlugin.countries();\n                const focusedCountry = country(c, id);\n                const p = d3.geoCentroid(focusedCountry);\n                transition.call(_this, p);\n                if (typeof(_.focused)==='function') {\n                    _.focused.call(_this);\n                }\n            }\n        });\n    }\n\n    return {\n        name: 'centerPlugin',\n        onInit() {\n            this.$.addCountryCenteroid = addCountryCenteroid;\n            this._.options.enableCenter = true;\n        },\n        go(id) {\n            const c = this.worldPlugin.countries();\n            const focusedCountry = country(c, id),\n                p = d3.geoCentroid(focusedCountry);\n            transition.call(this, p);\n        },\n        focused(fn) {\n            _.focused = fn;\n        }\n    }\n}\n","export default function() {\n    /*eslint no-console: 0 */\n    const _ = {};\n\n    function animation() {\n        const _this = this;\n        return _this._.svg.transition()\n            .duration(10500)\n            .tween(\"projection\", function() {\n                return function(_x) {\n                    animation.alpha(_x);\n                    _this._.refresh();\n                };\n            });\n    }\n\n    function interpolatedProjection(a, b) {\n        const px = d3.geoProjection(raw).scale(1);\n        let alpha;\n\n        function raw(lamda, pi) {\n            const pa = a([lamda *= 180 / Math.PI, pi *= 180 / Math.PI]), pb = b([lamda, pi]);\n            return [(1 - alpha) * pa[0] + alpha * pb[0], (alpha - 1) * pa[1] - alpha * pb[1]];\n        }\n\n        animation.alpha = function(_x) {\n            if (!arguments.length) {\n                return alpha;\n            }\n            alpha = + _x;\n            const\n                ca = a.center(),\n                cb = b.center(),\n                ta = a.translate(),\n                tb = b.translate();\n            px.center([\n                (1 - alpha) * ca[0] + alpha * cb[0],\n                (1 - alpha) * ca[1] + alpha * cb[1]]);\n            px.translate([\n                (1 - alpha) * ta[0] + alpha * tb[0],\n                (1 - alpha) * ta[1] + alpha * tb[1]]);\n            return px;\n        };\n        animation.alpha(0);\n        return px;\n    }\n\n    //Rotate to default before animation\n    function defaultRotate() {\n        const __ = this._;\n        return d3.transition()\n        .duration(1500)\n        .tween(\"rotate\", function() {\n            __.rotate(__.proj.rotate());\n            var r = d3.interpolate(__.proj.rotate(), [0, 0, 0]);\n            return function(t) {\n                __.rotate(r(t));\n            };\n        })\n    }\n\n    return {\n        name: 'flattenPlugin',\n        onInit() {\n            const g1 = this._.proj;\n            const g2 = d3.geoEquirectangular()\n                .scale(this._.options.width/6.3)\n                .translate(this._.center);\n            _.g1 = g1;\n            _.g2 = g2;\n        },\n        toMap() {\n            defaultRotate.call(this).on('end', () => {\n                const proj = interpolatedProjection(_.g1, _.g2);\n                this._.path = d3.geoPath().projection(proj);\n                animation.call(this).on('end', () => {\n                    this._.options.enableCenter = false;\n                })\n            })\n        },\n        toGlobe() {\n            this._.rotate([0,0,0]);\n            const proj = interpolatedProjection(_.g2, _.g1);\n            this._.path = d3.geoPath().projection(proj);\n            animation.call(this).on('end', () => {\n                this._.path = d3.geoPath().projection(this._.proj);\n                this._.options.enableCenter = true;\n                this._.refresh();\n            })\n        }\n    }\n}\n","export default urlBars => {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, barProjection: null, q: null, bars: null};\n    const $ = {};\n\n    function svgAddBar() {\n        const __ = this._;\n        _.svg.selectAll('.bar').remove();\n        if (_.bars && __.options.showBars) {\n            const gBar = _.svg.append(\"g\").attr(\"class\",\"bar\");\n            const mask = gBar.append(\"mask\")\n                .attr(\"id\", \"edge\");\n            mask.append(\"rect\")\n                .attr(\"x\", 0)\n                .attr(\"y\", 0)\n                .attr(\"width\", \"100%\")\n                .attr(\"height\", \"100%\")\n                .attr(\"fill\", \"white\");\n            mask.append(\"use\")\n                .attr(\"xlink:href\", \"#edgeCircle\")\n                .attr(\"fill\", \"black\");\n            __.mask = mask;\n\n            _.max = d3.max(_.bars.features, d => parseInt(d.geometry.value))\n\n            const scale = __.proj.scale();\n            _.lengthScale = d3.scaleLinear().domain([0, _.max]).range([scale, scale+50]);\n\n            $.bar = gBar.selectAll(\"line\").data(_.bars.features).enter().append(\"line\")\n                .attr(\"stroke\", \"red\")\n                .attr(\"stroke-width\", \"2\")\n                .attr(\"data-index\", (d, i) => i);\n            refresh.call(this);\n        }\n    }\n\n    function refresh() {\n        const __ = this._;\n        if (_.bars && __.options.showBars) {\n            const proj1 = __.proj;\n            const scale = _.lengthScale;\n            const proj2 = _.barProjection;\n            const center = proj1.invert(__.center);\n            $.bar\n                .each(function(d) {\n                    const arr = d.geometry.coordinates;\n                    proj2.scale(scale(d.geometry.value));\n                    const distance = d3.geoDistance(arr, center);\n                    const d1 = proj1(arr);\n                    const d2 = proj2(arr);\n                    d3.select(this)\n                        .attr('x1', d1[0])\n                        .attr('y1', d1[1])\n                        .attr('x2', d2[0])\n                        .attr('y2', d2[1])\n                        .attr('mask', distance < 1.57 ? null : 'url(#edge)');\n                });\n        }\n    }\n\n    function svgClipPath() {\n        const __ = this._;\n        this.$slc.defs.selectAll('clipPath').remove();\n        this.$slc.defs.append(\"clipPath\").append(\"circle\")\n            .attr(\"id\", \"edgeCircle\")\n            .attr(\"cx\", __.center[0])\n            .attr(\"cy\", __.center[1])\n            .attr(\"r\",  __.proj.scale());\n    }\n\n    return {\n        name: 'barPlugin',\n        urls: urlBars && [urlBars],\n        onReady(err, bars) {\n            _.bars = bars;\n            setTimeout(() => refresh.call(this),1);\n        },\n        onInit() {\n            const __ = this._;\n            this.$.svgAddBar = svgAddBar;\n            this.$.svgClipPath = svgClipPath;\n            this._.options.showBars = true;\n            _.barProjection = __.orthoGraphic();\n            _.svg = __.svg;\n            svgClipPath.call(this);\n        },\n        onResize() {\n            svgClipPath.call(this);\n            svgAddBar.call(this);\n        },\n        onRefresh() {\n            _.barProjection.rotate(this._.proj.rotate());\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(data) {\n            if (data) {\n                _.bars = data;\n            } else {\n                return _.bars;\n            }\n        },\n        $bar() {\n            return $.bar;\n        }\n    }\n}\n","export default function() {\n    const _ = {dataDots: null};\n    const $ = {};\n\n    function svgAddDots() {\n        const __ = this._;\n        if (_.dataDots && __.options.showDots && !__.drag) {\n            __.svg.selectAll('.dot').remove();\n            if (_.dataDots && __.options.showDots) {\n                const circles = [];\n                _.circles.forEach(function(d) {\n                    circles.push(d.circle);\n                });\n                $.dots = __.svg.append('g').attr('class','dot').selectAll('path')\n                .data(circles).enter().append('path');\n                if (_.dataDots.geometry) {\n                    const _g = _.dataDots.geometry;\n                    _g.lineWidth   && $.dots.style('stroke-width', _g.lineWidth);\n                    _g.fillStyle   && $.dots.style('fill',         _g.fillStyle);\n                    _g.strokeStyle && $.dots.style('stroke',       _g.strokeStyle);\n                }\n                refresh.call(this);\n            }\n        }\n    }\n\n    function refresh() {\n        const __ = this._;\n        if ($.dots && __.options.showDots) {\n            $.dots.attr('d', __.path).style('display', function(d) {\n                return d3.geoDistance(d.coordinates, __.proj.invert(__.center)) > 1.57 ? 'none' : 'inline';\n            });\n        }\n    }\n\n    function initData() {\n        const geoCircle = d3.geoCircle();\n        const _g = _.dataDots.geometry || {};\n        const _r = _g.radius || 0.5;\n        _.circles = _.dataDots.features.map(function(d) {\n            const coordinates = d.geometry.coordinates;\n            const r = d.geometry.radius || _r;\n            const circle = geoCircle.center(coordinates).radius(r)();\n            return {coordinates, circle};\n        });\n    }\n\n    return {\n        name: 'dotsPlugin',\n        onInit() {\n            this.$.svgAddDots = svgAddDots;\n            this._.options.showDots = true;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        data(data) {\n            _.dataDots = data;\n            initData();\n        },\n    }\n}\n","export default function() {\n    const _ = {dataDots: null, circles: []};\n\n    function canvasAddDots() {\n        if (_.dataDots && this._.options.showDots) {\n            const circles = [];\n            const proj = this._.proj;\n            const _g = _.dataDots.geometry || {};\n            const center = proj.invert(this._.center);\n            this.canvasPlugin.render(function(context, path) {\n                _.circles.forEach(function(d) {\n                    if (d3.geoDistance(d.coordinates, center) <= 1.57) {\n                        circles.push(d.circle);\n                    }\n                });\n                context.beginPath();\n                path({type: 'GeometryCollection', geometries: circles});\n                context.lineWidth = _g.lineWidth ||  0.2;\n                context.fillStyle = _g.fillStyle || 'rgba(100,0,0,.4)';\n                context.strokeStyle = _g.strokeStyle || 'rgba(100,0,0,.6)';\n                context.fill();\n                context.stroke();\n                context.closePath();\n            }, _.drawTo);\n        }\n    }\n\n    function initData() {\n        const geoCircle = d3.geoCircle();\n        const _g = _.dataDots.geometry || {};\n        const _r = _g.radius || 0.5;\n        _.circles = _.dataDots.features.map(function(d) {\n            const coordinates = d.geometry.coordinates;\n            const r = d.geometry.radius || _r;\n            const circle = geoCircle.center(coordinates).radius(r)();\n            return {coordinates, circle};\n        });\n    }\n\n    return {\n        name: 'dotsCanvas',\n        onInit() {\n            this.$.canvasAddDots = canvasAddDots;\n            this._.options.showDots = true;\n        },\n        onRefresh() {\n            canvasAddDots.call(this);\n        },\n        data(data) {\n            _.dataDots = data;\n            initData();\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        },\n    }\n}\n","export default function() {\n    const _ = {dataPings: null, pings: []};\n\n    return {\n        name: 'pingsCanvas',\n        onInit() {\n            this._.options.showPings = true;\n        },\n        onInterval() {\n            if (!this._.drag && this._.options.showPings) {\n                let center;\n                const proj = this._.proj;\n                if (_.pings.length <= 7) {\n                    center = this._.proj.invert(this._.center);\n                    const visible = _.dataPings.features.filter(function(d) {\n                        return d3.geoDistance(d.geometry.coordinates, center) <= 1.57\n                    })\n                    const d = visible[Math.floor(Math.random() * (visible.length-1))];\n                    _.pings.push({r: 2.5, l: d.geometry.coordinates});\n                }\n                const p = _.pings[0];\n                if (d3.geoDistance(p.l, this._.proj.invert(this._.center)) > 1.57) {\n                    _.pings.shift();\n                } else {\n                    if (!this._.options.spin) {\n                        this._.refresh(/anvas/);\n                    }\n                    this.canvasPlugin.render(function(context) {\n                        context.beginPath();\n                        context.fillStyle = '#F80';\n                        context.arc(\n                            proj(p.l)[0],\n                            proj(p.l)[1], p.r,0,2*Math.PI);\n                        context.fill();\n                        context.closePath();\n                        p.r = p.r + 0.2;\n                        if (p.r>5) {\n                            _.pings.shift();\n                        } else if (_.pings.length>1) {\n                            const d = _.pings.shift();\n                            _.pings.push(d);\n                        }\n                    }, _.drawTo);\n                }\n            }\n        },\n        data(data) {\n            _.dataPings = data;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        },\n    }\n}\n","export default function() {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, dataPings: null};\n    const $ = {};\n\n    function svgAddPings() {\n        _.svg.selectAll('.pings').remove();\n        if (_.dataPings && this._.options.showPings) {\n            const g = _.svg.append(\"g\").attr(\"class\",\"pings\");\n            $.ping2 = g.selectAll('.ping-2')\n                .data(_.dataPings.features).enter().append('circle')\n                .attr('class', 'ping-2')\n                .attr('id', (d,i) => `ping-${i}`);\n\n            $.pings = g.selectAll('.ping-2');\n            refresh.call(this);\n            animate.call(this);\n        }\n    }\n\n    function animate() {\n        var nodes = $.ping2.nodes().filter(d => d.style.display=='inline');\n        if (nodes.length>0) {\n            d3.select(`#${nodes[Math.floor(Math.random() * (nodes.length-1))].id}`)\n                .attr('r', 2)\n                .attr('stroke', '#F00')\n                .attr('stroke-opacity', 1)\n                .attr('stroke-width', '10px')\n            .transition()\n            .duration(1000)\n                .attr('r', 30)\n                .attr('fill', 'none')\n                .attr('stroke-width', '0.1px')\n        }\n    }\n\n    function refresh() {\n        if (this._.drag==null) {\n            $.pings.style(\"display\", 'none');\n        } else if (!this._.drag && $.pings && this._.options.showPings) {\n            const proj = this._.proj;\n            const center = this._.proj.invert(this._.center);\n            $.pings\n            .attr('cx', d => proj(d.geometry.coordinates)[0])\n            .attr('cy', d => proj(d.geometry.coordinates)[1])\n            .style(\"display\", function(d) {\n                return d3.geoDistance(d.geometry.coordinates, center) > 1.57 ? 'none' : 'inline';\n            });\n        }\n    }\n\n    return {\n        name: 'pingsPlugin',\n        onInit() {\n            this._.options.showPings = true;\n            this.$.svgAddPings = svgAddPings;\n            setInterval(() => animate.call(this), 3000);\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        data(data) {\n            _.dataPings = data;\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","export default function() {\n    const _ = {sphereObject: null};\n\n    function addDebugSphere() {\n        if (!_.sphereObject) {\n            const SCALE = this._.proj.scale();\n            const sphere         = new THREE.SphereGeometry(SCALE, 100, 100);\n            const sphereMaterial = new THREE.MeshNormalMaterial({wireframe: false});\n            const sphereMesh     = new THREE.Mesh(sphere, sphereMaterial);\n\n            // For debug ...\n            const dot1 = new THREE.SphereGeometry(30, 10, 10);\n            const dot2 = new THREE.SphereGeometry(30, 10, 10);\n            const dot3 = new THREE.SphereGeometry(30, 10, 10);\n            dot1.translate(0, 0, SCALE);\n            dot2.translate(SCALE, 0, 0);\n            dot3.translate(0,-SCALE, 0);\n            const dot1Material = new THREE.MeshBasicMaterial({color: 'blue' });\n            const dot2Material = new THREE.MeshBasicMaterial({color: 'red'  });\n            const dot3Material = new THREE.MeshBasicMaterial({color: 'green'});\n            const dot1Mesh = new THREE.Mesh(dot1, dot1Material);\n            const dot2Mesh = new THREE.Mesh(dot2, dot2Material);\n            const dot3Mesh = new THREE.Mesh(dot3, dot3Material);\n\n            _.sphereObject = new THREE.Object3D();\n            _.sphereObject.add(sphereMesh, dot1Mesh, dot2Mesh, dot3Mesh);\n\n            rotate.call(this);\n            this.threejsPlugin.addObject(_.sphereObject);\n        }\n    }\n\n    function rotate() {\n        const rt = this._.proj.rotate();\n        rt[0] -= 90;\n        const q1 = this._.versor(rt);\n        const q2 = new THREE.Quaternion(-q1[2], q1[1], q1[3], q1[0]);\n        _.sphereObject.setRotationFromQuaternion(q2);\n    }\n\n    return {\n        name: 'debugThreejs',\n        onInit() {\n            this._.options.showDebugSpahre = true;\n            addDebugSphere.call(this);\n        },\n        onRefresh() {\n            if (_.sphereObject) {\n                rotate.call(this);\n            }\n        }\n    }\n}\n","export default (urlWorld) => {\n    const _ = {checker: []};\n    return {\n        name: 'commonPlugins',\n        onInit() {\n            const rg = this.register;\n            const pl = earthjs.plugins;\n            rg(pl.autorotatePlugin(10));\n            rg(pl.versorDragPlugin());\n            rg(pl.wheelZoomPlugin());\n            rg(pl.configPlugin());\n            rg(pl.oceanPlugin());\n            rg(pl.canvasPlugin());\n            rg(pl.graticuleCanvas());\n            rg(pl.worldCanvas(urlWorld));\n\n            this.canvasPlugin.selectAll('.canvas');\n            this.ready(() => this.svgDraw());\n\n            _.options = this.configPlugin.set();\n            _.buttonClick = str => {\n                const arr = str.split(':'),\n                    key = arr[2],\n                    resultx  = {},\n                    options  =_.options;\n                options[key] = !options[key];\n                resultx[key] =  options[key];\n                if (key=='hideCountries')\n                    resultx.hideLand = false;\n                this.configPlugin.set(resultx);\n            };\n\n            _.checker = [\n                'ocean:Ocean:showOcean',\n                'graticule:Graticule:showGraticule',\n                'hideLand:Land:showLand',\n                'spin:Spin:spin',\n            ].map(d => d.split(':'));\n            const opt = d3.select('.set-options');\n            opt.selectAll('button').data(_.checker).enter().append('button')\n                .text(d => d[1])\n                .on('click', d => _.buttonClick.call(this, d.join(':')));\n        },\n        addChecker(checker) {\n            _.checker.push(checker);\n            _.options = this.configPlugin.set();\n\n            const opt = d3.select('.set-options');\n            opt.selectAll('button').data(_.checker).enter().append('button')\n                .text(d => d[1])\n                .on('click', d => _.buttonClick.call(this, d.join(':')));\n        }\n    }\n}\n","import app from './src/earthjs';\nimport versorDragPlugin from './src/plugins/versorDragPlugin.js';\nimport wheelZoomPlugin from './src/plugins/wheelZoomPlugin.js';\nimport threejsPlugin from './src/plugins/threejsPlugin.js';\nimport canvasPlugin from './src/plugins/canvasPlugin.js';\nimport oceanPlugin from './src/plugins/oceanPlugin.js';\nimport configPlugin from './src/plugins/configPlugin.js';\nimport graticuleCanvas from './src/plugins/graticuleCanvas.js';\nimport graticulePlugin from './src/plugins/graticulePlugin.js';\nimport fauxGlobePlugin from './src/plugins/fauxGlobePlugin.js';\nimport autorotatePlugin from './src/plugins/autorotatePlugin.js';\nimport countrySelectCanvas from './src/plugins/countrySelectCanvas';\nimport countryTooltipCanvas from './src/plugins/countryTooltipCanvas.js';\nimport countryTooltipPlugin from './src/plugins/countryTooltipPlugin.js';\nimport barTooltipPlugin from './src/plugins/barTooltipPlugin.js';\nimport placesPlugin from './src/plugins/placesPlugin.js';\nimport worldCanvas from './src/plugins/worldCanvas.js';\nimport worldPlugin from './src/plugins/worldPlugin.js';\nimport worldThreejs from './src/plugins/worldThreejs.js';\nimport centerPlugin from './src/plugins/centerPlugin.js';\nimport flattenPlugin from './src/plugins/flattenPlugin.js';\nimport barPlugin from './src/plugins/barPlugin.js';\nimport dotsPlugin from './src/plugins/dotsPlugin.js';\nimport dotsCanvas from './src/plugins/dotsCanvas.js';\nimport pingsCanvas from './src/plugins/pingsCanvas.js';\nimport pingsPlugin from './src/plugins/pingsPlugin.js';\nimport debugThreejs from './src/plugins/debugThreejs.js';\nimport commonPlugins from './src/pluginLoader/commonPlugins';\napp.plugins= {\n    versorDragPlugin,\n    wheelZoomPlugin,\n    threejsPlugin,\n    canvasPlugin,\n    oceanPlugin,\n    configPlugin,\n    graticuleCanvas,\n    graticulePlugin,\n    fauxGlobePlugin,\n    autorotatePlugin,\n    countrySelectCanvas,\n    countryTooltipCanvas,\n    countryTooltipPlugin,\n    barTooltipPlugin,\n    placesPlugin,\n    worldCanvas,\n    worldPlugin,\n    worldThreejs,\n    centerPlugin,\n    flattenPlugin,\n    barPlugin,\n    dotsPlugin,\n    dotsCanvas,\n    pingsCanvas,\n    pingsPlugin,\n    debugThreejs,\n    commonPlugins,\n};\nexport default app;\n"],"names":["acos","Math","asin","atan2","cos","max","min","PI","sin","sqrt","radians","degrees","versor","e","l","sl","cl","sp","p","cp","sg","g","cg","cartesian","rotation","q","delta","v0","v1","w","cross","dot","t","s","multiply","q0","q1","versorFn","earthjs","options","ticker","Object","assign","_","drag","svg","d3","selectAll","select","width","attr","height","center","defineProperty","x","globe","fn","promeses","length","loadingData","queue","forEach","urls","ext","url","split","pop","defer","await","args","slice","call","arguments","err","shift","ln","obj","ar","ready","name","unshift","apply","onReady","keys","indexOf","onInit","push","earths","__","svgDraw","twinEarth","$","renderOrder","renderer","$slc","defs","append","interval","intervalRun","setInterval","scale","y","proj","resize","refresh","rotate","r","onIntervalKeys","onInterval","filter","onRefreshKeys","test","d","onRefresh","onResizeKeys","onResize","orthoGraphic","geoOrthographic","translate","precision","clipAngle","addRenderer","path","geoPath","projection","qEvent","qname","sync","mouse","onDrag","onDragKeys","dragSetup","on","dragstarted","dragsended","dragged","r0","invert","r1","k","arr","zoomSetup","event","deltaY","scene","camera","renderThree","render","THREE","Scene","yAxis","Vector3","OrthographicCamera","position","z","WebGLRenderer","antialias","domElement","id","setClearColor","setSize","body","appendChild","add","canvas","svgAddCanvas","showCanvas","fObject","fBody","style","each","getContext","clearRect","drawTo","rChange","_this","idx","o","context","svgAddOcean","remove","showOcean","ocean_fill","ocean","sz","newOpt","spin","undefined","autorotatePlugin","start","stop","datumGraticule","geoGraticule","canvasAddGraticule","showGraticule","transparent","transparentGraticule","canvasPlugin","beginPath","lineWidth","strokeStyle","line","stroke","graticule","svgAddGraticule","datum","svgAddDropShadow","showGlobeShadow","drop_shadow","dropShadow","svgAddGlobeShading","showGlobeShading","globe_shading","globeShading","svgAddGlobeHilight","showGlobeHilight","globe_highlight","globeHilight","Date","degPerSec","degree","now","lastTick","countries","country","onHover","onHoverKeys","polygonContains","polygon","point","n","x0","y0","x1","y1","inside","i","worldCanvas","data","world","topojson","feature","objects","mouseMoveHandler","pos","features","find","f","geometry","coordinates","c1","c2","versorDragPlugin","show","countryTooltip","hideTooltip","toolTipsHandler","countrySelectCanvas","countryName","text","addCountryTooltip","worldPlugin","$countries","barTooltip","svgAddBarTooltip","barPlugin","$bar","dataset","index","barTooltipPlugin","onShow","pageX","pageY","props","properties","title","map","join","html","urlPlaces","places","svgAddPlaces","showPlaces","placePoints","svgAddPlacePoints","enter","svgAddPlaceLabels","placeLabels","position_labels","centerPos","loc","offset","geoDistance","placesPlugin","urlWorld","urlCountryNames","countryNames","canvasAddWorldOrCountries","showLand","transparentWorld","land","fillStyle","backLand","fill","showCountries","showLakes","canvasAddWorld","canvasAddCountries","canvasAddLakes","lakes","ne_110m_lakes","cname","svgAddWorldOrCountries","svgAddCountries","svgAddWorld","svgAddLakes","sphereObject","addWorld","group","Group","loader","TextureLoader","load","texture","SphereGeometry","material","MeshBasicMaterial","overdraw","Mesh","threejsPlugin","addObject","rt","q2","Quaternion","setRotationFromQuaternion","focused","svgAddCountriesOld","cnt","replace","transition","duration","tween","interpolate","addCountryCenteroid","enableCenter","c","focusedCountry","geoCentroid","animation","_x","alpha","interpolatedProjection","a","b","px","geoProjection","raw","lamda","pi","pa","pb","ca","cb","ta","tb","defaultRotate","g1","g2","geoEquirectangular","barProjection","bars","svgAddBar","showBars","gBar","mask","parseInt","value","lengthScale","scaleLinear","domain","range","bar","proj1","proj2","distance","d1","d2","svgClipPath","urlBars","dataDots","svgAddDots","showDots","circles","circle","dots","_g","initData","geoCircle","_r","radius","canvasAddDots","type","geometries","closePath","dataPings","pings","showPings","visible","floor","random","arc","svgAddPings","ping2","animate","nodes","display","addDebugSphere","SCALE","sphere","sphereMaterial","MeshNormalMaterial","wireframe","sphereMesh","dot1","dot2","dot3","dot1Material","color","dot2Material","dot3Material","dot1Mesh","dot2Mesh","dot3Mesh","Object3D","showDebugSpahre","checker","rg","register","pl","plugins","wheelZoomPlugin","configPlugin","oceanPlugin","graticuleCanvas","set","buttonClick","str","key","resultx","hideLand","opt","app"],"mappings":"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"}