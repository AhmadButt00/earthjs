{"version":3,"file":"earthjs.js","sources":["../src/versor.js","../src/earthjs.js","../src/plugins/versorDragPlugin.js","../src/plugins/wheelZoomPlugin.js","../src/plugins/threejsPlugin.js","../src/plugins/canvasPlugin.js","../src/plugins/oceanPlugin.js","../src/plugins/configPlugin.js","../src/plugins/graticuleCanvas.js","../src/plugins/graticulePlugin.js","../src/plugins/fauxGlobePlugin.js","../src/plugins/autorotatePlugin.js","../src/plugins/countryTooltipPlugin.js","../src/plugins/barTooltipPlugin.js","../src/plugins/placesPlugin.js","../src/plugins/worldCanvas.js","../src/plugins/worldPlugin.js","../src/plugins/worldThreejs.js","../src/plugins/centerPlugin.js","../src/plugins/flattenPlugin.js","../src/plugins/barPlugin.js","../src/plugins/dotsPlugin.js","../src/plugins/dotsCanvas.js","../src/plugins/pingsCanvas.js","../src/plugins/pingsPlugin.js","../src/plugins/debugThreejs.js","../src/pluginLoader/commonPlugins.js","../index.js"],"sourcesContent":["// Version 0.0.0. Copyright 2017 Mike Bostock.\nexport default function() {\n    var acos = Math.acos,\n        asin = Math.asin,\n        atan2 = Math.atan2,\n        cos = Math.cos,\n        max = Math.max,\n        min = Math.min,\n        PI = Math.PI,\n        sin = Math.sin,\n        sqrt = Math.sqrt,\n        radians = PI / 180,\n        degrees = 180 / PI;\n\n    // Returns the unit quaternion for the given Euler rotation angles [λ, φ, γ].\n    function versor(e) {\n      var l = e[0] / 2 * radians, sl = sin(l), cl = cos(l), // λ / 2\n          p = e[1] / 2 * radians, sp = sin(p), cp = cos(p), // φ / 2\n          g = e[2] / 2 * radians, sg = sin(g), cg = cos(g); // γ / 2\n      return [\n        cl * cp * cg + sl * sp * sg,\n        sl * cp * cg - cl * sp * sg,\n        cl * sp * cg + sl * cp * sg,\n        cl * cp * sg - sl * sp * cg\n      ];\n    }\n\n    // Returns Cartesian coordinates [x, y, z] given spherical coordinates [λ, φ].\n    versor.cartesian = function(e) {\n      var l = e[0] * radians, p = e[1] * radians, cp = cos(p);\n      return [cp * cos(l), cp * sin(l), sin(p)];\n    };\n\n    // Returns the Euler rotation angles [λ, φ, γ] for the given quaternion.\n    versor.rotation = function(q) {\n      return [\n        atan2(2 * (q[0] * q[1] + q[2] * q[3]), 1 - 2 * (q[1] * q[1] + q[2] * q[2])) * degrees,\n        asin(max(-1, min(1, 2 * (q[0] * q[2] - q[3] * q[1])))) * degrees,\n        atan2(2 * (q[0] * q[3] + q[1] * q[2]), 1 - 2 * (q[2] * q[2] + q[3] * q[3])) * degrees\n      ];\n    };\n\n    // Returns the quaternion to rotate between two cartesian points on the sphere.\n    versor.delta = function(v0, v1) {\n      var w = cross(v0, v1), l = sqrt(dot(w, w));\n      if (!l) return [1, 0, 0, 0];\n      var t = acos(max(-1, min(1, dot(v0, v1)))) / 2, s = sin(t); // t = θ / 2\n      return [cos(t), w[2] / l * s, -w[1] / l * s, w[0] / l * s];\n    };\n\n    // Returns the quaternion that represents q0 * q1.\n    versor.multiply = function(q0, q1) {\n      return [\n        q0[0] * q1[0] - q0[1] * q1[1] - q0[2] * q1[2] - q0[3] * q1[3],\n        q0[0] * q1[1] + q0[1] * q1[0] + q0[2] * q1[3] - q0[3] * q1[2],\n        q0[0] * q1[2] - q0[1] * q1[3] + q0[2] * q1[0] + q0[3] * q1[1],\n        q0[0] * q1[3] + q0[1] * q1[2] - q0[2] * q1[1] + q0[3] * q1[0]\n      ];\n    };\n\n    function cross(v0, v1) {\n      return [\n        v0[1] * v1[2] - v0[2] * v1[1],\n        v0[2] * v1[0] - v0[0] * v1[2],\n        v0[0] * v1[1] - v0[1] * v1[0]\n      ];\n    }\n\n    function dot(v0, v1) {\n      return v0[0] * v1[0] + v0[1] * v1[1] + v0[2] * v1[2];\n    }\n\n    return versor;\n}\n","import versorFn from './versor.js';\n\nconst versor = versorFn();\nconst earthjs = (options={}) => {\n    /*eslint no-console: 0 */\n    clearInterval(earthjs.ticker);\n    options = Object.assign({\n        select: '#earth',\n        rotate: 130,\n    }, options);\n    const _ = {\n        onResize: {},\n        onResizeKeys: [],\n\n        onRefresh: {},\n        onRefreshKeys: [],\n\n        onInterval: {},\n        onIntervalKeys: [],\n\n        renderOrder: [\n            'renderThree',\n            'svgAddDropShadow',\n            'svgAddCanvas',\n            'canvasAddGraticule',\n            'canvasAddWorldOrCountries',\n            'canvasAddDots',\n            'svgAddOcean',\n            'svgAddGlobeShading',\n            'svgAddGraticule',\n            'svgAddWorldOrCountries',\n            'svgAddGlobeHilight',\n            'svgAddPlaces',\n            'svgAddPings',\n            'svgAddDots',\n            'svgAddBar',\n        ],\n        ready: null,\n        loadingData: null,\n        promeses: []\n    }\n    const drag = false;\n    const svg = d3.selectAll(options.select);\n    let width = svg.attr('width'), height = svg.attr('height');\n    const ltScale = d3.scaleLinear().domain([0, width]).range([-180, 180]);\n    if (!width || !height) {\n        width = options.width || 700;\n        height = options.height || 500;\n        svg.attr(\"width\", width).attr(\"height\", height);\n    }\n    options.width = width;\n    options.height = height;\n    const center = [width/2, height/2];\n    const globe = {\n        _: {\n            svg,\n            drag,\n            versor,\n            center,\n            options,\n            ltScale,\n        },\n        $: {},\n        ready(fn) {\n            if (fn) {\n                if (_.promeses.length>0) {\n                    _.loadingData = true;\n                    const q = d3.queue();\n                    _.promeses.forEach(obj => {\n                        obj.urls.forEach(url => {\n                            let ext = url.split('.').pop();\n                            if (ext==='geojson') {\n                                ext = 'json';\n                            }\n                            q.defer(d3[ext], url);\n                        });\n                    })\n                    q.await(function() {\n                        let args = [].slice.call(arguments);\n                        const err = args.shift();\n                        _.promeses.forEach(obj => {\n                            const ln = obj.urls.length;\n                            const ar = args.slice(0,ln);\n                            ar.unshift(err);\n\n                            obj.onReady.apply(globe, ar);\n                            args = args.slice(ln);\n                        });\n                        _.loadingData = false;\n                        fn.call(globe);\n                    });\n                }\n            } else {\n                return _.loadingData;\n            }\n        },\n        register(obj) {\n            const ar = {};\n            globe[obj.name] = ar;\n            Object.keys(obj).forEach(function(fn) {\n                if ([\n                    'urls',\n                    'onReady',\n                    'onInit',\n                    'onResize',\n                    'onRefresh',\n                    'onInterval'].indexOf(fn)===-1) {\n                    if (typeof(obj[fn])==='function') {\n                        ar[fn] = function() {\n                            return obj[fn].apply(globe, arguments);\n                        }\n                    }\n                }\n            });\n            if (obj.onInit) {\n                obj.onInit.call(globe);\n            }\n            qEvent(obj,'onResize');\n            qEvent(obj,'onRefresh');\n            qEvent(obj,'onInterval');\n            if (obj.urls && obj.onReady) {\n                _.promeses.push({\n                    urls: obj.urls,\n                    onReady: obj.onReady\n                });\n            }\n            return globe;\n        }\n    }\n\n    //----------------------------------------\n    let earths = [];\n    let ticker = null;\n\n    globe.svgDraw = function(twinEarth) {\n        const $ = globe.$;\n        earths = twinEarth || [];\n        _.renderOrder.forEach(function(renderer) {\n            $[renderer] && $[renderer].call(globe);\n        });\n        earths.forEach(function(p) {\n            p.svgDraw(null);\n        });\n        if (ticker===null && earths!==[]) {\n            globe._.ticker.call(globe);\n        }\n        return globe;\n    }\n\n    globe._.defs = globe._.svg.append(\"defs\");\n    globe._.ticker = function(interval) {\n        const ex = globe._.intervalRun;\n        interval = interval || 50;\n        ticker = setInterval(() => {\n            ex.call(globe);\n            earths.forEach(function(p) {\n                p._.intervalRun.call(p);\n            });\n        }, interval);\n        earthjs.ticker = ticker;\n        return globe;\n    }\n\n    //----------------------------------------\n    // Helper\n    globe._.scale = function(y) {\n        globe._.proj.scale(y);\n        globe._.resize.call(globe);\n        globe._.refresh.call(globe);\n        return globe;\n    }\n\n    globe._.rotate = function(r) {\n        globe._.proj.rotate(r);\n        globe._.refresh.call(globe);\n        return globe;\n    }\n\n    globe._.intervalRun = function() {\n        _.onIntervalKeys.forEach(function(fn) {\n            _.onInterval[fn].call(globe);\n        });\n        return globe;\n    }\n\n    globe._.refresh = function(filter) {\n        const keys = filter ? _.onRefreshKeys.filter(d => filter.test(d)) : _.onRefreshKeys;\n        keys.forEach(function(fn) {\n            _.onRefresh[fn].call(globe);\n        });\n        return globe;\n    }\n\n    globe._.resize = function() {\n        _.onResizeKeys.forEach(function(fn) {\n            _.onResize[fn].call(globe);\n        });\n        return globe;\n    }\n\n    globe._.orthoGraphic = function() {\n        const width = globe._.options.width;\n        const height = globe._.options.height;\n        const rotate = globe._.options.rotate;\n        return d3.geoOrthographic()\n            .scale(width / 3.5)\n            .rotate([rotate, 0])\n            .translate([width / 2, height / 2])\n            .precision(0.1)\n            .clipAngle(90);\n    }\n\n    globe._.addRenderer = function(name) {\n        if (_.renderOrder.indexOf(name)<0) {\n            _.renderOrder.push(name);\n        }\n    }\n\n    globe._.proj = globe._.orthoGraphic();\n    globe._.path = d3.geoPath().projection(globe._.proj);\n    return globe;\n    //----------------------------------------\n    function qEvent(obj, qname) {\n        if (obj[qname]) {\n            _[qname][obj.name] = obj[qname];\n            _[qname+'Keys'] = Object.keys(_[qname]);\n        }\n    }\n}\nexport default earthjs;\n","// Mike Bostock’s Block https://bl.ocks.org/mbostock/7ea1dde508cec6d2d95306f92642bc42\nexport default function() {\n    const _ = {svg:null, q: null, sync: []};\n\n    function dragSetup() {\n        const _this = this,\n        versor = this._.versor;\n        _.svg.call(d3.drag()\n            .on('start', dragstarted)\n            .on('end',   dragsended)\n            .on('drag',  dragged));\n\n        let v0, // Mouse position in Cartesian coordinates at start of drag gesture.\n            r0, // Projection rotation as Euler angles at start.\n            q0; // Projection rotation as versor at start.\n\n        function rotate(src) {\n            const r = src._.proj.rotate();\n            const d = r[0] - r0[0];\n            r[0] = d + this._.proj.rotate()[0];\n            if (r[0] >= 180)\n                r[0] -= 360;\n            this._.rotate(r);\n        }\n\n        function dragstarted() {\n            v0 = versor.cartesian(_this._.proj.invert(d3.mouse(this)));\n            r0 = _this._.proj.rotate();\n            q0 = versor(r0);\n            _this._.drag = null;\n            _this._.refresh();\n        }\n\n        function dragged() {\n            const v1 = versor.cartesian(_this._.proj.rotate(r0).invert(d3.mouse(this))),\n                q1 = versor.multiply(q0, versor.delta(v0, v1)),\n                r1 = versor.rotation(q1);\n            _this._.rotate(r1);\n            _this._.drag = true;\n        }\n\n        function dragsended() {\n            _.sync.forEach(function(p) {\n                rotate.call(p, _this);\n            })\n            _this._.drag = false;\n            _this._.refresh();\n        }\n    }\n\n    return {\n        name: 'versorDragPlugin',\n        onInit() {\n            _.svg = this._.svg;\n            dragSetup.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n                dragSetup.call(this);\n            }\n            return _.svg;\n        },\n        sync(arr) {\n            _.sync = arr;\n        }\n    }\n}\n","export default function() {\n    return {\n        name: 'wheelZoomPlugin',\n        onInit() {\n            const _this = this;\n            this._.svg.on('wheel', function() {\n                const y = d3.event.deltaY+_this._.proj.scale();\n                if (y>230 && y<1000) {\n                    _this._.scale(y);\n                }\n            });\n        }\n    }\n}\n","// Philippe Rivière’s https://bl.ocks.org/Fil/9ed0567b68501ee3c3fef6fbe3c81564\n// https://gist.github.com/Fil/ad107bae48e0b88014a0e3575fe1ba64\nexport default function() {\n    const _ = {renderer: null, scene: null, camera: null, scale: null};\n\n    function renderThree() {\n        setTimeout(function() {\n            _.renderer.render(_.scene, _.camera);\n        },1);\n    }\n\n    return {\n        name: 'threejsPlugin',\n        onInit() {\n            const\n                width = this._.options.width,\n                height= this._.options.height;\n            _.scene  = new THREE.Scene()\n            _.yAxis  = new THREE.Vector3(0,1,0);\n            _.camera = new THREE.OrthographicCamera(-width / 2, width / 2, height / 2, -height / 2, 0.1, 10000)\n            _.camera.position.z = 500; // (higher than RADIUS + size of the bubble)\n            this._.camera = _.camera;\n\n            // Create renderer object.\n            _.renderer = new THREE.WebGLRenderer({antialias: true});\n            _.renderer.domElement.id = 'three-js';\n            _.renderer.setClearColor('white', 1);\n            _.renderer.setSize(width, height);\n            document.body.appendChild(_.renderer.domElement)\n\n            this.renderThree = renderThree; // renderer\n        },\n        onRefresh() {\n            renderThree.call(this);\n        },\n        addObject(obj) {\n            _.scene.add(obj);\n        }\n    }\n}\n","// Bo Ericsson’s Block http://bl.ocks.org/boeric/aa80b0048b7e39dd71c8fbe958d1b1d4\nexport default () => {\n    /*eslint no-console: 0 */\n    const _ = {canvas: null, path: null, q: null}\n\n    function svgAddCanvas() {\n        if (this._.options.showCanvas) {\n            if (!_.canvas) {\n                const fObject = this._.svg.append(\"g\").attr(\"class\",\"canvas\").append(\"foreignObject\")\n                .attr(\"x\", 0)\n                .attr(\"y\", 0)\n                .attr(\"width\", this._.options.width)\n                .attr(\"height\", this._.options.height);\n                const fBody = fObject.append(\"xhtml:body\")\n                .style(\"margin\", \"0px\")\n                .style(\"padding\", \"0px\")\n                .style(\"background-color\", \"none\")\n                .style(\"width\", this._.options.width + \"px\")\n                .style(\"height\", this._.options.height + \"px\");\n                _.canvas = fBody.append(\"canvas\");\n            }\n            _.canvas\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._.options.width)\n            .attr(\"height\", this._.options.height);\n            return _.canvas;\n        }\n    }\n\n    return {\n        name: 'canvasPlugin',\n        onInit() {\n            this._.options.showCanvas = true;\n            this.$.svgAddCanvas = svgAddCanvas;\n            _.path = d3.geoPath().projection(this._.proj);\n        },\n        onRefresh() {\n            const width = this._.options.width,\n                  height= this._.options.height;\n            _.canvas.each(function() {\n                this.getContext(\"2d\").clearRect(0, 0, width, height);\n            });\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.canvas = d3.selectAll(q);\n            }\n            return _.canvas;\n        },\n        render(fn, drawTo, options) {\n            if (this._.options.showCanvas) {\n                var rChange = false;\n                const _this = this;\n                const r = this._.proj.rotate();\n                _.canvas.each(function(obj, idx) {\n                    const context = this.getContext(\"2d\");\n                    if (!drawTo || drawTo.indexOf(idx)>-1) {\n                        const o = options && options[idx];\n                        if (o && o.rotate) {\n                            const newR = [r[0]+o.rotate, r[1], r[2]];\n                            _this._.proj.rotate(newR);\n                            rChange = true;\n                        }\n                        fn.call(_this, context, _.path.context(context));\n                        if (rChange) {\n                            rChange = false;\n                            _this._.proj.rotate(r);\n                        }\n                    }\n                });\n            }\n        }\n    }\n}\n","export default function() {\n    const _ = {svg:null, q: null, scale: 0};\n\n    function svgAddOcean() {\n        _.svg.selectAll('#ocean,.ocean').remove();\n        if (this._.options.showOcean) {\n            const ocean_fill = this._.defs.append(\"radialGradient\")\n                .attr(\"id\", \"ocean\")\n                .attr(\"cx\", \"75%\")\n                .attr(\"cy\", \"25%\");\n            ocean_fill.append(\"stop\")\n                .attr(\"offset\", \"5%\")\n                .attr(\"stop-color\", \"#ddf\");\n            ocean_fill.append(\"stop\")\n                .attr(\"offset\", \"100%\")\n                .attr(\"stop-color\", \"#9ab\");\n            this._.ocean = _.svg.append(\"g\").attr(\"class\",\"ocean\").append(\"circle\")\n                .attr(\"cx\",this._.options.width / 2).attr(\"cy\", this._.options.height / 2)\n                .attr(\"class\", \"noclicks\");\n            resize.call(this);\n            return this._.ocean;\n        }\n    }\n\n    function resize() {\n        if (this._.ocean && this._.options.showOcean) {\n            this._.ocean.attr(\"r\", this._.proj.scale()+_.scale);\n        }\n    }\n\n    return {\n        name: 'oceanPlugin',\n        onInit() {\n            this.$.svgAddOcean = svgAddOcean;\n            this._.options.showOcean = true;\n            _.svg = this._.svg;\n        },\n        onResize() {\n            resize.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        scale(sz) {\n            if (sz) {\n                _.scale = sz;\n                resize.call(this);\n            } else {\n                return _.scale;\n            }\n        }\n    }\n}\n","export default function() {\n    return {\n        name: 'configPlugin',\n        set(newOpt) {\n            if (newOpt) {\n                Object.assign(this._.options, newOpt);\n                if (newOpt.spin!==undefined) {\n                    const p = this.autorotatePlugin;\n                    newOpt.spin ? p.start() : p.stop();\n                }\n                this.svgDraw();\n            }\n            return Object.assign({}, this._.options);\n        }\n    }\n}\n","export default function() {\n    const datumGraticule = d3.geoGraticule()();\n    const _ = {style: {}, drawTo: null};\n\n    function canvasAddGraticule() {\n        if (this._.options.showGraticule) {\n            this.canvasPlugin.render(function(context, path) {\n                context.beginPath();\n                path(datumGraticule);\n                context.lineWidth = 0.3;\n                context.strokeStyle = _.style.line || 'rgba(119,119,119,0.4)';\n                context.stroke();\n            }, _.drawTo);\n        }\n    }\n\n    return {\n        name: 'graticuleCanvas',\n        onInit() {\n            this.$.canvasAddGraticule = canvasAddGraticule;\n            this._.options.showGraticule = true;\n        },\n        onRefresh() {\n            canvasAddGraticule.call(this);\n        },\n        style(s) {\n            if (s) {\n                _.style = s;\n            }\n            return _.style;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        }\n    }\n}\n","export default function() {\n    const datumGraticule = d3.geoGraticule();\n    const _ = {svg:null, q: null}\n\n    function svgAddGraticule() {\n        _.svg.selectAll('.graticule').remove();\n        if (this._.options.showGraticule) {\n            this._.graticule = _.svg.append(\"g\").attr(\"class\",\"graticule\").append(\"path\")\n                .datum(datumGraticule)\n                .attr(\"class\", \"noclicks\");\n            refresh.call(this);\n            return this._.graticule;\n        }\n    }\n\n    function refresh() {\n        if (this._.graticule && this._.options.showGraticule) {\n            this._.graticule.attr(\"d\", this._.path);\n        }\n    }\n\n    return {\n        name: 'graticulePlugin',\n        onInit() {\n            this.$.svgAddGraticule = svgAddGraticule;\n            this._.options.showGraticule = true;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","// Derek Watkins’s Block http://bl.ocks.org/dwtkns/4686432\nexport default function() {\n    const _ = {svg:null, q: null};\n\n    function svgAddDropShadow() {\n        _.svg.selectAll('#drop_shadow,.drop_shadow').remove();\n        if (this._.options.showGlobeShadow) {\n            const drop_shadow = this._.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"drop_shadow\")\n                  .attr(\"cx\", \"50%\")\n                  .attr(\"cy\", \"50%\");\n                drop_shadow.append(\"stop\")\n                  .attr(\"offset\",\"20%\").attr(\"stop-color\", \"#000\")\n                  .attr(\"stop-opacity\",\".5\")\n                drop_shadow.append(\"stop\")\n                  .attr(\"offset\",\"100%\").attr(\"stop-color\", \"#000\")\n                  .attr(\"stop-opacity\",\"0\")\n            this._.dropShadow = _.svg.append(\"g\").attr(\"class\",\"drop_shadow\").append(\"ellipse\")\n                  .attr(\"cx\", this._.options.width/2).attr(\"cy\", this._.options.height-50)\n                  .attr(\"rx\", this._.proj.scale()*0.90)\n                  .attr(\"ry\", this._.proj.scale()*0.25)\n                  .attr(\"class\", \"noclicks\")\n                  .style(\"fill\", \"url(#drop_shadow)\");\n            this._.dropShadow;\n        }\n    }\n\n    function svgAddGlobeShading() {\n        _.svg.selectAll('#shading,.shading').remove();\n        if (this._.options.showGlobeShading) {\n            const globe_shading = this._.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"shading\")\n                  .attr(\"cx\", \"50%\")\n                  .attr(\"cy\", \"40%\");\n                globe_shading.append(\"stop\")\n                  .attr(\"offset\",\"50%\").attr(\"stop-color\", \"#9ab\")\n                  .attr(\"stop-opacity\",\"0\")\n                globe_shading.append(\"stop\")\n                  .attr(\"offset\",\"100%\").attr(\"stop-color\", \"#3e6184\")\n                  .attr(\"stop-opacity\",\"0.3\")\n            this._.globeShading = _.svg.append(\"g\").attr(\"class\",\"shading\").append(\"circle\")\n                .attr(\"cx\", this._.options.width / 2).attr(\"cy\", this._.options.height / 2)\n                .attr(\"r\",  this._.proj.scale())\n                .attr(\"class\",\"noclicks\")\n                .style(\"fill\", \"url(#shading)\");\n            return this._.globeShading;\n        }\n    }\n\n    function svgAddGlobeHilight() {\n        _.svg.selectAll('#hilight,.hilight').remove();\n        if (this._.options.showGlobeHilight) {\n            const globe_highlight = this._.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"hilight\")\n                  .attr(\"cx\", \"75%\")\n                  .attr(\"cy\", \"25%\");\n                globe_highlight.append(\"stop\")\n                  .attr(\"offset\", \"5%\").attr(\"stop-color\", \"#ffd\")\n                  .attr(\"stop-opacity\",\"0.6\");\n                globe_highlight.append(\"stop\")\n                  .attr(\"offset\", \"100%\").attr(\"stop-color\", \"#ba9\")\n                  .attr(\"stop-opacity\",\"0.2\");\n            this._.globeHilight = _.svg.append(\"g\").attr(\"class\",\"hilight\").append(\"circle\")\n                .attr(\"cx\", this._.options.width / 2).attr(\"cy\", this._.options.height / 2)\n                .attr(\"r\",  this._.proj.scale())\n                .attr(\"class\",\"noclicks\")\n                .style(\"fill\", \"url(#hilight)\");\n            return this._.globeHilight;\n        }\n    }\n\n    return {\n        name: 'fauxGlobePlugin',\n        onInit() {\n            this._.options.showGlobeShadow = true;\n            this._.options.showGlobeShading = true;\n            this._.options.showGlobeHilight = true;\n            this.$.svgAddDropShadow = svgAddDropShadow;\n            this.$.svgAddGlobeHilight = svgAddGlobeHilight;\n            this.$.svgAddGlobeShading = svgAddGlobeShading;\n            _.svg = this._.svg;\n        },\n        onResize() {\n            if (this._.globeShading && this._.options.showGlobeShading) {\n                this._.globeShading.attr(\"r\", this._.proj.scale());\n            }\n            if (this._.globeHilight && this._.options.showGlobeHilight) {\n                this._.globeHilight.attr(\"r\", this._.proj.scale());\n            }\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","export default degPerSec => {\n    /*eslint no-console: 0 */\n    const _ = {\n        lastTick: new Date(),\n        degree: degPerSec,\n        sync: []\n    }\n\n    function rotate(delta) {\n        const r = this._.proj.rotate();\n        r[0] += _.degree * delta / 1000;\n        this._.rotate(r);\n    }\n\n    return {\n        name: 'autorotatePlugin',\n        onInit() {\n            this._.options.spin = true;\n        },\n        onInterval() {\n            const now = new Date();\n            if (!this._.options.spin || this._.drag) {\n                _.lastTick = now;\n            } else {\n                const delta = now - _.lastTick;\n                rotate.call(this, delta);\n                _.sync.forEach(g => rotate.call(g, delta));\n                _.lastTick = now;\n            }\n        },\n        speed(degPerSec) {\n            _.degree = degPerSec;\n        },\n        start() {\n            this._.options.spin = true;\n        },\n        stop() {\n            this._.options.spin = false;\n        },\n        sync(arr) {\n            _.sync = arr;\n        }\n    };\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    const countryTooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"countryTooltip\");\n\n    return {\n        name: 'countryTooltipPlugin',\n        onInit() {\n            const _this = this;\n            const originalsvgAddCountries = this.$.svgAddCountries;\n            this.$.svgAddCountries = function() {\n                return originalsvgAddCountries.call(this)\n                .on(\"mouseover\", function(d) {\n                    const country = _this.worldPlugin.countryName.call(_this, d);\n                    countryTooltip.text(country.name)\n                    .style(\"left\", (d3.event.pageX + 7) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 15) + \"px\")\n                    .style(\"display\", \"block\")\n                    .style(\"opacity\", 1);\n                })\n                .on(\"mouseout\", function() {\n                    countryTooltip.style(\"opacity\", 0)\n                    .style(\"display\", \"none\");\n                })\n                .on(\"mousemove\", function() {\n                    countryTooltip.style(\"left\", (d3.event.pageX + 7) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 15) + \"px\");\n                });\n            }\n        },\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    const barTooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"barTooltip\");\n\n    return {\n        name: 'barTooltipPlugin',\n        onInit() {\n            const _this = this;\n            const originalsvgAddBar = this.$.svgAddBar;\n            this.$.svgAddBar = function() {\n                return originalsvgAddBar.call(this)\n                .on(\"mouseover\", function() {\n                    const i = +this.dataset.index;\n                    var d = _this.barPlugin.data().features[i];\n                    if (_this.barTooltipPlugin.onShow) {\n                        d = _this.barTooltipPlugin.onShow.call(this, d, i, barTooltip);\n                    }\n                    _this.barTooltipPlugin.show(d)\n                    .style(\"left\", (d3.event.pageX + 7) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 15) + \"px\")\n                    .style(\"display\", \"block\")\n                    .style(\"opacity\", 1);\n                })\n                .on(\"mouseout\", function() {\n                    barTooltip.style(\"opacity\", 0)\n                    .style(\"display\", \"none\");\n                })\n                .on(\"mousemove\", function() {\n                    barTooltip.style(\"left\", (d3.event.pageX + 7) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 15) + \"px\");\n                });\n            }\n        },\n        show(d) {\n            const props = d.properties;\n            const title = Object.keys(props).map(k => k+': '+props[k]).join(\"<br/>\");\n            return barTooltip.html(title)\n        }\n    }\n}\n","export default function(urlPlaces) {\n    const _ = {svg:null, q: null, places: null};\n\n    function svgAddPlaces() {\n        _.svg.selectAll('.points,.labels').remove();\n        if (_.places) {\n            if (this._.options.showPlaces) {\n                svgAddPlacePoints.call(this);\n                svgAddPlaceLabels.call(this);\n                refresh.call(this);\n            }\n        }\n    }\n\n    function refresh() {\n        if (this._.placePoints) {\n            this._.placePoints.attr(\"d\", this._.path);\n            position_labels.call(this);\n        }\n    }\n\n    function svgAddPlacePoints() {\n        this._.placePoints = _.svg.append(\"g\").attr(\"class\",\"points\").selectAll(\"path\")\n            .data(_.places.features).enter().append(\"path\")\n            .attr(\"class\", \"point\");\n        return this._.placePoints;\n    }\n\n    function svgAddPlaceLabels() {\n        this._.placeLabels = _.svg.append(\"g\").attr(\"class\",\"labels\").selectAll(\"text\")\n            .data(_.places.features).enter().append(\"text\")\n            .attr(\"class\", \"label\")\n            .text(function(d) { return d.properties.name });\n        return this._.placeLabels;\n    }\n\n    function position_labels() {\n        const _this = this;\n        const centerPos = this._.proj.invert([this._.options.width / 2, this._.options.height/2]);\n\n        this._.placeLabels\n            .attr(\"text-anchor\",function(d) {\n                const x = _this._.proj(d.geometry.coordinates)[0];\n                return x < _this._.options.width/2-20 ? \"end\" :\n                       x < _this._.options.width/2+20 ? \"middle\" :\n                       \"start\"\n            })\n            .attr(\"transform\", function(d) {\n                const loc = _this._.proj(d.geometry.coordinates),\n                    x = loc[0],\n                    y = loc[1];\n                const offset = x < _this._.options.width/2 ? -5 : 5;\n                return \"translate(\" + (x+offset) + \",\" + (y-2) + \")\"\n            })\n            .style(\"display\", function(d) {\n                return d3.geoDistance(d.geometry.coordinates, centerPos) > 1.57 ? 'none' : 'inline';\n            });\n    }\n\n    return {\n        name: 'placesPlugin',\n        urls: urlPlaces && [urlPlaces],\n        onReady(err, places) {\n            _.places = places;\n        },\n        onInit() {\n            this.$.svgAddPlaces = svgAddPlaces;\n            this._.options.showPlaces = true;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(p) {\n            if (p) {\n                const data = p.placesPlugin.data()\n                _.places = data.places;\n            } else {\n                return {places: _.places}\n            }\n        }\n    };\n}\n","// John J Czaplewski’s Block http://bl.ocks.org/jczaplew/6798471\nexport default (urlWorld, urlCountryNames) => {\n    /*eslint no-debugger: 0 */\n    /*eslint no-console: 0 */\n    const _ = {world: null, countryNames: null, style: {}, drawTo: null, options: {}};\n\n    function canvasAddWorldOrCountries() {\n        if (_.world && this._.options.showLand) {\n            canvasAddWorld.call(this);\n            if (!this._.drag) {\n                if (this._.options.showCountries) {\n                    canvasAddCountries.call(this);\n                }\n                if (this._.options.showLakes) {\n                    canvasAddLakes.call(this);\n                }\n            }\n        }\n    }\n\n    function canvasAddWorld() {\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(_.land);\n            context.fillStyle = _.style.land || 'rgba(117, 87, 57, 0.4)';\n            context.fill();\n        }, _.drawTo, _.options);\n    }\n\n    function canvasAddCountries() {\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(_.countries);\n            context.lineWidth = 0.5;\n            context.strokeStyle = _.style.countries || 'rgba(80, 64, 39, 0.6)';\n            context.stroke();\n        }, _.drawTo, _.options);\n    }\n\n    function canvasAddLakes() {\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(_.lakes);\n            context.fillStyle = _.style.lakes || 'rgba(80, 87, 97, 0.4)';\n            context.fill();\n        }, _.drawTo, _.options);\n    }\n\n    let urls = null;\n    if (urlWorld) {\n        urls = [urlWorld];\n        if (urlCountryNames) {\n            urls.push(urlCountryNames);\n        }\n    }\n\n    return {\n        name: 'worldCanvas',\n        urls: urls,\n        onReady(err, world, countryNames) {\n            this.worldCanvas.data({world, countryNames});\n        },\n        onInit() {\n            this._.options.showLand = true;\n            this._.options.showLakes = true;\n            this._.options.showCountries = true;\n            this.$.canvasAddWorldOrCountries = canvasAddWorldOrCountries;\n        },\n        onRefresh() {\n            canvasAddWorldOrCountries.call(this);\n        },\n        data(data) {\n            if (data) {\n                _.world = data.world;\n                _.countryNames = data.countryNames;\n                _.land = topojson.feature(_.world, _.world.objects.land);\n                _.lakes = topojson.feature(_.world, _.world.objects.ne_110m_lakes);\n                _.countries = topojson.feature(_.world, _.world.objects.countries);\n            }\n            return {\n                world: _.world ,\n                countryNames: _.countryNames\n            }\n        },\n        style(s) {\n            if (s) {\n                _.style = s;\n            }\n            return _.style;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        },\n        options(options) {\n            _.options = options;\n        }\n    }\n}\n","export default function(urlWorld, urlCountryNames) {\n    const _ = {svg:null, q: null, world: null, countryNames: null};\n    const countryClick = function() {\n        // console.log(d);\n    }\n\n    function svgAddWorldOrCountries() {\n        _.svg.selectAll('.land,.lakes,.countries').remove();\n        if (this._.options.showLand) {\n            if (_.world) {\n                if (this._.options.showCountries) {\n                    this.$.svgAddCountries.call(this);\n                } else {\n                    this.$.svgAddWorld.call(this);\n                }\n                if (this._.options.showLakes) {\n                    this.$.svgAddLakes.call(this);\n                }\n            }\n            refresh.call(this);\n        }\n    }\n\n    function refresh() {\n        if (_.world && this._.options.showLand) {\n            if (this._.options.showCountries) {\n                this._.countries.attr(\"d\", this._.path);\n            } else {\n                this._.world.attr(\"d\", this._.path);\n            }\n            if (this._.options.showLakes) {\n                this._.lakes.attr(\"d\", this._.path);\n            }\n        }\n    }\n\n    function svgAddWorld() {\n        this._.world = _.svg.append(\"g\").attr(\"class\",\"land\").append(\"path\")\n            .datum(_.land);\n        return this._.world;\n    }\n\n    function svgAddCountries() {\n        this._.countries = _.svg.append(\"g\").attr(\"class\",\"countries\").selectAll(\"path\")\n            .data(_.countries.features).enter().append(\"path\").on('click', countryClick)\n                .attr(\"id\",function(d) {return 'x'+d.id});\n        return this._.countries;\n    }\n\n    function svgAddLakes() {\n        this._.lakes = _.svg.append(\"g\").attr(\"class\",\"lakes\").append(\"path\")\n            .datum(_.lakes);\n        return this._.lakes;\n    }\n\n    let urls = null;\n    if (urlWorld) {\n        urls = [urlWorld];\n        if (urlCountryNames) {\n            urls.push(urlCountryNames);\n        }\n    }\n    return {\n        name: 'worldPlugin',\n        urls: urls,\n        onReady(err, world, countryNames) {\n            this.worldPlugin.data({world, countryNames});\n        },\n        onInit() {\n            this._.options.showLand = true;\n            this._.options.showLakes = true;\n            this._.options.showCountries = true;\n            this.$.svgAddWorldOrCountries = svgAddWorldOrCountries;\n            this.$.svgAddCountries = svgAddCountries;\n            this.$.svgAddLakes = svgAddLakes;\n            this.$.svgAddWorld = svgAddWorld;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        countries() {\n            return _.countries.features;\n        },\n        data(data) {\n            if (data) {\n                _.world = data.world;\n                _.countryNames = data.countryNames;\n                _.land = topojson.feature(_.world, _.world.objects.land);\n                _.lakes = topojson.feature(_.world, _.world.objects.ne_110m_lakes);\n                _.countries = topojson.feature(_.world, _.world.objects.countries);\n            }\n            return {\n                world: _.world ,\n                countryNames: _.countryNames\n            }\n        },\n        countryName(d) {\n            let cname = '';\n            if (_.countryNames) {\n                cname = _.countryNames.find(function(x) {\n                    return x.id==d.id;\n                });\n            }\n            return cname;\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n    };\n}\n","export default function() {\n    const _ = {sphereObject: null};\n\n    function addWorld() {\n        if (!_.sphereObject) {\n            const _this  = this;\n            const group  = new THREE.Group();\n            const loader = new THREE.TextureLoader();\n            loader.load(\"./d/world.jpg\", function(texture) {\n                const geometry   = new THREE.SphereGeometry( 200, 20, 20 );\n                const material   = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 } );\n                _.sphereObject = new THREE.Mesh( geometry, material );\n                group.add(_.sphereObject);\n                rotate.call(_this);\n            });\n            _this.threejsPlugin.addObject(group);\n        }\n    }\n\n    function rotate() {\n        const rt = this._.proj.rotate();\n        rt[0] -= 90;\n        const q1 = this._.versor(rt);\n        const q2 = new THREE.Quaternion(-q1[2], q1[1], q1[3], q1[0]);\n        _.sphereObject.setRotationFromQuaternion(q2);\n    }\n\n    return {\n        name: 'worldThreejs',\n        onInit() {\n            addWorld.call(this);\n        },\n        onRefresh() {\n            if (_.sphereObject) {\n                rotate.call(this);\n            }\n        }\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default () => {\n    const _ = {focused: null, svgAddCountriesOld: null}\n\n    function country(cnt, id) {\n        id = id.replace('x', '');\n        for(let i=0, l=cnt.length; i<l; i++) {\n            if(cnt[i].id == id) {return cnt[i];}\n        }\n    }\n\n    function transition(p) {\n        d3.transition()\n        .duration(2500)\n        .tween(\"rotate\", () => {\n            const  r = d3.interpolate(this._.proj.rotate(), [-p[0], -p[1]]);\n            return t => {\n                this._.rotate(r(t));\n            };\n        })\n    }\n\n    function svgAddCountries() {\n        const _this = this;\n        const countries = _.svgAddCountriesOld.call(this);\n        countries.on(\"click\", function() {\n            const id = this.id.replace('x', '');\n            const c = _this.worldPlugin.countries();\n            const focusedCountry = country(c, id);\n            const p = d3.geoCentroid(focusedCountry);\n            transition.call(_this, p);\n            if (typeof(_.focused)==='function') {\n                _.focused.call(_this);\n            }\n        });\n        return countries;\n    }\n\n    return {\n        name: 'centerPlugin',\n        onInit() {\n            _.svgAddCountriesOld = this.$.svgAddCountries;\n            this.$.svgAddCountries = svgAddCountries;\n        },\n        go(id) {\n            const c = this.worldPlugin.countries();\n            const focusedCountry = country(c, id),\n                p = d3.geoCentroid(focusedCountry);\n            transition.call(this, p);\n        },\n        focused(fn) {\n            _.focused = fn;\n        }\n    }\n}\n","export default function() {\n    const _ = {proj: null};\n\n    return {\n        name: 'flattenPlugin',\n        onInit() {\n            const width = 700,\n                height = 500,\n                _this = this;\n\n            function animation() {\n                _this._.svg.transition()\n                    .duration(10500)\n                    .tween(\"projection\", function() {\n                        return function(_x) {\n                            animation.alpha(_x);\n                            _this._.refresh();\n                        };\n                    });\n            }\n\n            function interpolatedProjection(a, b) {\n                const px = d3.geoProjection(raw).scale(1);\n                let alpha;\n\n                function raw(lamda, pi) {\n                    const pa = a([lamda *= 180 / Math.PI, pi *= 180 / Math.PI]), pb = b([lamda, pi]);\n                    return [(1 - alpha) * pa[0] + alpha * pb[0], (alpha - 1) * pa[1] - alpha * pb[1]];\n                }\n\n                animation.alpha = function(_x) {\n                    if (!arguments.length)\n                        return alpha;\n                    const ta = a.translate(),\n                        tb = b.translate();\n                        alpha = + _x;\n                        tb[0] = ta[0];\n                        tb[1] = ta[1]/1.2;\n                    // console.log(px.rotate(), _x);\n                    px.translate([\n                        (1 - alpha) * ta[0] + alpha * tb[0],\n                        ((1 - alpha) * ta[1] + alpha * tb[1])\n                    ]);\n                    return px;\n                };\n                animation.alpha(0);\n                return px;\n            }\n\n            const g1 = this._.proj;\n            const g2 = d3.geoEquirectangular()\n                .scale(width/4)\n                .translate([width / 2, height / 2]);\n            _.proj = interpolatedProjection(g1, g2);\n            // _.proj.center([0,0]);\n            this._.animation = animation;\n            this._.px = _.proj;\n            this._.g1 = g1;\n            this._.g2 = g2;\n        },\n        toMap() {\n            // const r = this._.proj.rotate();\n            this._.path = d3.geoPath().projection(_.proj);\n            // this._.proj.rotate([r[0],0,0]);\n            // this._.proj.center([0,0]);\n            this.svgDraw();\n            this._.animation.call(this);\n        }\n    }\n}\n","export default urlBars => {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, barProjection: null, q: null, bars: null};\n\n    function svgAddBar() {\n        _.svg.selectAll('.bar').remove();\n        if (_.bars && this._.options.showBars) {\n            const gBar = _.svg.append(\"g\").attr(\"class\",\"bar\");\n            const mask = gBar.append(\"mask\")\n                .attr(\"id\", \"edge\");\n            mask.append(\"rect\")\n                .attr(\"x\", 0)\n                .attr(\"y\", 0)\n                .attr(\"width\", \"100%\")\n                .attr(\"height\", \"100%\")\n                .attr(\"fill\", \"white\");\n            mask.append(\"use\")\n                .attr(\"xlink:href\", \"#edgeCircle\")\n                .attr(\"fill\", \"black\");\n            this._.mask = mask;\n\n            _.max = d3.max(_.bars.features, d => parseInt(d.properties.mag))\n\n            const scale = this._.proj.scale();\n            _.lengthScale = d3.scaleLinear()\n                .domain([0, _.max])\n                .range([scale, scale+50])\n\n            this._.bar = gBar.selectAll(\"line\").data(_.bars.features).enter().append(\"line\")\n                .attr(\"stroke\", \"red\")\n                .attr(\"stroke-width\", \"2\")\n                .attr(\"data-index\", (d, i) => i);\n            // render to correct position\n            refresh.call(this);\n            return this._.bar;\n        }\n    }\n\n    function refresh() {\n        if (_.bars && this._.options.showBars) {\n            const proj1 = this._.proj;\n            const scale = _.lengthScale;\n            const proj2 = _.barProjection;\n            const center = proj1.invert(this._.center);\n            this._.bar\n                .each(function(d) {\n                    const arr = d.geometry.coordinates;\n                    proj2.scale(scale(d.properties.mag));\n                    const distance = d3.geoDistance(arr, center);\n                    const d1 = proj1(arr);\n                    const d2 = proj2(arr);\n                    d3.select(this)\n                        .attr('x1', d1[0])\n                        .attr('y1', d1[1])\n                        .attr('x2', d2[0])\n                        .attr('y2', d2[1])\n                        .attr('mask', distance < 1.57 ? null : 'url(#edge)');\n                });\n        }\n    }\n\n    function svgClipPath() {\n        // mask creation\n        this._.defs.selectAll('clipPath').remove();\n        this._.defs.append(\"clipPath\").append(\"circle\")\n            .attr(\"id\", \"edgeCircle\")\n            .attr(\"cx\", this._.options.width / 2)\n            .attr(\"cy\", this._.options.height / 2)\n            .attr(\"r\",  this._.proj.scale());\n    }\n\n    return {\n        name: 'barPlugin',\n        urls: urlBars && [urlBars],\n        onReady(err, bars) {\n            _.bars = bars;\n            setTimeout(() => refresh.call(this),1);\n        },\n        onInit() {\n            this.$.svgAddBar = svgAddBar;\n            this.$.svgClipPath = svgClipPath;\n            this._.options.showBars = true;\n            _.barProjection = this._.orthoGraphic();\n            _.svg = this._.svg;\n            svgClipPath.call(this);\n        },\n        onResize() {\n            svgClipPath.call(this);\n            svgAddBar.call(this);\n        },\n        onRefresh() {\n            _.barProjection.rotate(this._.proj.rotate());\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(data) {\n            if (data) {\n                _.bars = data;\n            } else {\n                return _.bars;\n            }\n        },\n    }\n}\n","export default function() {\n    const _ = {dataDots: null};\n\n    function svgAddDots() {\n        if (_.dataDots && this._.options.showDots && !this._.drag) {\n            this._.svg.selectAll('.dot').remove();\n            if (_.dataDots && this._.options.showDots) {\n                this._.dots = this._.svg.append(\"g\").attr(\"class\",\"dot\").selectAll('circle')\n                    .data(_.dataDots.features).enter().append('circle')\n                    .attr('r', 2)\n                    .attr('stroke', '#F00')\n                    .style('opacity', 0.75);\n                refresh.call(this);\n                return this._.dots;\n            }\n        }\n    }\n\n    function refresh() {\n        if (this._.drag==null) {\n            this._.dots.style(\"display\", 'none');\n        } else if (!this._.drag && this._.dots && this._.options.showDots) {\n            const proj = this._.proj;\n            const center = this._.proj.invert(this._.center);\n            this._.dots\n                .attr('cx', d => proj(d.geometry.coordinates)[0])\n                .attr('cy', d => proj(d.geometry.coordinates)[1])\n                .style(\"display\", function(d) {\n                    return d3.geoDistance(d.geometry.coordinates, center) > 1.57 ? 'none' : 'inline';\n                });\n        }\n    }\n\n    return {\n        name: 'dotsPlugin',\n        onInit() {\n            this.$.svgAddDots = svgAddDots;\n            this._.options.showDots = true;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        data(data) {\n            _.dataDots = data;\n        },\n    }\n}\n","export default function() {\n    const _ = {dataDots: null};\n\n    function canvasAddDots() {\n        if (_.dataDots && this._.options.showDots && !this._.drag) {\n            const proj = this._.proj;\n            const center = proj.invert(this._.center);\n            this.canvasPlugin.render(function(context) {\n                _.dataDots.features.forEach(function(d) {\n                    if (d3.geoDistance(d.geometry.coordinates, center) <= 1.57) {\n                        context.beginPath();\n                        context.fillStyle = '#F00';\n                        context.arc(\n                            proj(d.geometry.coordinates)[0],\n                            proj(d.geometry.coordinates)[1], 2,0,2*Math.PI);\n                        context.fill();\n                        context.closePath();\n                    }\n                });\n            }, _.drawTo);\n        }\n    }\n\n    return {\n        name: 'dotsCanvas',\n        onInit() {\n            this.$.canvasAddDots = canvasAddDots;\n            this._.options.showDots = true;\n        },\n        onRefresh() {\n            canvasAddDots.call(this);\n        },\n        data(data) {\n            _.dataDots = data;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        },\n    }\n}\n","export default function() {\n    const _ = {dataPings: null, pings: []};\n\n    return {\n        name: 'pingsCanvas',\n        onInit() {\n            this._.options.showPings = true;\n        },\n        onInterval() {\n            if (!this._.drag && this._.options.showPings) {\n                let center;\n                const proj = this._.proj;\n                if (_.pings.length <= 7) {\n                    center = this._.proj.invert(this._.center);\n                    const visible = _.dataPings.features.filter(function(d) {\n                        return d3.geoDistance(d.geometry.coordinates, center) <= 1.57\n                    })\n                    const d = visible[Math.floor(Math.random() * (visible.length-1))];\n                    _.pings.push({r: 2.5, l: d.geometry.coordinates});\n                }\n                const p = _.pings[0];\n                if (d3.geoDistance(p.l, this._.proj.invert(this._.center)) > 1.57) {\n                    _.pings.shift();\n                } else {\n                    if (!this._.options.spin) {\n                        this._.refresh(/anvas/);\n                    }\n                    this.canvasPlugin.render(function(context) {\n                        context.beginPath();\n                        context.fillStyle = '#F80';\n                        context.arc(\n                            proj(p.l)[0],\n                            proj(p.l)[1], p.r,0,2*Math.PI);\n                        context.fill();\n                        context.closePath();\n                        p.r = p.r + 0.2;\n                        if (p.r>5) {\n                            _.pings.shift();\n                        } else if (_.pings.length>1) {\n                            const d = _.pings.shift();\n                            _.pings.push(d);\n                        }\n                    }, _.drawTo);\n                }\n            }\n        },\n        data(data) {\n            _.dataPings = data;\n        },\n        drawTo(arr) {\n            _.drawTo = arr;\n        },\n    }\n}\n","export default function() {\n    /*eslint no-console: 0 */\n    const _ = {svg:null, dataPings: null, ping2: null};\n\n    function svgAddPings() {\n        _.svg.selectAll('.pings').remove();\n        if (_.dataPings && this._.options.showPings) {\n            const g = _.svg.append(\"g\").attr(\"class\",\"pings\");\n            _.ping2 = g.selectAll('.ping-2')\n                .data(_.dataPings.features).enter().append('circle')\n                .attr('class', 'ping-2')\n                .attr('id', (d,i) => `ping-${i}`);\n\n            this._.pings = g.selectAll('.ping-2');\n            refresh.call(this);\n            animate.call(this);\n            return this._.pings;\n        }\n    }\n\n    function animate() {\n        var nodes = _.ping2.nodes().filter(d => d.style.display=='inline');\n        if (nodes.length>0) {\n            d3.select(`#${nodes[Math.floor(Math.random() * (nodes.length-1))].id}`)\n                .attr('r', 2)\n                .attr('stroke', '#F00')\n                .attr('stroke-opacity', 1)\n                .attr('stroke-width', '10px')\n            .transition()\n            .duration(1000)\n                .attr('r', 30)\n                .attr('fill', 'none')\n                .attr('stroke-width', '0.1px')\n        }\n    }\n\n    function refresh() {\n        if (this._.drag==null) {\n            this._.pings.style(\"display\", 'none');\n        } else if (!this._.drag && this._.pings && this._.options.showPings) {\n            const proj = this._.proj;\n            const center = this._.proj.invert(this._.center);\n            this._.pings\n            .attr('cx', d => proj(d.geometry.coordinates)[0])\n            .attr('cy', d => proj(d.geometry.coordinates)[1])\n            .style(\"display\", function(d) {\n                return d3.geoDistance(d.geometry.coordinates, center) > 1.57 ? 'none' : 'inline';\n            });\n        }\n    }\n\n    return {\n        name: 'pingsPlugin',\n        onInit() {\n            this.$.svgAddPings = svgAddPings;\n            this._.options.showPings = true;\n            setInterval(()  => animate.call(this), 3000);\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        data(data) {\n            _.dataPings = data;\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","export default function() {\n    const _ = {sphereObject: null};\n\n    function addDebugSphere() {\n        if (!_.sphereObject) {\n            const SCALE = this._.proj.scale();\n            const sphere         = new THREE.SphereGeometry(SCALE, 100, 100);\n            const sphereMaterial = new THREE.MeshNormalMaterial({wireframe: false});\n            const sphereMesh     = new THREE.Mesh(sphere, sphereMaterial);\n\n            // For debug ...\n            const dot1 = new THREE.SphereGeometry(30, 10, 10);\n            const dot2 = new THREE.SphereGeometry(30, 10, 10);\n            const dot3 = new THREE.SphereGeometry(30, 10, 10);\n            dot1.translate(0, 0, SCALE);\n            dot2.translate(SCALE, 0, 0);\n            dot3.translate(0,-SCALE, 0);\n            const dot1Material = new THREE.MeshBasicMaterial({color: 'blue' });\n            const dot2Material = new THREE.MeshBasicMaterial({color: 'red'  });\n            const dot3Material = new THREE.MeshBasicMaterial({color: 'green'});\n            const dot1Mesh = new THREE.Mesh(dot1, dot1Material);\n            const dot2Mesh = new THREE.Mesh(dot2, dot2Material);\n            const dot3Mesh = new THREE.Mesh(dot3, dot3Material);\n\n            _.sphereObject = new THREE.Object3D();\n            _.sphereObject.add(sphereMesh, dot1Mesh, dot2Mesh, dot3Mesh);\n\n            rotate.call(this);\n            this.threejsPlugin.addObject(_.sphereObject);\n        }\n    }\n\n    function rotate() {\n        const rt = this._.proj.rotate();\n        rt[0] -= 90;\n        const q1 = this._.versor(rt);\n        const q2 = new THREE.Quaternion(-q1[2], q1[1], q1[3], q1[0]);\n        _.sphereObject.setRotationFromQuaternion(q2);\n    }\n\n    return {\n        name: 'debugThreejs',\n        onInit() {\n            this._.options.showDebugSpahre = true;\n            addDebugSphere.call(this);\n        },\n        onRefresh() {\n            if (_.sphereObject) {\n                rotate.call(this);\n            }\n        }\n    }\n}\n","export default (urlWorld) => {\n    const _ = {checker: []};\n    return {\n        name: 'commonPlugins',\n        onInit() {\n            const rg = this.register;\n            const pl = earthjs.plugins;\n            rg(pl.autorotatePlugin(10));\n            rg(pl.versorDragPlugin());\n            rg(pl.wheelZoomPlugin());\n            rg(pl.configPlugin());\n            rg(pl.oceanPlugin());\n            rg(pl.canvasPlugin());\n            rg(pl.graticuleCanvas());\n            rg(pl.worldCanvas(urlWorld));\n\n            this.canvasPlugin.selectAll('.canvas');\n            this.ready(() => this.svgDraw());\n\n            _.options = this.configPlugin.set();\n            _.buttonClick = str => {\n                const arr = str.split(':'),\n                    key = arr[2],\n                    resultx  = {},\n                    options  =_.options;\n                options[key] = !options[key];\n                resultx[key] =  options[key];\n                if (key=='hideCountries')\n                    resultx.hideLand = false;\n                this.configPlugin.set(resultx);\n            };\n\n            _.checker = [\n                'ocean:Ocean:showOcean',\n                'graticule:Graticule:showGraticule',\n                'hideLand:Land:showLand',\n                'spin:Spin:spin',\n            ].map(d => d.split(':'));\n            const opt = d3.select('.set-options');\n            opt.selectAll('button').data(_.checker).enter().append('button')\n                .text(d => d[1])\n                .on('click', d => _.buttonClick.call(this, d.join(':')));\n        },\n        addChecker(checker) {\n            _.checker.push(checker);\n            _.options = this.configPlugin.set();\n\n            const opt = d3.select('.set-options');\n            opt.selectAll('button').data(_.checker).enter().append('button')\n                .text(d => d[1])\n                .on('click', d => _.buttonClick.call(this, d.join(':')));\n        }\n    }\n}\n","import app from './src/earthjs';\nimport versorDragPlugin from './src/plugins/versorDragPlugin.js';\nimport wheelZoomPlugin from './src/plugins/wheelZoomPlugin.js';\nimport threejsPlugin from './src/plugins/threejsPlugin.js';\nimport canvasPlugin from './src/plugins/canvasPlugin.js';\nimport oceanPlugin from './src/plugins/oceanPlugin.js';\nimport configPlugin from './src/plugins/configPlugin.js';\nimport graticuleCanvas from './src/plugins/graticuleCanvas.js';\nimport graticulePlugin from './src/plugins/graticulePlugin.js';\nimport fauxGlobePlugin from './src/plugins/fauxGlobePlugin.js';\nimport autorotatePlugin from './src/plugins/autorotatePlugin.js';\nimport countryTooltipPlugin from './src/plugins/countryTooltipPlugin.js';\nimport barTooltipPlugin from './src/plugins/barTooltipPlugin.js';\nimport placesPlugin from './src/plugins/placesPlugin.js';\nimport worldCanvas from './src/plugins/worldCanvas.js';\nimport worldPlugin from './src/plugins/worldPlugin.js';\nimport worldThreejs from './src/plugins/worldThreejs.js';\nimport centerPlugin from './src/plugins/centerPlugin.js';\nimport flattenPlugin from './src/plugins/flattenPlugin.js';\nimport barPlugin from './src/plugins/barPlugin.js';\nimport dotsPlugin from './src/plugins/dotsPlugin.js';\nimport dotsCanvas from './src/plugins/dotsCanvas.js';\nimport pingsCanvas from './src/plugins/pingsCanvas.js';\nimport pingsPlugin from './src/plugins/pingsPlugin.js';\nimport debugThreejs from './src/plugins/debugThreejs.js';\nimport commonPlugins from './src/pluginLoader/commonPlugins';\napp.plugins= {\n    versorDragPlugin,\n    wheelZoomPlugin,\n    threejsPlugin,\n    canvasPlugin,\n    oceanPlugin,\n    configPlugin,\n    graticuleCanvas,\n    graticulePlugin,\n    fauxGlobePlugin,\n    autorotatePlugin,\n    countryTooltipPlugin,\n    barTooltipPlugin,\n    placesPlugin,\n    worldCanvas,\n    worldPlugin,\n    worldThreejs,\n    centerPlugin,\n    flattenPlugin,\n    barPlugin,\n    dotsPlugin,\n    dotsCanvas,\n    pingsCanvas,\n    pingsPlugin,\n    debugThreejs,\n    commonPlugins,\n};\nexport default app;\n"],"names":["acos","Math","asin","atan2","cos","max","min","PI","sin","sqrt","radians","degrees","versor","e","l","sl","cl","sp","p","cp","sg","g","cg","cartesian","rotation","q","delta","v0","v1","w","cross","dot","t","s","multiply","q0","q1","versorFn","earthjs","options","ticker","Object","assign","_","drag","svg","d3","selectAll","select","width","attr","height","ltScale","scaleLinear","domain","range","center","globe","fn","promeses","length","loadingData","queue","forEach","urls","ext","url","split","pop","defer","await","args","slice","call","arguments","err","shift","ln","obj","ar","unshift","onReady","apply","name","keys","indexOf","onInit","push","earths","svgDraw","twinEarth","$","renderOrder","renderer","defs","append","interval","ex","intervalRun","setInterval","scale","y","proj","resize","refresh","rotate","r","onIntervalKeys","onInterval","filter","onRefreshKeys","test","d","onRefresh","onResizeKeys","onResize","orthoGraphic","geoOrthographic","translate","precision","clipAngle","addRenderer","path","geoPath","projection","qEvent","qname","sync","dragSetup","_this","on","dragstarted","dragsended","dragged","src","r0","invert","mouse","r1","arr","event","deltaY","scene","camera","renderThree","render","THREE","Scene","yAxis","Vector3","OrthographicCamera","position","z","WebGLRenderer","antialias","domElement","id","setClearColor","setSize","body","appendChild","add","canvas","svgAddCanvas","showCanvas","fObject","fBody","style","each","getContext","clearRect","drawTo","rChange","idx","context","o","newR","svgAddOcean","remove","showOcean","ocean_fill","ocean","sz","newOpt","spin","undefined","autorotatePlugin","start","stop","datumGraticule","geoGraticule","canvasAddGraticule","showGraticule","canvasPlugin","beginPath","lineWidth","strokeStyle","line","stroke","svgAddGraticule","graticule","datum","svgAddDropShadow","showGlobeShadow","drop_shadow","dropShadow","svgAddGlobeShading","showGlobeShading","globe_shading","globeShading","svgAddGlobeHilight","showGlobeHilight","globe_highlight","globeHilight","Date","degPerSec","degree","now","lastTick","countryTooltip","originalsvgAddCountries","svgAddCountries","country","worldPlugin","countryName","text","pageX","pageY","barTooltip","originalsvgAddBar","svgAddBar","i","dataset","index","barPlugin","data","features","barTooltipPlugin","onShow","show","props","properties","title","map","k","join","html","urlPlaces","places","svgAddPlaces","showPlaces","placePoints","svgAddPlacePoints","enter","svgAddPlaceLabels","placeLabels","position_labels","centerPos","x","geometry","coordinates","loc","offset","geoDistance","placesPlugin","urlWorld","urlCountryNames","world","countryNames","canvasAddWorldOrCountries","showLand","showCountries","showLakes","canvasAddWorld","land","fillStyle","fill","canvasAddCountries","countries","canvasAddLakes","lakes","worldCanvas","topojson","feature","objects","ne_110m_lakes","countryClick","svgAddWorldOrCountries","svgAddWorld","svgAddLakes","cname","find","sphereObject","addWorld","group","Group","loader","TextureLoader","load","texture","SphereGeometry","material","MeshBasicMaterial","overdraw","Mesh","threejsPlugin","addObject","rt","q2","Quaternion","setRotationFromQuaternion","focused","svgAddCountriesOld","cnt","replace","transition","duration","tween","interpolate","c","focusedCountry","geoCentroid","animation","_x","alpha","interpolatedProjection","a","b","px","geoProjection","raw","lamda","pi","pa","pb","ta","tb","g1","g2","geoEquirectangular","barProjection","bars","showBars","gBar","mask","parseInt","mag","lengthScale","bar","proj1","proj2","distance","d1","d2","svgClipPath","urlBars","dataDots","svgAddDots","showDots","dots","canvasAddDots","arc","closePath","dataPings","pings","showPings","visible","floor","random","ping2","svgAddPings","animate","nodes","display","addDebugSphere","SCALE","sphere","sphereMaterial","MeshNormalMaterial","wireframe","sphereMesh","dot1","dot2","dot3","dot1Material","color","dot2Material","dot3Material","dot1Mesh","dot2Mesh","dot3Mesh","Object3D","showDebugSpahre","checker","rg","register","pl","plugins","versorDragPlugin","wheelZoomPlugin","configPlugin","oceanPlugin","graticuleCanvas","ready","set","buttonClick","str","key","resultx","hideLand","opt","app"],"mappings":";;;AAAA;AACA,eAAe,YAAW;MAClBA,OAAOC,KAAKD,IAAhB;MACIE,OAAOD,KAAKC,IADhB;MAEIC,QAAQF,KAAKE,KAFjB;MAGIC,MAAMH,KAAKG,GAHf;MAIIC,MAAMJ,KAAKI,GAJf;MAKIC,MAAML,KAAKK,GALf;MAMIC,KAAKN,KAAKM,EANd;MAOIC,MAAMP,KAAKO,GAPf;MAQIC,OAAOR,KAAKQ,IARhB;MASIC,UAAUH,KAAK,GATnB;MAUII,UAAU,MAAMJ,EAVpB;;;WAaSK,MAAT,CAAgBC,CAAhB,EAAmB;QACbC,IAAID,EAAE,CAAF,IAAO,CAAP,GAAWH,OAAnB;QAA4BK,KAAKP,IAAIM,CAAJ,CAAjC;QAAyCE,KAAKZ,IAAIU,CAAJ,CAA9C;;QACQD,EAAE,CAAF,IAAO,CAAP,GAAWH,OADnB;QAC4BO,KAAKT,IAAIU,CAAJ,CADjC;QACyCC,KAAKf,IAAIc,CAAJ,CAD9C;;QAEQL,EAAE,CAAF,IAAO,CAAP,GAAWH,OAFnB;QAE4BU,KAAKZ,IAAIa,CAAJ,CAFjC;QAEyCC,KAAKlB,IAAIiB,CAAJ,CAF9C,CADiB;WAIV,CACLL,KAAKG,EAAL,GAAUG,EAAV,GAAeP,KAAKE,EAAL,GAAUG,EADpB,EAELL,KAAKI,EAAL,GAAUG,EAAV,GAAeN,KAAKC,EAAL,GAAUG,EAFpB,EAGLJ,KAAKC,EAAL,GAAUK,EAAV,GAAeP,KAAKI,EAAL,GAAUC,EAHpB,EAILJ,KAAKG,EAAL,GAAUC,EAAV,GAAeL,KAAKE,EAAL,GAAUK,EAJpB,CAAP;;;;SASKC,SAAP,GAAmB,UAASV,CAAT,EAAY;QACzBC,IAAID,EAAE,CAAF,IAAOH,OAAf;QAAwBQ,IAAIL,EAAE,CAAF,IAAOH,OAAnC;QAA4CS,KAAKf,IAAIc,CAAJ,CAAjD;WACO,CAACC,KAAKf,IAAIU,CAAJ,CAAN,EAAcK,KAAKX,IAAIM,CAAJ,CAAnB,EAA2BN,IAAIU,CAAJ,CAA3B,CAAP;GAFF;;;SAMOM,QAAP,GAAkB,UAASC,CAAT,EAAY;WACrB,CACLtB,MAAM,KAAKsB,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAN,EAAuC,IAAI,KAAKA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAA3C,IAA8Ed,OADzE,EAELT,KAAKG,IAAI,CAAC,CAAL,EAAQC,IAAI,CAAJ,EAAO,KAAKmB,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAP,CAAR,CAAL,IAAyDd,OAFpD,EAGLR,MAAM,KAAKsB,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAAN,EAAuC,IAAI,KAAKA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,IAAOA,EAAE,CAAF,CAA1B,CAA3C,IAA8Ed,OAHzE,CAAP;GADF;;;SASOe,KAAP,GAAe,UAASC,EAAT,EAAaC,EAAb,EAAiB;QAC1BC,IAAIC,MAAMH,EAAN,EAAUC,EAAV,CAAR;QAAuBd,IAAIL,KAAKsB,IAAIF,CAAJ,EAAOA,CAAP,CAAL,CAA3B;QACI,CAACf,CAAL,EAAQ,OAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAP;QACJkB,IAAIhC,KAAKK,IAAI,CAAC,CAAL,EAAQC,IAAI,CAAJ,EAAOyB,IAAIJ,EAAJ,EAAQC,EAAR,CAAP,CAAR,CAAL,IAAqC,CAA7C;QAAgDK,IAAIzB,IAAIwB,CAAJ,CAApD,CAH8B;WAIvB,CAAC5B,IAAI4B,CAAJ,CAAD,EAASH,EAAE,CAAF,IAAOf,CAAP,GAAWmB,CAApB,EAAuB,CAACJ,EAAE,CAAF,CAAD,GAAQf,CAAR,GAAYmB,CAAnC,EAAsCJ,EAAE,CAAF,IAAOf,CAAP,GAAWmB,CAAjD,CAAP;GAJF;;;SAQOC,QAAP,GAAkB,UAASC,EAAT,EAAaC,EAAb,EAAiB;WAC1B,CACLD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxB,GAAgCD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxC,GAAgDD,GAAG,CAAH,IAAQC,GAAG,CAAH,CADnD,EAELD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxB,GAAgCD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxC,GAAgDD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAFnD,EAGLD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxB,GAAgCD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxC,GAAgDD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAHnD,EAILD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxB,GAAgCD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxC,GAAgDD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAJnD,CAAP;GADF;;WASSN,KAAT,CAAeH,EAAf,EAAmBC,EAAnB,EAAuB;WACd,CACLD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CADnB,EAELD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAFnB,EAGLD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAHnB,CAAP;;;WAOOG,GAAT,CAAaJ,EAAb,EAAiBC,EAAjB,EAAqB;WACZD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAR,GAAgBD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAAxB,GAAgCD,GAAG,CAAH,IAAQC,GAAG,CAAH,CAA/C;;;SAGKhB,MAAP;;;ACtEJ,IAAMA,SAASyB,UAAf;AACA,IAAMC,YAAU,SAAVA,OAAU,GAAgB;QAAfC,OAAe,uEAAP,EAAO;;;kBAEdD,QAAQE,MAAtB;cACUC,OAAOC,MAAP,CAAc;gBACZ,QADY;gBAEZ;KAFF,EAGPH,OAHO,CAAV;QAIMI,IAAI;kBACI,EADJ;sBAEQ,EAFR;;mBAIK,EAJL;uBAKS,EALT;;oBAOM,EAPN;wBAQU,EARV;;qBAUO,CACT,aADS,EAET,kBAFS,EAGT,cAHS,EAIT,oBAJS,EAKT,2BALS,EAMT,eANS,EAOT,aAPS,EAQT,oBARS,EAST,iBATS,EAUT,wBAVS,EAWT,oBAXS,EAYT,cAZS,EAaT,aAbS,EAcT,YAdS,EAeT,WAfS,CAVP;eA2BC,IA3BD;qBA4BO,IA5BP;kBA6BI;KA7Bd;QA+BMC,OAAO,KAAb;QACMC,MAAMC,GAAGC,SAAH,CAAaR,QAAQS,MAArB,CAAZ;QACIC,QAAQJ,IAAIK,IAAJ,CAAS,OAAT,CAAZ;QAA+BC,SAASN,IAAIK,IAAJ,CAAS,QAAT,CAAxC;QACME,UAAUN,GAAGO,WAAH,GAAiBC,MAAjB,CAAwB,CAAC,CAAD,EAAIL,KAAJ,CAAxB,EAAoCM,KAApC,CAA0C,CAAC,CAAC,GAAF,EAAO,GAAP,CAA1C,CAAhB;QACI,CAACN,KAAD,IAAU,CAACE,MAAf,EAAuB;gBACXZ,QAAQU,KAAR,IAAiB,GAAzB;iBACSV,QAAQY,MAAR,IAAkB,GAA3B;YACID,IAAJ,CAAS,OAAT,EAAkBD,KAAlB,EAAyBC,IAAzB,CAA8B,QAA9B,EAAwCC,MAAxC;;YAEIF,KAAR,GAAgBA,KAAhB;YACQE,MAAR,GAAiBA,MAAjB;QACMK,SAAS,CAACP,QAAM,CAAP,EAAUE,SAAO,CAAjB,CAAf;QACMM,QAAQ;WACP;oBAAA;sBAAA;0BAAA;0BAAA;4BAAA;;SADO;WASP,EATO;aAAA,iBAUJC,EAVI,EAUA;gBACFA,EAAJ,EAAQ;oBACAf,EAAEgB,QAAF,CAAWC,MAAX,GAAkB,CAAtB,EAAyB;sBACnBC,WAAF,GAAgB,IAAhB;wBACMpC,IAAIqB,GAAGgB,KAAH,EAAV;sBACEH,QAAF,CAAWI,OAAX,CAAmB,eAAO;4BAClBC,IAAJ,CAASD,OAAT,CAAiB,eAAO;gCAChBE,MAAMC,IAAIC,KAAJ,CAAU,GAAV,EAAeC,GAAf,EAAV;gCACIH,QAAM,SAAV,EAAqB;sCACX,MAAN;;8BAEFI,KAAF,CAAQvB,GAAGmB,GAAH,CAAR,EAAiBC,GAAjB;yBALJ;qBADJ;sBASEI,KAAF,CAAQ,YAAW;4BACXC,OAAO,GAAGC,KAAH,CAASC,IAAT,CAAcC,SAAd,CAAX;4BACMC,MAAMJ,KAAKK,KAAL,EAAZ;0BACEjB,QAAF,CAAWI,OAAX,CAAmB,eAAO;gCAChBc,KAAKC,IAAId,IAAJ,CAASJ,MAApB;gCACMmB,KAAKR,KAAKC,KAAL,CAAW,CAAX,EAAaK,EAAb,CAAX;+BACGG,OAAH,CAAWL,GAAX;;gCAEIM,OAAJ,CAAYC,KAAZ,CAAkBzB,KAAlB,EAAyBsB,EAAzB;mCACOR,KAAKC,KAAL,CAAWK,EAAX,CAAP;yBANJ;0BAQEhB,WAAF,GAAgB,KAAhB;2BACGY,IAAH,CAAQhB,KAAR;qBAZJ;;aAbR,MA4BO;uBACId,EAAEkB,WAAT;;SAxCE;gBAAA,oBA2CDiB,GA3CC,EA2CI;gBACJC,KAAK,EAAX;kBACMD,IAAIK,IAAV,IAAkBJ,EAAlB;mBACOK,IAAP,CAAYN,GAAZ,EAAiBf,OAAjB,CAAyB,UAASL,EAAT,EAAa;oBAC9B,CACA,MADA,EAEA,SAFA,EAGA,QAHA,EAIA,UAJA,EAKA,WALA,EAMA,YANA,EAMc2B,OANd,CAMsB3B,EANtB,MAM4B,CAAC,CANjC,EAMoC;wBAC5B,OAAOoB,IAAIpB,EAAJ,CAAP,KAAkB,UAAtB,EAAkC;2BAC3BA,EAAH,IAAS,YAAW;mCACToB,IAAIpB,EAAJ,EAAQwB,KAAR,CAAczB,KAAd,EAAqBiB,SAArB,CAAP;yBADJ;;;aATZ;gBAeII,IAAIQ,MAAR,EAAgB;oBACRA,MAAJ,CAAWb,IAAX,CAAgBhB,KAAhB;;mBAEGqB,GAAP,EAAW,UAAX;mBACOA,GAAP,EAAW,WAAX;mBACOA,GAAP,EAAW,YAAX;gBACIA,IAAId,IAAJ,IAAYc,IAAIG,OAApB,EAA6B;kBACvBtB,QAAF,CAAW4B,IAAX,CAAgB;0BACNT,IAAId,IADE;6BAEHc,IAAIG;iBAFjB;;mBAKGxB,KAAP;;KAzER;;;QA8EI+B,SAAS,EAAb;QACIhD,SAAS,IAAb;;UAEMiD,OAAN,GAAgB,UAASC,SAAT,EAAoB;YAC1BC,IAAIlC,MAAMkC,CAAhB;iBACSD,aAAa,EAAtB;UACEE,WAAF,CAAc7B,OAAd,CAAsB,UAAS8B,QAAT,EAAmB;cACnCA,QAAF,KAAeF,EAAEE,QAAF,EAAYpB,IAAZ,CAAiBhB,KAAjB,CAAf;SADJ;eAGOM,OAAP,CAAe,UAAS7C,CAAT,EAAY;cACrBuE,OAAF,CAAU,IAAV;SADJ;YAGIjD,WAAS,IAAT,IAAiBgD,WAAS,EAA9B,EAAkC;kBACxB7C,CAAN,CAAQH,MAAR,CAAeiC,IAAf,CAAoBhB,KAApB;;eAEGA,KAAP;KAZJ;;UAeMd,CAAN,CAAQmD,IAAR,GAAerC,MAAMd,CAAN,CAAQE,GAAR,CAAYkD,MAAZ,CAAmB,MAAnB,CAAf;UACMpD,CAAN,CAAQH,MAAR,GAAiB,UAASwD,QAAT,EAAmB;YAC1BC,KAAKxC,MAAMd,CAAN,CAAQuD,WAAnB;mBACWF,YAAY,EAAvB;iBACSG,YAAY,YAAM;eACpB1B,IAAH,CAAQhB,KAAR;mBACOM,OAAP,CAAe,UAAS7C,CAAT,EAAY;kBACrByB,CAAF,CAAIuD,WAAJ,CAAgBzB,IAAhB,CAAqBvD,CAArB;aADJ;SAFK,EAKN8E,QALM,CAAT;gBAMQxD,MAAR,GAAiBA,MAAjB;eACOiB,KAAP;KAVJ;;;;UAeMd,CAAN,CAAQyD,KAAR,GAAgB,UAASC,CAAT,EAAY;cAClB1D,CAAN,CAAQ2D,IAAR,CAAaF,KAAb,CAAmBC,CAAnB;cACM1D,CAAN,CAAQ4D,MAAR,CAAe9B,IAAf,CAAoBhB,KAApB;cACMd,CAAN,CAAQ6D,OAAR,CAAgB/B,IAAhB,CAAqBhB,KAArB;eACOA,KAAP;KAJJ;;UAOMd,CAAN,CAAQ8D,MAAR,GAAiB,UAASC,CAAT,EAAY;cACnB/D,CAAN,CAAQ2D,IAAR,CAAaG,MAAb,CAAoBC,CAApB;cACM/D,CAAN,CAAQ6D,OAAR,CAAgB/B,IAAhB,CAAqBhB,KAArB;eACOA,KAAP;KAHJ;;UAMMd,CAAN,CAAQuD,WAAR,GAAsB,YAAW;UAC3BS,cAAF,CAAiB5C,OAAjB,CAAyB,UAASL,EAAT,EAAa;cAChCkD,UAAF,CAAalD,EAAb,EAAiBe,IAAjB,CAAsBhB,KAAtB;SADJ;eAGOA,KAAP;KAJJ;;UAOMd,CAAN,CAAQ6D,OAAR,GAAkB,UAASK,MAAT,EAAiB;YACzBzB,OAAOyB,SAASlE,EAAEmE,aAAF,CAAgBD,MAAhB,CAAuB;mBAAKA,OAAOE,IAAP,CAAYC,CAAZ,CAAL;SAAvB,CAAT,GAAuDrE,EAAEmE,aAAtE;aACK/C,OAAL,CAAa,UAASL,EAAT,EAAa;cACpBuD,SAAF,CAAYvD,EAAZ,EAAgBe,IAAhB,CAAqBhB,KAArB;SADJ;eAGOA,KAAP;KALJ;;UAQMd,CAAN,CAAQ4D,MAAR,GAAiB,YAAW;UACtBW,YAAF,CAAenD,OAAf,CAAuB,UAASL,EAAT,EAAa;cAC9ByD,QAAF,CAAWzD,EAAX,EAAee,IAAf,CAAoBhB,KAApB;SADJ;eAGOA,KAAP;KAJJ;;UAOMd,CAAN,CAAQyE,YAAR,GAAuB,YAAW;YACxBnE,QAAQQ,MAAMd,CAAN,CAAQJ,OAAR,CAAgBU,KAA9B;YACME,SAASM,MAAMd,CAAN,CAAQJ,OAAR,CAAgBY,MAA/B;YACMsD,SAAShD,MAAMd,CAAN,CAAQJ,OAAR,CAAgBkE,MAA/B;eACO3D,GAAGuE,eAAH,GACFjB,KADE,CACInD,QAAQ,GADZ,EAEFwD,MAFE,CAEK,CAACA,MAAD,EAAS,CAAT,CAFL,EAGFa,SAHE,CAGQ,CAACrE,QAAQ,CAAT,EAAYE,SAAS,CAArB,CAHR,EAIFoE,SAJE,CAIQ,GAJR,EAKFC,SALE,CAKQ,EALR,CAAP;KAJJ;;UAYM7E,CAAN,CAAQ8E,WAAR,GAAsB,UAAStC,IAAT,EAAe;YAC7BxC,EAAEiD,WAAF,CAAcP,OAAd,CAAsBF,IAAtB,IAA4B,CAAhC,EAAmC;cAC7BS,WAAF,CAAcL,IAAd,CAAmBJ,IAAnB;;KAFR;;UAMMxC,CAAN,CAAQ2D,IAAR,GAAe7C,MAAMd,CAAN,CAAQyE,YAAR,EAAf;UACMzE,CAAN,CAAQ+E,IAAR,GAAe5E,GAAG6E,OAAH,GAAaC,UAAb,CAAwBnE,MAAMd,CAAN,CAAQ2D,IAAhC,CAAf;WACO7C,KAAP;;aAESoE,MAAT,CAAgB/C,GAAhB,EAAqBgD,KAArB,EAA4B;YACpBhD,IAAIgD,KAAJ,CAAJ,EAAgB;cACVA,KAAF,EAAShD,IAAIK,IAAb,IAAqBL,IAAIgD,KAAJ,CAArB;cACEA,QAAM,MAAR,IAAkBrF,OAAO2C,IAAP,CAAYzC,EAAEmF,KAAF,CAAZ,CAAlB;;;CA9NZ,CAkOA;;ACrOA;AACA,uBAAe,YAAW;QAChBnF,IAAI,EAACE,KAAI,IAAL,EAAWpB,GAAG,IAAd,EAAoBsG,MAAM,EAA1B,EAAV;;aAESC,SAAT,GAAqB;YACXC,QAAQ,IAAd;YACArH,SAAS,KAAK+B,CAAL,CAAO/B,MADhB;UAEEiC,GAAF,CAAM4B,IAAN,CAAW3B,GAAGF,IAAH,GACNsF,EADM,CACH,OADG,EACMC,WADN,EAEND,EAFM,CAEH,KAFG,EAEME,UAFN,EAGNF,EAHM,CAGH,MAHG,EAGMG,OAHN,CAAX;;YAKI1G,WAAJ;;mBAAA;;mBAAA,CARiB;;iBAYR8E,MAAT,CAAgB6B,GAAhB,EAAqB;gBACX5B,IAAI4B,IAAI3F,CAAJ,CAAM2D,IAAN,CAAWG,MAAX,EAAV;gBACMO,IAAIN,EAAE,CAAF,IAAO6B,GAAG,CAAH,CAAjB;cACE,CAAF,IAAOvB,IAAI,KAAKrE,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,GAAqB,CAArB,CAAX;gBACIC,EAAE,CAAF,KAAQ,GAAZ,EACIA,EAAE,CAAF,KAAQ,GAAR;iBACC/D,CAAL,CAAO8D,MAAP,CAAcC,CAAd;;;iBAGKyB,WAAT,GAAuB;iBACdvH,OAAOW,SAAP,CAAiB0G,MAAMtF,CAAN,CAAQ2D,IAAR,CAAakC,MAAb,CAAoB1F,GAAG2F,KAAH,CAAS,IAAT,CAApB,CAAjB,CAAL;iBACKR,MAAMtF,CAAN,CAAQ2D,IAAR,CAAaG,MAAb,EAAL;iBACK7F,OAAO2H,EAAP,CAAL;kBACM5F,CAAN,CAAQC,IAAR,GAAe,IAAf;kBACMD,CAAN,CAAQ6D,OAAR;;;iBAGK6B,OAAT,GAAmB;gBACTzG,KAAKhB,OAAOW,SAAP,CAAiB0G,MAAMtF,CAAN,CAAQ2D,IAAR,CAAaG,MAAb,CAAoB8B,EAApB,EAAwBC,MAAxB,CAA+B1F,GAAG2F,KAAH,CAAS,IAAT,CAA/B,CAAjB,CAAX;gBACIrG,KAAKxB,OAAOsB,QAAP,CAAgBC,EAAhB,EAAoBvB,OAAOc,KAAP,CAAaC,EAAb,EAAiBC,EAAjB,CAApB,CADT;gBAEI8G,KAAK9H,OAAOY,QAAP,CAAgBY,EAAhB,CAFT;kBAGMO,CAAN,CAAQ8D,MAAR,CAAeiC,EAAf;kBACM/F,CAAN,CAAQC,IAAR,GAAe,IAAf;;;iBAGKwF,UAAT,GAAsB;cAChBL,IAAF,CAAOhE,OAAP,CAAe,UAAS7C,CAAT,EAAY;uBAChBuD,IAAP,CAAYvD,CAAZ,EAAe+G,KAAf;aADJ;kBAGMtF,CAAN,CAAQC,IAAR,GAAe,KAAf;kBACMD,CAAN,CAAQ6D,OAAR;;;;WAID;cACG,kBADH;cAAA,oBAEM;cACH3D,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;sBACU4B,IAAV,CAAe,IAAf;SAJD;iBAAA,qBAMOhD,CANP,EAMU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;0BACUgD,IAAV,CAAe,IAAf;;mBAEG9B,EAAEE,GAAT;SAZD;YAAA,gBAcE8F,GAdF,EAcO;cACJZ,IAAF,GAASY,GAAT;;KAfR;;;AClDJ,sBAAe,YAAW;WACf;cACG,iBADH;cAAA,oBAEM;gBACCV,QAAQ,IAAd;iBACKtF,CAAL,CAAOE,GAAP,CAAWqF,EAAX,CAAc,OAAd,EAAuB,YAAW;oBACxB7B,IAAIvD,GAAG8F,KAAH,CAASC,MAAT,GAAgBZ,MAAMtF,CAAN,CAAQ2D,IAAR,CAAaF,KAAb,EAA1B;oBACIC,IAAE,GAAF,IAASA,IAAE,IAAf,EAAqB;0BACX1D,CAAN,CAAQyD,KAAR,CAAcC,CAAd;;aAHR;;KAJR;;;ACDJ;;AAEA,oBAAe,YAAW;QAChB1D,IAAI,EAACkD,UAAU,IAAX,EAAiBiD,OAAO,IAAxB,EAA8BC,QAAQ,IAAtC,EAA4C3C,OAAO,IAAnD,EAAV;;aAES4C,WAAT,GAAuB;mBACR,YAAW;cAChBnD,QAAF,CAAWoD,MAAX,CAAkBtG,EAAEmG,KAApB,EAA2BnG,EAAEoG,MAA7B;SADJ,EAEE,CAFF;;;WAKG;cACG,eADH;cAAA,oBAEM;gBAED9F,QAAQ,KAAKN,CAAL,CAAOJ,OAAP,CAAeU,KAD3B;gBAEIE,SAAQ,KAAKR,CAAL,CAAOJ,OAAP,CAAeY,MAF3B;cAGE2F,KAAF,GAAW,IAAII,MAAMC,KAAV,EAAX;cACEC,KAAF,GAAW,IAAIF,MAAMG,OAAV,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,CAAtB,CAAX;cACEN,MAAF,GAAW,IAAIG,MAAMI,kBAAV,CAA6B,CAACrG,KAAD,GAAS,CAAtC,EAAyCA,QAAQ,CAAjD,EAAoDE,SAAS,CAA7D,EAAgE,CAACA,MAAD,GAAU,CAA1E,EAA6E,GAA7E,EAAkF,KAAlF,CAAX;cACE4F,MAAF,CAASQ,QAAT,CAAkBC,CAAlB,GAAsB,GAAtB,CAPK;iBAQA7G,CAAL,CAAOoG,MAAP,GAAgBpG,EAAEoG,MAAlB;;;cAGElD,QAAF,GAAa,IAAIqD,MAAMO,aAAV,CAAwB,EAACC,WAAW,IAAZ,EAAxB,CAAb;cACE7D,QAAF,CAAW8D,UAAX,CAAsBC,EAAtB,GAA2B,UAA3B;cACE/D,QAAF,CAAWgE,aAAX,CAAyB,OAAzB,EAAkC,CAAlC;cACEhE,QAAF,CAAWiE,OAAX,CAAmB7G,KAAnB,EAA0BE,MAA1B;qBACS4G,IAAT,CAAcC,WAAd,CAA0BrH,EAAEkD,QAAF,CAAW8D,UAArC;;iBAEKX,WAAL,GAAmBA,WAAnB,CAjBK;SAFN;iBAAA,uBAqBS;wBACIvE,IAAZ,CAAiB,IAAjB;SAtBD;iBAAA,qBAwBOK,GAxBP,EAwBY;cACTgE,KAAF,CAAQmB,GAAR,CAAYnF,GAAZ;;KAzBR;;;ACXJ;AACA,oBAAe,YAAM;;QAEXnC,IAAI,EAACuH,QAAQ,IAAT,EAAexC,MAAM,IAArB,EAA2BjG,GAAG,IAA9B,EAAV;;aAES0I,YAAT,GAAwB;YAChB,KAAKxH,CAAL,CAAOJ,OAAP,CAAe6H,UAAnB,EAA+B;gBACvB,CAACzH,EAAEuH,MAAP,EAAe;oBACLG,UAAU,KAAK1H,CAAL,CAAOE,GAAP,CAAWkD,MAAX,CAAkB,GAAlB,EAAuB7C,IAAvB,CAA4B,OAA5B,EAAoC,QAApC,EAA8C6C,MAA9C,CAAqD,eAArD,EACf7C,IADe,CACV,GADU,EACL,CADK,EAEfA,IAFe,CAEV,GAFU,EAEL,CAFK,EAGfA,IAHe,CAGV,OAHU,EAGD,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAHd,EAIfC,IAJe,CAIV,QAJU,EAIA,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAJf,CAAhB;oBAKMmH,QAAQD,QAAQtE,MAAR,CAAe,YAAf,EACbwE,KADa,CACP,QADO,EACG,KADH,EAEbA,KAFa,CAEP,SAFO,EAEI,KAFJ,EAGbA,KAHa,CAGP,kBAHO,EAGa,MAHb,EAIbA,KAJa,CAIP,OAJO,EAIE,KAAK5H,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAuB,IAJzB,EAKbsH,KALa,CAKP,QALO,EAKG,KAAK5H,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAwB,IAL3B,CAAd;kBAME+G,MAAF,GAAWI,MAAMvE,MAAN,CAAa,QAAb,CAAX;;cAEFmE,MAAF,CACChH,IADD,CACM,GADN,EACW,CADX,EAECA,IAFD,CAEM,GAFN,EAEW,CAFX,EAGCA,IAHD,CAGM,OAHN,EAGe,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAH9B,EAICC,IAJD,CAIM,QAJN,EAIgB,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAJ/B;mBAKOR,EAAEuH,MAAT;;;;WAID;cACG,cADH;cAAA,oBAEM;iBACAvH,CAAL,CAAOJ,OAAP,CAAe6H,UAAf,GAA4B,IAA5B;iBACKzE,CAAL,CAAOwE,YAAP,GAAsBA,YAAtB;cACEzC,IAAF,GAAS5E,GAAG6E,OAAH,GAAaC,UAAb,CAAwB,KAAKjF,CAAL,CAAO2D,IAA/B,CAAT;SALD;iBAAA,uBAOS;gBACFrD,QAAQ,KAAKN,CAAL,CAAOJ,OAAP,CAAeU,KAA7B;gBACME,SAAQ,KAAKR,CAAL,CAAOJ,OAAP,CAAeY,MAD7B;cAEE+G,MAAF,CAASM,IAAT,CAAc,YAAW;qBAChBC,UAAL,CAAgB,IAAhB,EAAsBC,SAAtB,CAAgC,CAAhC,EAAmC,CAAnC,EAAsCzH,KAAtC,EAA6CE,MAA7C;aADJ;SAVD;iBAAA,qBAcO1B,CAdP,EAcU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEyI,MAAF,GAAWpH,GAAGC,SAAH,CAAatB,CAAb,CAAX;;mBAEGkB,EAAEuH,MAAT;SAnBD;cAAA,kBAqBIxG,EArBJ,EAqBQiH,MArBR,EAqBgBpI,OArBhB,EAqByB;gBACpB,KAAKI,CAAL,CAAOJ,OAAP,CAAe6H,UAAnB,EAA+B;oBACvBQ,UAAU,KAAd;oBACM3C,QAAQ,IAAd;oBACMvB,IAAI,KAAK/D,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,EAAV;kBACEyD,MAAF,CAASM,IAAT,CAAc,UAAS1F,GAAT,EAAc+F,GAAd,EAAmB;wBACvBC,UAAU,KAAKL,UAAL,CAAgB,IAAhB,CAAhB;wBACI,CAACE,MAAD,IAAWA,OAAOtF,OAAP,CAAewF,GAAf,IAAoB,CAAC,CAApC,EAAuC;4BAC7BE,IAAIxI,WAAWA,QAAQsI,GAAR,CAArB;4BACIE,KAAKA,EAAEtE,MAAX,EAAmB;gCACTuE,OAAO,CAACtE,EAAE,CAAF,IAAKqE,EAAEtE,MAAR,EAAgBC,EAAE,CAAF,CAAhB,EAAsBA,EAAE,CAAF,CAAtB,CAAb;kCACM/D,CAAN,CAAQ2D,IAAR,CAAaG,MAAb,CAAoBuE,IAApB;sCACU,IAAV;;2BAEDvG,IAAH,CAAQwD,KAAR,EAAe6C,OAAf,EAAwBnI,EAAE+E,IAAF,CAAOoD,OAAP,CAAeA,OAAf,CAAxB;4BACIF,OAAJ,EAAa;sCACC,KAAV;kCACMjI,CAAN,CAAQ2D,IAAR,CAAaG,MAAb,CAAoBC,CAApB;;;iBAZZ;;;KA1BZ;CA7BJ;;ACDA,kBAAe,YAAW;QAChB/D,IAAI,EAACE,KAAI,IAAL,EAAWpB,GAAG,IAAd,EAAoB2E,OAAO,CAA3B,EAAV;;aAES6E,WAAT,GAAuB;UACjBpI,GAAF,CAAME,SAAN,CAAgB,eAAhB,EAAiCmI,MAAjC;YACI,KAAKvI,CAAL,CAAOJ,OAAP,CAAe4I,SAAnB,EAA8B;gBACpBC,aAAa,KAAKzI,CAAL,CAAOmD,IAAP,CAAYC,MAAZ,CAAmB,gBAAnB,EACd7C,IADc,CACT,IADS,EACH,OADG,EAEdA,IAFc,CAET,IAFS,EAEH,KAFG,EAGdA,IAHc,CAGT,IAHS,EAGH,KAHG,CAAnB;uBAIW6C,MAAX,CAAkB,MAAlB,EACK7C,IADL,CACU,QADV,EACoB,IADpB,EAEKA,IAFL,CAEU,YAFV,EAEwB,MAFxB;uBAGW6C,MAAX,CAAkB,MAAlB,EACK7C,IADL,CACU,QADV,EACoB,MADpB,EAEKA,IAFL,CAEU,YAFV,EAEwB,MAFxB;iBAGKP,CAAL,CAAO0I,KAAP,GAAe1I,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,OAA/B,EAAwC6C,MAAxC,CAA+C,QAA/C,EACV7C,IADU,CACL,IADK,EACA,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAuB,CADvB,EAC0BC,IAD1B,CAC+B,IAD/B,EACqC,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAwB,CAD7D,EAEVD,IAFU,CAEL,OAFK,EAEI,UAFJ,CAAf;mBAGOuB,IAAP,CAAY,IAAZ;mBACO,KAAK9B,CAAL,CAAO0I,KAAd;;;;aAIC9E,MAAT,GAAkB;YACV,KAAK5D,CAAL,CAAO0I,KAAP,IAAgB,KAAK1I,CAAL,CAAOJ,OAAP,CAAe4I,SAAnC,EAA8C;iBACrCxI,CAAL,CAAO0I,KAAP,CAAanI,IAAb,CAAkB,GAAlB,EAAuB,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,KAAoBzD,EAAEyD,KAA7C;;;;WAID;cACG,aADH;cAAA,oBAEM;iBACAT,CAAL,CAAOsF,WAAP,GAAqBA,WAArB;iBACKtI,CAAL,CAAOJ,OAAP,CAAe4I,SAAf,GAA2B,IAA3B;cACEtI,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;SALD;gBAAA,sBAOQ;mBACA4B,IAAP,CAAY,IAAZ;SARD;iBAAA,qBAUOhD,CAVP,EAUU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;SAfD;aAAA,iBAiBGyI,EAjBH,EAiBO;gBACFA,EAAJ,EAAQ;kBACFlF,KAAF,GAAUkF,EAAV;uBACO7G,IAAP,CAAY,IAAZ;aAFJ,MAGO;uBACI9B,EAAEyD,KAAT;;;KAtBZ;;;AC9BJ,mBAAe,YAAW;WACf;cACG,cADH;WAAA,eAECmF,MAFD,EAES;gBACJA,MAAJ,EAAY;uBACD7I,MAAP,CAAc,KAAKC,CAAL,CAAOJ,OAArB,EAA8BgJ,MAA9B;oBACIA,OAAOC,IAAP,KAAcC,SAAlB,EAA6B;wBACnBvK,IAAI,KAAKwK,gBAAf;2BACOF,IAAP,GAActK,EAAEyK,KAAF,EAAd,GAA0BzK,EAAE0K,IAAF,EAA1B;;qBAECnG,OAAL;;mBAEGhD,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKC,CAAL,CAAOJ,OAAzB,CAAP;;KAXR;;;ACDJ,sBAAe,YAAW;QAChBsJ,iBAAiB/I,GAAGgJ,YAAH,IAAvB;QACMnJ,IAAI,EAAC4H,OAAO,EAAR,EAAYI,QAAQ,IAApB,EAAV;;aAESoB,kBAAT,GAA8B;YACtB,KAAKpJ,CAAL,CAAOJ,OAAP,CAAeyJ,aAAnB,EAAkC;iBACzBC,YAAL,CAAkBhD,MAAlB,CAAyB,UAAS6B,OAAT,EAAkBpD,IAAlB,EAAwB;wBACrCwE,SAAR;qBACKL,cAAL;wBACQM,SAAR,GAAoB,GAApB;wBACQC,WAAR,GAAsBzJ,EAAE4H,KAAF,CAAQ8B,IAAR,IAAgB,uBAAtC;wBACQC,MAAR;aALJ,EAMG3J,EAAEgI,MANL;;;;WAUD;cACG,iBADH;cAAA,oBAEM;iBACAhF,CAAL,CAAOoG,kBAAP,GAA4BA,kBAA5B;iBACKpJ,CAAL,CAAOJ,OAAP,CAAeyJ,aAAf,GAA+B,IAA/B;SAJD;iBAAA,uBAMS;+BACWvH,IAAnB,CAAwB,IAAxB;SAPD;aAAA,iBASGxC,CATH,EASM;gBACDA,CAAJ,EAAO;kBACDsI,KAAF,GAAUtI,CAAV;;mBAEGU,EAAE4H,KAAT;SAbD;cAAA,kBAeI5B,GAfJ,EAeS;cACNgC,MAAF,GAAWhC,GAAX;;KAhBR;;;AChBJ,sBAAe,YAAW;QAChBkD,iBAAiB/I,GAAGgJ,YAAH,EAAvB;QACMnJ,IAAI,EAACE,KAAI,IAAL,EAAWpB,GAAG,IAAd,EAAV;;aAES8K,eAAT,GAA2B;UACrB1J,GAAF,CAAME,SAAN,CAAgB,YAAhB,EAA8BmI,MAA9B;YACI,KAAKvI,CAAL,CAAOJ,OAAP,CAAeyJ,aAAnB,EAAkC;iBACzBrJ,CAAL,CAAO6J,SAAP,GAAmB7J,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,WAA/B,EAA4C6C,MAA5C,CAAmD,MAAnD,EACd0G,KADc,CACRZ,cADQ,EAEd3I,IAFc,CAET,OAFS,EAEA,UAFA,CAAnB;oBAGQuB,IAAR,CAAa,IAAb;mBACO,KAAK9B,CAAL,CAAO6J,SAAd;;;;aAIChG,OAAT,GAAmB;YACX,KAAK7D,CAAL,CAAO6J,SAAP,IAAoB,KAAK7J,CAAL,CAAOJ,OAAP,CAAeyJ,aAAvC,EAAsD;iBAC7CrJ,CAAL,CAAO6J,SAAP,CAAiBtJ,IAAjB,CAAsB,GAAtB,EAA2B,KAAKP,CAAL,CAAO+E,IAAlC;;;;WAID;cACG,iBADH;cAAA,oBAEM;iBACA/B,CAAL,CAAO4G,eAAP,GAAyBA,eAAzB;iBACK5J,CAAL,CAAOJ,OAAP,CAAeyJ,aAAf,GAA+B,IAA/B;cACEnJ,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;SALD;iBAAA,uBAOS;oBACA4B,IAAR,CAAa,IAAb;SARD;iBAAA,qBAUOhD,CAVP,EAUU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;;KAfR;;;ACrBJ;AACA,sBAAe,YAAW;QAChBF,IAAI,EAACE,KAAI,IAAL,EAAWpB,GAAG,IAAd,EAAV;;aAESiL,gBAAT,GAA4B;UACtB7J,GAAF,CAAME,SAAN,CAAgB,2BAAhB,EAA6CmI,MAA7C;YACI,KAAKvI,CAAL,CAAOJ,OAAP,CAAeoK,eAAnB,EAAoC;gBAC1BC,cAAc,KAAKjK,CAAL,CAAOmD,IAAP,CAAYC,MAAZ,CAAmB,gBAAnB,EACb7C,IADa,CACR,IADQ,EACF,aADE,EAEbA,IAFa,CAER,IAFQ,EAEF,KAFE,EAGbA,IAHa,CAGR,IAHQ,EAGF,KAHE,CAApB;wBAIgB6C,MAAZ,CAAmB,MAAnB,EACG7C,IADH,CACQ,QADR,EACiB,KADjB,EACwBA,IADxB,CAC6B,YAD7B,EAC2C,MAD3C,EAEGA,IAFH,CAEQ,cAFR,EAEuB,IAFvB;wBAGY6C,MAAZ,CAAmB,MAAnB,EACG7C,IADH,CACQ,QADR,EACiB,MADjB,EACyBA,IADzB,CAC8B,YAD9B,EAC4C,MAD5C,EAEGA,IAFH,CAEQ,cAFR,EAEuB,GAFvB;iBAGCP,CAAL,CAAOkK,UAAP,GAAoBlK,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,aAA/B,EAA8C6C,MAA9C,CAAqD,SAArD,EACb7C,IADa,CACR,IADQ,EACF,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAqB,CADnB,EACsBC,IADtB,CAC2B,IAD3B,EACiC,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAsB,EADvD,EAEbD,IAFa,CAER,IAFQ,EAEF,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,KAAoB,IAFlB,EAGblD,IAHa,CAGR,IAHQ,EAGF,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,KAAoB,IAHlB,EAIblD,IAJa,CAIR,OAJQ,EAIC,UAJD,EAKbqH,KALa,CAKP,MALO,EAKC,mBALD,CAApB;iBAMK5H,CAAL,CAAOkK,UAAP;;;;aAICC,kBAAT,GAA8B;UACxBjK,GAAF,CAAME,SAAN,CAAgB,mBAAhB,EAAqCmI,MAArC;YACI,KAAKvI,CAAL,CAAOJ,OAAP,CAAewK,gBAAnB,EAAqC;gBAC3BC,gBAAgB,KAAKrK,CAAL,CAAOmD,IAAP,CAAYC,MAAZ,CAAmB,gBAAnB,EACf7C,IADe,CACV,IADU,EACJ,SADI,EAEfA,IAFe,CAEV,IAFU,EAEJ,KAFI,EAGfA,IAHe,CAGV,IAHU,EAGJ,KAHI,CAAtB;0BAIkB6C,MAAd,CAAqB,MAArB,EACG7C,IADH,CACQ,QADR,EACiB,KADjB,EACwBA,IADxB,CAC6B,YAD7B,EAC2C,MAD3C,EAEGA,IAFH,CAEQ,cAFR,EAEuB,GAFvB;0BAGc6C,MAAd,CAAqB,MAArB,EACG7C,IADH,CACQ,QADR,EACiB,MADjB,EACyBA,IADzB,CAC8B,YAD9B,EAC4C,SAD5C,EAEGA,IAFH,CAEQ,cAFR,EAEuB,KAFvB;iBAGCP,CAAL,CAAOsK,YAAP,GAAsBtK,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,SAA/B,EAA0C6C,MAA1C,CAAiD,QAAjD,EACjB7C,IADiB,CACZ,IADY,EACN,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAuB,CADjB,EACoBC,IADpB,CACyB,IADzB,EAC+B,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAwB,CADvD,EAEjBD,IAFiB,CAEZ,GAFY,EAEN,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAFM,EAGjBlD,IAHiB,CAGZ,OAHY,EAGJ,UAHI,EAIjBqH,KAJiB,CAIX,MAJW,EAIH,eAJG,CAAtB;mBAKO,KAAK5H,CAAL,CAAOsK,YAAd;;;;aAICC,kBAAT,GAA8B;UACxBrK,GAAF,CAAME,SAAN,CAAgB,mBAAhB,EAAqCmI,MAArC;YACI,KAAKvI,CAAL,CAAOJ,OAAP,CAAe4K,gBAAnB,EAAqC;gBAC3BC,kBAAkB,KAAKzK,CAAL,CAAOmD,IAAP,CAAYC,MAAZ,CAAmB,gBAAnB,EACjB7C,IADiB,CACZ,IADY,EACN,SADM,EAEjBA,IAFiB,CAEZ,IAFY,EAEN,KAFM,EAGjBA,IAHiB,CAGZ,IAHY,EAGN,KAHM,CAAxB;4BAIoB6C,MAAhB,CAAuB,MAAvB,EACG7C,IADH,CACQ,QADR,EACkB,IADlB,EACwBA,IADxB,CAC6B,YAD7B,EAC2C,MAD3C,EAEGA,IAFH,CAEQ,cAFR,EAEuB,KAFvB;4BAGgB6C,MAAhB,CAAuB,MAAvB,EACG7C,IADH,CACQ,QADR,EACkB,MADlB,EAC0BA,IAD1B,CAC+B,YAD/B,EAC6C,MAD7C,EAEGA,IAFH,CAEQ,cAFR,EAEuB,KAFvB;iBAGCP,CAAL,CAAO0K,YAAP,GAAsB1K,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,SAA/B,EAA0C6C,MAA1C,CAAiD,QAAjD,EACjB7C,IADiB,CACZ,IADY,EACN,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAuB,CADjB,EACoBC,IADpB,CACyB,IADzB,EAC+B,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAwB,CADvD,EAEjBD,IAFiB,CAEZ,GAFY,EAEN,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAFM,EAGjBlD,IAHiB,CAGZ,OAHY,EAGJ,UAHI,EAIjBqH,KAJiB,CAIX,MAJW,EAIH,eAJG,CAAtB;mBAKO,KAAK5H,CAAL,CAAO0K,YAAd;;;;WAID;cACG,iBADH;cAAA,oBAEM;iBACA1K,CAAL,CAAOJ,OAAP,CAAeoK,eAAf,GAAiC,IAAjC;iBACKhK,CAAL,CAAOJ,OAAP,CAAewK,gBAAf,GAAkC,IAAlC;iBACKpK,CAAL,CAAOJ,OAAP,CAAe4K,gBAAf,GAAkC,IAAlC;iBACKxH,CAAL,CAAO+G,gBAAP,GAA0BA,gBAA1B;iBACK/G,CAAL,CAAOuH,kBAAP,GAA4BA,kBAA5B;iBACKvH,CAAL,CAAOmH,kBAAP,GAA4BA,kBAA5B;cACEjK,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;SATD;gBAAA,sBAWQ;gBACH,KAAKF,CAAL,CAAOsK,YAAP,IAAuB,KAAKtK,CAAL,CAAOJ,OAAP,CAAewK,gBAA1C,EAA4D;qBACnDpK,CAAL,CAAOsK,YAAP,CAAoB/J,IAApB,CAAyB,GAAzB,EAA8B,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAA9B;;gBAEA,KAAKzD,CAAL,CAAO0K,YAAP,IAAuB,KAAK1K,CAAL,CAAOJ,OAAP,CAAe4K,gBAA1C,EAA4D;qBACnDxK,CAAL,CAAO0K,YAAP,CAAoBnK,IAApB,CAAyB,GAAzB,EAA8B,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAA9B;;SAhBL;iBAAA,qBAmBO3E,CAnBP,EAmBU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;;KAxBR;;;ACvEJ,wBAAe,qBAAa;;QAElBF,IAAI;kBACI,IAAI2K,IAAJ,EADJ;gBAEEC,SAFF;cAGA;KAHV;;aAMS9G,MAAT,CAAgB/E,KAAhB,EAAuB;YACbgF,IAAI,KAAK/D,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,EAAV;UACE,CAAF,KAAQ9D,EAAE6K,MAAF,GAAW9L,KAAX,GAAmB,IAA3B;aACKiB,CAAL,CAAO8D,MAAP,CAAcC,CAAd;;;WAGG;cACG,kBADH;cAAA,oBAEM;iBACA/D,CAAL,CAAOJ,OAAP,CAAeiJ,IAAf,GAAsB,IAAtB;SAHD;kBAAA,wBAKU;gBACHiC,MAAM,IAAIH,IAAJ,EAAZ;gBACI,CAAC,KAAK3K,CAAL,CAAOJ,OAAP,CAAeiJ,IAAhB,IAAwB,KAAK7I,CAAL,CAAOC,IAAnC,EAAyC;kBACnC8K,QAAF,GAAaD,GAAb;aADJ,MAEO;oBACG/L,QAAQ+L,MAAM9K,EAAE+K,QAAtB;uBACOjJ,IAAP,CAAY,IAAZ,EAAkB/C,KAAlB;kBACEqG,IAAF,CAAOhE,OAAP,CAAe;2BAAK0C,OAAOhC,IAAP,CAAYpD,CAAZ,EAAeK,KAAf,CAAL;iBAAf;kBACEgM,QAAF,GAAaD,GAAb;;SAbL;aAAA,iBAgBGF,SAhBH,EAgBc;cACXC,MAAF,GAAWD,SAAX;SAjBD;aAAA,mBAmBK;iBACC5K,CAAL,CAAOJ,OAAP,CAAeiJ,IAAf,GAAsB,IAAtB;SApBD;YAAA,kBAsBI;iBACE7I,CAAL,CAAOJ,OAAP,CAAeiJ,IAAf,GAAsB,KAAtB;SAvBD;YAAA,gBAyBE7C,GAzBF,EAyBO;cACJZ,IAAF,GAASY,GAAT;;KA1BR;CAdJ;;ACAA;AACA,2BAAe,YAAW;QAChBgF,iBAAiB7K,GAAGE,MAAH,CAAU,MAAV,EAAkB+C,MAAlB,CAAyB,KAAzB,EAAgC7C,IAAhC,CAAqC,OAArC,EAA8C,gBAA9C,CAAvB;;WAEO;cACG,sBADH;cAAA,oBAEM;gBACC+E,QAAQ,IAAd;gBACM2F,0BAA0B,KAAKjI,CAAL,CAAOkI,eAAvC;iBACKlI,CAAL,CAAOkI,eAAP,GAAyB,YAAW;uBACzBD,wBAAwBnJ,IAAxB,CAA6B,IAA7B,EACNyD,EADM,CACH,WADG,EACU,UAASlB,CAAT,EAAY;wBACnB8G,UAAU7F,MAAM8F,WAAN,CAAkBC,WAAlB,CAA8BvJ,IAA9B,CAAmCwD,KAAnC,EAA0CjB,CAA1C,CAAhB;mCACeiH,IAAf,CAAoBH,QAAQ3I,IAA5B,EACCoF,KADD,CACO,MADP,EACgBzH,GAAG8F,KAAH,CAASsF,KAAT,GAAiB,CAAlB,GAAuB,IADtC,EAEC3D,KAFD,CAEO,KAFP,EAEezH,GAAG8F,KAAH,CAASuF,KAAT,GAAiB,EAAlB,GAAwB,IAFtC,EAGC5D,KAHD,CAGO,SAHP,EAGkB,OAHlB,EAICA,KAJD,CAIO,SAJP,EAIkB,CAJlB;iBAHG,EASNrC,EATM,CASH,UATG,EASS,YAAW;mCACRqC,KAAf,CAAqB,SAArB,EAAgC,CAAhC,EACCA,KADD,CACO,SADP,EACkB,MADlB;iBAVG,EAaNrC,EAbM,CAaH,WAbG,EAaU,YAAW;mCACTqC,KAAf,CAAqB,MAArB,EAA8BzH,GAAG8F,KAAH,CAASsF,KAAT,GAAiB,CAAlB,GAAuB,IAApD,EACC3D,KADD,CACO,KADP,EACezH,GAAG8F,KAAH,CAASuF,KAAT,GAAiB,EAAlB,GAAwB,IADtC;iBAdG,CAAP;aADJ;;KALR;;;ACJJ;AACA,uBAAe,YAAW;QAChBC,aAAatL,GAAGE,MAAH,CAAU,MAAV,EAAkB+C,MAAlB,CAAyB,KAAzB,EAAgC7C,IAAhC,CAAqC,OAArC,EAA8C,YAA9C,CAAnB;;WAEO;cACG,kBADH;cAAA,oBAEM;gBACC+E,QAAQ,IAAd;gBACMoG,oBAAoB,KAAK1I,CAAL,CAAO2I,SAAjC;iBACK3I,CAAL,CAAO2I,SAAP,GAAmB,YAAW;uBACnBD,kBAAkB5J,IAAlB,CAAuB,IAAvB,EACNyD,EADM,CACH,WADG,EACU,YAAW;wBAClBqG,IAAI,CAAC,KAAKC,OAAL,CAAaC,KAAxB;wBACIzH,IAAIiB,MAAMyG,SAAN,CAAgBC,IAAhB,GAAuBC,QAAvB,CAAgCL,CAAhC,CAAR;wBACItG,MAAM4G,gBAAN,CAAuBC,MAA3B,EAAmC;4BAC3B7G,MAAM4G,gBAAN,CAAuBC,MAAvB,CAA8BrK,IAA9B,CAAmC,IAAnC,EAAyCuC,CAAzC,EAA4CuH,CAA5C,EAA+CH,UAA/C,CAAJ;;0BAEES,gBAAN,CAAuBE,IAAvB,CAA4B/H,CAA5B,EACCuD,KADD,CACO,MADP,EACgBzH,GAAG8F,KAAH,CAASsF,KAAT,GAAiB,CAAlB,GAAuB,IADtC,EAEC3D,KAFD,CAEO,KAFP,EAEezH,GAAG8F,KAAH,CAASuF,KAAT,GAAiB,EAAlB,GAAwB,IAFtC,EAGC5D,KAHD,CAGO,SAHP,EAGkB,OAHlB,EAICA,KAJD,CAIO,SAJP,EAIkB,CAJlB;iBAPG,EAaNrC,EAbM,CAaH,UAbG,EAaS,YAAW;+BACZqC,KAAX,CAAiB,SAAjB,EAA4B,CAA5B,EACCA,KADD,CACO,SADP,EACkB,MADlB;iBAdG,EAiBNrC,EAjBM,CAiBH,WAjBG,EAiBU,YAAW;+BACbqC,KAAX,CAAiB,MAAjB,EAA0BzH,GAAG8F,KAAH,CAASsF,KAAT,GAAiB,CAAlB,GAAuB,IAAhD,EACC3D,KADD,CACO,KADP,EACezH,GAAG8F,KAAH,CAASuF,KAAT,GAAiB,EAAlB,GAAwB,IADtC;iBAlBG,CAAP;aADJ;SALD;YAAA,gBA6BEnH,CA7BF,EA6BK;gBACEgI,QAAQhI,EAAEiI,UAAhB;gBACMC,QAAQzM,OAAO2C,IAAP,CAAY4J,KAAZ,EAAmBG,GAAnB,CAAuB;uBAAKC,IAAE,IAAF,GAAOJ,MAAMI,CAAN,CAAZ;aAAvB,EAA6CC,IAA7C,CAAkD,OAAlD,CAAd;mBACOjB,WAAWkB,IAAX,CAAgBJ,KAAhB,CAAP;;KAhCR;;;ACJJ,mBAAe,UAASK,SAAT,EAAoB;QACzB5M,IAAI,EAACE,KAAI,IAAL,EAAWpB,GAAG,IAAd,EAAoB+N,QAAQ,IAA5B,EAAV;;aAESC,YAAT,GAAwB;UAClB5M,GAAF,CAAME,SAAN,CAAgB,iBAAhB,EAAmCmI,MAAnC;YACIvI,EAAE6M,MAAN,EAAc;gBACN,KAAK7M,CAAL,CAAOJ,OAAP,CAAemN,UAAnB,EAA+B;kCACTjL,IAAlB,CAAuB,IAAvB;kCACkBA,IAAlB,CAAuB,IAAvB;wBACQA,IAAR,CAAa,IAAb;;;;;aAKH+B,OAAT,GAAmB;YACX,KAAK7D,CAAL,CAAOgN,WAAX,EAAwB;iBACfhN,CAAL,CAAOgN,WAAP,CAAmBzM,IAAnB,CAAwB,GAAxB,EAA6B,KAAKP,CAAL,CAAO+E,IAApC;4BACgBjD,IAAhB,CAAqB,IAArB;;;;aAICmL,iBAAT,GAA6B;aACpBjN,CAAL,CAAOgN,WAAP,GAAqBhN,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,QAA/B,EAAyCH,SAAzC,CAAmD,MAAnD,EAChB4L,IADgB,CACXhM,EAAE6M,MAAF,CAASZ,QADE,EACQiB,KADR,GACgB9J,MADhB,CACuB,MADvB,EAEhB7C,IAFgB,CAEX,OAFW,EAEF,OAFE,CAArB;eAGO,KAAKP,CAAL,CAAOgN,WAAd;;;aAGKG,iBAAT,GAA6B;aACpBnN,CAAL,CAAOoN,WAAP,GAAqBpN,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,QAA/B,EAAyCH,SAAzC,CAAmD,MAAnD,EAChB4L,IADgB,CACXhM,EAAE6M,MAAF,CAASZ,QADE,EACQiB,KADR,GACgB9J,MADhB,CACuB,MADvB,EAEhB7C,IAFgB,CAEX,OAFW,EAEF,OAFE,EAGhB+K,IAHgB,CAGX,UAASjH,CAAT,EAAY;mBAASA,EAAEiI,UAAF,CAAa9J,IAApB;SAHH,CAArB;eAIO,KAAKxC,CAAL,CAAOoN,WAAd;;;aAGKC,eAAT,GAA2B;YACjB/H,QAAQ,IAAd;YACMgI,YAAY,KAAKtN,CAAL,CAAO2D,IAAP,CAAYkC,MAAZ,CAAmB,CAAC,KAAK7F,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAuB,CAAxB,EAA2B,KAAKN,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAsB,CAAjD,CAAnB,CAAlB;;aAEKR,CAAL,CAAOoN,WAAP,CACK7M,IADL,CACU,aADV,EACwB,UAAS8D,CAAT,EAAY;gBACtBkJ,IAAIjI,MAAMtF,CAAN,CAAQ2D,IAAR,CAAaU,EAAEmJ,QAAF,CAAWC,WAAxB,EAAqC,CAArC,CAAV;mBACOF,IAAIjI,MAAMtF,CAAN,CAAQJ,OAAR,CAAgBU,KAAhB,GAAsB,CAAtB,GAAwB,EAA5B,GAAiC,KAAjC,GACAiN,IAAIjI,MAAMtF,CAAN,CAAQJ,OAAR,CAAgBU,KAAhB,GAAsB,CAAtB,GAAwB,EAA5B,GAAiC,QAAjC,GACA,OAFP;SAHR,EAOKC,IAPL,CAOU,WAPV,EAOuB,UAAS8D,CAAT,EAAY;gBACrBqJ,MAAMpI,MAAMtF,CAAN,CAAQ2D,IAAR,CAAaU,EAAEmJ,QAAF,CAAWC,WAAxB,CAAZ;gBACIF,IAAIG,IAAI,CAAJ,CADR;gBAEIhK,IAAIgK,IAAI,CAAJ,CAFR;gBAGMC,SAASJ,IAAIjI,MAAMtF,CAAN,CAAQJ,OAAR,CAAgBU,KAAhB,GAAsB,CAA1B,GAA8B,CAAC,CAA/B,GAAmC,CAAlD;mBACO,gBAAgBiN,IAAEI,MAAlB,IAA4B,GAA5B,IAAmCjK,IAAE,CAArC,IAA0C,GAAjD;SAZR,EAcKkE,KAdL,CAcW,SAdX,EAcsB,UAASvD,CAAT,EAAY;mBACnBlE,GAAGyN,WAAH,CAAevJ,EAAEmJ,QAAF,CAAWC,WAA1B,EAAuCH,SAAvC,IAAoD,IAApD,GAA2D,MAA3D,GAAoE,QAA3E;SAfR;;;WAmBG;cACG,cADH;cAEGV,aAAa,CAACA,SAAD,CAFhB;eAAA,mBAGK5K,GAHL,EAGU6K,MAHV,EAGkB;cACfA,MAAF,GAAWA,MAAX;SAJD;cAAA,oBAMM;iBACA7J,CAAL,CAAO8J,YAAP,GAAsBA,YAAtB;iBACK9M,CAAL,CAAOJ,OAAP,CAAemN,UAAf,GAA4B,IAA5B;cACE7M,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;SATD;iBAAA,uBAWS;oBACA4B,IAAR,CAAa,IAAb;SAZD;iBAAA,qBAcOhD,CAdP,EAcU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;SAnBD;YAAA,gBAqBE3B,CArBF,EAqBK;gBACAA,CAAJ,EAAO;oBACGyN,OAAOzN,EAAEsP,YAAF,CAAe7B,IAAf,EAAb;kBACEa,MAAF,GAAWb,KAAKa,MAAhB;aAFJ,MAGO;uBACI,EAACA,QAAQ7M,EAAE6M,MAAX,EAAP;;;KA1BZ;;;AC3DJ;AACA,mBAAe,UAACiB,QAAD,EAAWC,eAAX,EAA+B;;;QAGpC/N,IAAI,EAACgO,OAAO,IAAR,EAAcC,cAAc,IAA5B,EAAkCrG,OAAO,EAAzC,EAA6CI,QAAQ,IAArD,EAA2DpI,SAAS,EAApE,EAAV;;aAESsO,yBAAT,GAAqC;YAC7BlO,EAAEgO,KAAF,IAAW,KAAKhO,CAAL,CAAOJ,OAAP,CAAeuO,QAA9B,EAAwC;2BACrBrM,IAAf,CAAoB,IAApB;gBACI,CAAC,KAAK9B,CAAL,CAAOC,IAAZ,EAAkB;oBACV,KAAKD,CAAL,CAAOJ,OAAP,CAAewO,aAAnB,EAAkC;uCACXtM,IAAnB,CAAwB,IAAxB;;oBAEA,KAAK9B,CAAL,CAAOJ,OAAP,CAAeyO,SAAnB,EAA8B;mCACXvM,IAAf,CAAoB,IAApB;;;;;;aAMPwM,cAAT,GAA0B;aACjBhF,YAAL,CAAkBhD,MAAlB,CAAyB,UAAS6B,OAAT,EAAkBpD,IAAlB,EAAwB;oBACrCwE,SAAR;iBACKvJ,EAAEuO,IAAP;oBACQC,SAAR,GAAoBxO,EAAE4H,KAAF,CAAQ2G,IAAR,IAAgB,wBAApC;oBACQE,IAAR;SAJJ,EAKGzO,EAAEgI,MALL,EAKahI,EAAEJ,OALf;;;aAQK8O,kBAAT,GAA8B;aACrBpF,YAAL,CAAkBhD,MAAlB,CAAyB,UAAS6B,OAAT,EAAkBpD,IAAlB,EAAwB;oBACrCwE,SAAR;iBACKvJ,EAAE2O,SAAP;oBACQnF,SAAR,GAAoB,GAApB;oBACQC,WAAR,GAAsBzJ,EAAE4H,KAAF,CAAQ+G,SAAR,IAAqB,uBAA3C;oBACQhF,MAAR;SALJ,EAMG3J,EAAEgI,MANL,EAMahI,EAAEJ,OANf;;;aASKgP,cAAT,GAA0B;aACjBtF,YAAL,CAAkBhD,MAAlB,CAAyB,UAAS6B,OAAT,EAAkBpD,IAAlB,EAAwB;oBACrCwE,SAAR;iBACKvJ,EAAE6O,KAAP;oBACQL,SAAR,GAAoBxO,EAAE4H,KAAF,CAAQiH,KAAR,IAAiB,uBAArC;oBACQJ,IAAR;SAJJ,EAKGzO,EAAEgI,MALL,EAKahI,EAAEJ,OALf;;;QAQAyB,OAAO,IAAX;QACIyM,QAAJ,EAAc;eACH,CAACA,QAAD,CAAP;YACIC,eAAJ,EAAqB;iBACZnL,IAAL,CAAUmL,eAAV;;;;WAID;cACG,aADH;cAEG1M,IAFH;eAAA,mBAGKW,GAHL,EAGUgM,KAHV,EAGiBC,YAHjB,EAG+B;iBACzBa,WAAL,CAAiB9C,IAAjB,CAAsB,EAACgC,YAAD,EAAQC,0BAAR,EAAtB;SAJD;cAAA,oBAMM;iBACAjO,CAAL,CAAOJ,OAAP,CAAeuO,QAAf,GAA0B,IAA1B;iBACKnO,CAAL,CAAOJ,OAAP,CAAeyO,SAAf,GAA2B,IAA3B;iBACKrO,CAAL,CAAOJ,OAAP,CAAewO,aAAf,GAA+B,IAA/B;iBACKpL,CAAL,CAAOkL,yBAAP,GAAmCA,yBAAnC;SAVD;iBAAA,uBAYS;sCACkBpM,IAA1B,CAA+B,IAA/B;SAbD;YAAA,gBAeEkK,KAfF,EAeQ;gBACHA,KAAJ,EAAU;kBACJgC,KAAF,GAAUhC,MAAKgC,KAAf;kBACEC,YAAF,GAAiBjC,MAAKiC,YAAtB;kBACEM,IAAF,GAASQ,SAASC,OAAT,CAAiBhP,EAAEgO,KAAnB,EAA0BhO,EAAEgO,KAAF,CAAQiB,OAAR,CAAgBV,IAA1C,CAAT;kBACEM,KAAF,GAAUE,SAASC,OAAT,CAAiBhP,EAAEgO,KAAnB,EAA0BhO,EAAEgO,KAAF,CAAQiB,OAAR,CAAgBC,aAA1C,CAAV;kBACEP,SAAF,GAAcI,SAASC,OAAT,CAAiBhP,EAAEgO,KAAnB,EAA0BhO,EAAEgO,KAAF,CAAQiB,OAAR,CAAgBN,SAA1C,CAAd;;mBAEG;uBACI3O,EAAEgO,KADN;8BAEWhO,EAAEiO;aAFpB;SAvBD;aAAA,iBA4BG3O,CA5BH,EA4BM;gBACDA,CAAJ,EAAO;kBACDsI,KAAF,GAAUtI,CAAV;;mBAEGU,EAAE4H,KAAT;SAhCD;cAAA,kBAkCI5B,GAlCJ,EAkCS;cACNgC,MAAF,GAAWhC,GAAX;SAnCD;eAAA,mBAqCKpG,QArCL,EAqCc;cACXA,OAAF,GAAYA,QAAZ;;KAtCR;CAvDJ;;ACDA,kBAAe,UAASkO,QAAT,EAAmBC,eAAnB,EAAoC;QACzC/N,IAAI,EAACE,KAAI,IAAL,EAAWpB,GAAG,IAAd,EAAoBkP,OAAO,IAA3B,EAAiCC,cAAc,IAA/C,EAAV;QACMkB,eAAe,SAAfA,YAAe,GAAW;;KAAhC;;aAISC,sBAAT,GAAkC;UAC5BlP,GAAF,CAAME,SAAN,CAAgB,yBAAhB,EAA2CmI,MAA3C;YACI,KAAKvI,CAAL,CAAOJ,OAAP,CAAeuO,QAAnB,EAA6B;gBACrBnO,EAAEgO,KAAN,EAAa;oBACL,KAAKhO,CAAL,CAAOJ,OAAP,CAAewO,aAAnB,EAAkC;yBACzBpL,CAAL,CAAOkI,eAAP,CAAuBpJ,IAAvB,CAA4B,IAA5B;iBADJ,MAEO;yBACEkB,CAAL,CAAOqM,WAAP,CAAmBvN,IAAnB,CAAwB,IAAxB;;oBAEA,KAAK9B,CAAL,CAAOJ,OAAP,CAAeyO,SAAnB,EAA8B;yBACrBrL,CAAL,CAAOsM,WAAP,CAAmBxN,IAAnB,CAAwB,IAAxB;;;oBAGAA,IAAR,CAAa,IAAb;;;;aAIC+B,OAAT,GAAmB;YACX7D,EAAEgO,KAAF,IAAW,KAAKhO,CAAL,CAAOJ,OAAP,CAAeuO,QAA9B,EAAwC;gBAChC,KAAKnO,CAAL,CAAOJ,OAAP,CAAewO,aAAnB,EAAkC;qBACzBpO,CAAL,CAAO2O,SAAP,CAAiBpO,IAAjB,CAAsB,GAAtB,EAA2B,KAAKP,CAAL,CAAO+E,IAAlC;aADJ,MAEO;qBACE/E,CAAL,CAAOgO,KAAP,CAAazN,IAAb,CAAkB,GAAlB,EAAuB,KAAKP,CAAL,CAAO+E,IAA9B;;gBAEA,KAAK/E,CAAL,CAAOJ,OAAP,CAAeyO,SAAnB,EAA8B;qBACrBrO,CAAL,CAAO6O,KAAP,CAAatO,IAAb,CAAkB,GAAlB,EAAuB,KAAKP,CAAL,CAAO+E,IAA9B;;;;;aAKHsK,WAAT,GAAuB;aACdrP,CAAL,CAAOgO,KAAP,GAAehO,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,MAA/B,EAAuC6C,MAAvC,CAA8C,MAA9C,EACV0G,KADU,CACJ9J,EAAEuO,IADE,CAAf;eAEO,KAAKvO,CAAL,CAAOgO,KAAd;;;aAGK9C,eAAT,GAA2B;aAClBlL,CAAL,CAAO2O,SAAP,GAAmB3O,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,WAA/B,EAA4CH,SAA5C,CAAsD,MAAtD,EACd4L,IADc,CACThM,EAAE2O,SAAF,CAAY1C,QADH,EACaiB,KADb,GACqB9J,MADrB,CAC4B,MAD5B,EACoCmC,EADpC,CACuC,OADvC,EACgD4J,YADhD,EAEV5O,IAFU,CAEL,IAFK,EAEA,UAAS8D,CAAT,EAAY;mBAAQ,MAAIA,EAAE4C,EAAb;SAFb,CAAnB;eAGO,KAAKjH,CAAL,CAAO2O,SAAd;;;aAGKW,WAAT,GAAuB;aACdtP,CAAL,CAAO6O,KAAP,GAAe7O,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,OAA/B,EAAwC6C,MAAxC,CAA+C,MAA/C,EACV0G,KADU,CACJ9J,EAAE6O,KADE,CAAf;eAEO,KAAK7O,CAAL,CAAO6O,KAAd;;;QAGAxN,OAAO,IAAX;QACIyM,QAAJ,EAAc;eACH,CAACA,QAAD,CAAP;YACIC,eAAJ,EAAqB;iBACZnL,IAAL,CAAUmL,eAAV;;;WAGD;cACG,aADH;cAEG1M,IAFH;eAAA,mBAGKW,GAHL,EAGUgM,KAHV,EAGiBC,YAHjB,EAG+B;iBACzB7C,WAAL,CAAiBY,IAAjB,CAAsB,EAACgC,YAAD,EAAQC,0BAAR,EAAtB;SAJD;cAAA,oBAMM;iBACAjO,CAAL,CAAOJ,OAAP,CAAeuO,QAAf,GAA0B,IAA1B;iBACKnO,CAAL,CAAOJ,OAAP,CAAeyO,SAAf,GAA2B,IAA3B;iBACKrO,CAAL,CAAOJ,OAAP,CAAewO,aAAf,GAA+B,IAA/B;iBACKpL,CAAL,CAAOoM,sBAAP,GAAgCA,sBAAhC;iBACKpM,CAAL,CAAOkI,eAAP,GAAyBA,eAAzB;iBACKlI,CAAL,CAAOsM,WAAP,GAAqBA,WAArB;iBACKtM,CAAL,CAAOqM,WAAP,GAAqBA,WAArB;cACEnP,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;SAdD;iBAAA,uBAgBS;oBACA4B,IAAR,CAAa,IAAb;SAjBD;iBAAA,uBAmBS;mBACD9B,EAAE2O,SAAF,CAAY1C,QAAnB;SApBD;YAAA,gBAsBED,KAtBF,EAsBQ;gBACHA,KAAJ,EAAU;kBACJgC,KAAF,GAAUhC,MAAKgC,KAAf;kBACEC,YAAF,GAAiBjC,MAAKiC,YAAtB;kBACEM,IAAF,GAASQ,SAASC,OAAT,CAAiBhP,EAAEgO,KAAnB,EAA0BhO,EAAEgO,KAAF,CAAQiB,OAAR,CAAgBV,IAA1C,CAAT;kBACEM,KAAF,GAAUE,SAASC,OAAT,CAAiBhP,EAAEgO,KAAnB,EAA0BhO,EAAEgO,KAAF,CAAQiB,OAAR,CAAgBC,aAA1C,CAAV;kBACEP,SAAF,GAAcI,SAASC,OAAT,CAAiBhP,EAAEgO,KAAnB,EAA0BhO,EAAEgO,KAAF,CAAQiB,OAAR,CAAgBN,SAA1C,CAAd;;mBAEG;uBACI3O,EAAEgO,KADN;8BAEWhO,EAAEiO;aAFpB;SA9BD;mBAAA,uBAmCS5J,CAnCT,EAmCY;gBACPkL,QAAQ,EAAZ;gBACIvP,EAAEiO,YAAN,EAAoB;wBACRjO,EAAEiO,YAAF,CAAeuB,IAAf,CAAoB,UAASjC,CAAT,EAAY;2BAC7BA,EAAEtG,EAAF,IAAM5C,EAAE4C,EAAf;iBADI,CAAR;;mBAIGsI,KAAP;SA1CD;iBAAA,qBA4COzQ,CA5CP,EA4CU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;;KAjDR;;;AC9DJ,mBAAe,YAAW;QAChBF,IAAI,EAACyP,cAAc,IAAf,EAAV;;aAESC,QAAT,GAAoB;YACZ,CAAC1P,EAAEyP,YAAP,EAAqB;gBACXnK,QAAS,IAAf;gBACMqK,QAAS,IAAIpJ,MAAMqJ,KAAV,EAAf;gBACMC,SAAS,IAAItJ,MAAMuJ,aAAV,EAAf;mBACOC,IAAP,CAAY,eAAZ,EAA6B,UAASC,OAAT,EAAkB;oBACrCxC,WAAa,IAAIjH,MAAM0J,cAAV,CAA0B,GAA1B,EAA+B,EAA/B,EAAmC,EAAnC,CAAnB;oBACMC,WAAa,IAAI3J,MAAM4J,iBAAV,CAA6B,EAAE3D,KAAKwD,OAAP,EAAgBI,UAAU,GAA1B,EAA7B,CAAnB;kBACEX,YAAF,GAAiB,IAAIlJ,MAAM8J,IAAV,CAAgB7C,QAAhB,EAA0B0C,QAA1B,CAAjB;sBACM5I,GAAN,CAAUtH,EAAEyP,YAAZ;uBACO3N,IAAP,CAAYwD,KAAZ;aALJ;kBAOMgL,aAAN,CAAoBC,SAApB,CAA8BZ,KAA9B;;;;aAIC7L,MAAT,GAAkB;YACR0M,KAAK,KAAKxQ,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,EAAX;WACG,CAAH,KAAS,EAAT;YACMrE,KAAK,KAAKO,CAAL,CAAO/B,MAAP,CAAcuS,EAAd,CAAX;YACMC,KAAK,IAAIlK,MAAMmK,UAAV,CAAqB,CAACjR,GAAG,CAAH,CAAtB,EAA6BA,GAAG,CAAH,CAA7B,EAAoCA,GAAG,CAAH,CAApC,EAA2CA,GAAG,CAAH,CAA3C,CAAX;UACEgQ,YAAF,CAAekB,yBAAf,CAAyCF,EAAzC;;;WAGG;cACG,cADH;cAAA,oBAEM;qBACI3O,IAAT,CAAc,IAAd;SAHD;iBAAA,uBAKS;gBACJ9B,EAAEyP,YAAN,EAAoB;uBACT3N,IAAP,CAAY,IAAZ;;;KAPZ;;;AC3BJ;AACA,oBAAe,YAAM;QACX9B,IAAI,EAAC4Q,SAAS,IAAV,EAAgBC,oBAAoB,IAApC,EAAV;;aAES1F,OAAT,CAAiB2F,GAAjB,EAAsB7J,EAAtB,EAA0B;aACjBA,GAAG8J,OAAH,CAAW,GAAX,EAAgB,EAAhB,CAAL;aACI,IAAInF,IAAE,CAAN,EAASzN,IAAE2S,IAAI7P,MAAnB,EAA2B2K,IAAEzN,CAA7B,EAAgCyN,GAAhC,EAAqC;gBAC9BkF,IAAIlF,CAAJ,EAAO3E,EAAP,IAAaA,EAAhB,EAAoB;uBAAQ6J,IAAIlF,CAAJ,CAAP;;;;;aAIpBoF,UAAT,CAAoBzS,CAApB,EAAuB;;;WAChByS,UAAH,GACCC,QADD,CACU,IADV,EAECC,KAFD,CAEO,QAFP,EAEiB,YAAM;gBACZnN,IAAI5D,GAAGgR,WAAH,CAAe,OAAKnR,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,EAAf,EAAqC,CAAC,CAACvF,EAAE,CAAF,CAAF,EAAQ,CAACA,EAAE,CAAF,CAAT,CAArC,CAAX;mBACO,aAAK;uBACHyB,CAAL,CAAO8D,MAAP,CAAcC,EAAE1E,CAAF,CAAd;aADJ;SAJJ;;;aAUK6L,eAAT,GAA2B;YACjB5F,QAAQ,IAAd;YACMqJ,YAAY3O,EAAE6Q,kBAAF,CAAqB/O,IAArB,CAA0B,IAA1B,CAAlB;kBACUyD,EAAV,CAAa,OAAb,EAAsB,YAAW;gBACvB0B,KAAK,KAAKA,EAAL,CAAQ8J,OAAR,CAAgB,GAAhB,EAAqB,EAArB,CAAX;gBACMK,IAAI9L,MAAM8F,WAAN,CAAkBuD,SAAlB,EAAV;gBACM0C,iBAAiBlG,QAAQiG,CAAR,EAAWnK,EAAX,CAAvB;gBACM1I,IAAI4B,GAAGmR,WAAH,CAAeD,cAAf,CAAV;uBACWvP,IAAX,CAAgBwD,KAAhB,EAAuB/G,CAAvB;gBACI,OAAOyB,EAAE4Q,OAAT,KAAoB,UAAxB,EAAoC;kBAC9BA,OAAF,CAAU9O,IAAV,CAAewD,KAAf;;SAPR;eAUOqJ,SAAP;;;WAGG;cACG,cADH;cAAA,oBAEM;cACHkC,kBAAF,GAAuB,KAAK7N,CAAL,CAAOkI,eAA9B;iBACKlI,CAAL,CAAOkI,eAAP,GAAyBA,eAAzB;SAJD;UAAA,cAMAjE,EANA,EAMI;gBACGmK,IAAI,KAAKhG,WAAL,CAAiBuD,SAAjB,EAAV;gBACM0C,iBAAiBlG,QAAQiG,CAAR,EAAWnK,EAAX,CAAvB;gBACI1I,IAAI4B,GAAGmR,WAAH,CAAeD,cAAf,CADR;uBAEWvP,IAAX,CAAgB,IAAhB,EAAsBvD,CAAtB;SAVD;eAAA,mBAYKwC,EAZL,EAYS;cACN6P,OAAF,GAAY7P,EAAZ;;KAbR;CArCJ;;ACDA,oBAAe,YAAW;QAChBf,IAAI,EAAC2D,MAAM,IAAP,EAAV;;WAEO;cACG,eADH;cAAA,oBAEM;gBACCrD,QAAQ,GAAd;gBACIE,SAAS,GADb;gBAEI8E,QAAQ,IAFZ;;qBAISiM,SAAT,GAAqB;sBACXvR,CAAN,CAAQE,GAAR,CAAY8Q,UAAZ,GACKC,QADL,CACc,KADd,EAEKC,KAFL,CAEW,YAFX,EAEyB,YAAW;2BACrB,UAASM,EAAT,EAAa;kCACNC,KAAV,CAAgBD,EAAhB;8BACMxR,CAAN,CAAQ6D,OAAR;qBAFJ;iBAHR;;;qBAUK6N,sBAAT,CAAgCC,CAAhC,EAAmCC,CAAnC,EAAsC;oBAC5BC,KAAK1R,GAAG2R,aAAH,CAAiBC,GAAjB,EAAsBtO,KAAtB,CAA4B,CAA5B,CAAX;oBACIgO,cAAJ;;yBAESM,GAAT,CAAaC,KAAb,EAAoBC,EAApB,EAAwB;wBACdC,KAAKP,EAAE,CAACK,SAAS,MAAM1U,KAAKM,EAArB,EAAyBqU,MAAM,MAAM3U,KAAKM,EAA1C,CAAF,CAAX;wBAA6DuU,KAAKP,EAAE,CAACI,KAAD,EAAQC,EAAR,CAAF,CAAlE;2BACO,CAAC,CAAC,IAAIR,KAAL,IAAcS,GAAG,CAAH,CAAd,GAAsBT,QAAQU,GAAG,CAAH,CAA/B,EAAsC,CAACV,QAAQ,CAAT,IAAcS,GAAG,CAAH,CAAd,GAAsBT,QAAQU,GAAG,CAAH,CAApE,CAAP;;;0BAGMV,KAAV,GAAkB,UAASD,EAAT,EAAa;wBACvB,CAACzP,UAAUd,MAAf,EACI,OAAOwQ,KAAP;wBACEW,KAAKT,EAAEhN,SAAF,EAAX;wBACI0N,KAAKT,EAAEjN,SAAF,EADT;4BAEY,CAAE6M,EAAV;uBACG,CAAH,IAAQY,GAAG,CAAH,CAAR;uBACG,CAAH,IAAQA,GAAG,CAAH,IAAM,GAAd;;uBAEDzN,SAAH,CAAa,CACT,CAAC,IAAI8M,KAAL,IAAcW,GAAG,CAAH,CAAd,GAAsBX,QAAQY,GAAG,CAAH,CADrB,EAER,CAAC,IAAIZ,KAAL,IAAcW,GAAG,CAAH,CAAd,GAAsBX,QAAQY,GAAG,CAAH,CAFtB,CAAb;2BAIOR,EAAP;iBAbJ;0BAeUJ,KAAV,CAAgB,CAAhB;uBACOI,EAAP;;;gBAGES,KAAK,KAAKtS,CAAL,CAAO2D,IAAlB;gBACM4O,KAAKpS,GAAGqS,kBAAH,GACN/O,KADM,CACAnD,QAAM,CADN,EAENqE,SAFM,CAEI,CAACrE,QAAQ,CAAT,EAAYE,SAAS,CAArB,CAFJ,CAAX;cAGEmD,IAAF,GAAS+N,uBAAuBY,EAAvB,EAA2BC,EAA3B,CAAT;;iBAEKvS,CAAL,CAAOuR,SAAP,GAAmBA,SAAnB;iBACKvR,CAAL,CAAO6R,EAAP,GAAY7R,EAAE2D,IAAd;iBACK3D,CAAL,CAAOsS,EAAP,GAAYA,EAAZ;iBACKtS,CAAL,CAAOuS,EAAP,GAAYA,EAAZ;SAvDD;aAAA,mBAyDK;;iBAECvS,CAAL,CAAO+E,IAAP,GAAc5E,GAAG6E,OAAH,GAAaC,UAAb,CAAwBjF,EAAE2D,IAA1B,CAAd;;;iBAGKb,OAAL;iBACK9C,CAAL,CAAOuR,SAAP,CAAiBzP,IAAjB,CAAsB,IAAtB;;KA/DR;;;ACHJ,iBAAe,mBAAW;;QAEhB9B,IAAI,EAACE,KAAI,IAAL,EAAWuS,eAAe,IAA1B,EAAgC3T,GAAG,IAAnC,EAAyC4T,MAAM,IAA/C,EAAV;;aAES/G,SAAT,GAAqB;UACfzL,GAAF,CAAME,SAAN,CAAgB,MAAhB,EAAwBmI,MAAxB;YACIvI,EAAE0S,IAAF,IAAU,KAAK1S,CAAL,CAAOJ,OAAP,CAAe+S,QAA7B,EAAuC;gBAC7BC,OAAO5S,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,KAA/B,CAAb;gBACMsS,OAAOD,KAAKxP,MAAL,CAAY,MAAZ,EACR7C,IADQ,CACH,IADG,EACG,MADH,CAAb;iBAEK6C,MAAL,CAAY,MAAZ,EACK7C,IADL,CACU,GADV,EACe,CADf,EAEKA,IAFL,CAEU,GAFV,EAEe,CAFf,EAGKA,IAHL,CAGU,OAHV,EAGmB,MAHnB,EAIKA,IAJL,CAIU,QAJV,EAIoB,MAJpB,EAKKA,IALL,CAKU,MALV,EAKkB,OALlB;iBAMK6C,MAAL,CAAY,KAAZ,EACK7C,IADL,CACU,YADV,EACwB,aADxB,EAEKA,IAFL,CAEU,MAFV,EAEkB,OAFlB;iBAGKP,CAAL,CAAO6S,IAAP,GAAcA,IAAd;;cAEEnV,GAAF,GAAQyC,GAAGzC,GAAH,CAAOsC,EAAE0S,IAAF,CAAOzG,QAAd,EAAwB;uBAAK6G,SAASzO,EAAEiI,UAAF,CAAayG,GAAtB,CAAL;aAAxB,CAAR;;gBAEMtP,QAAQ,KAAKzD,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAAd;cACEuP,WAAF,GAAgB7S,GAAGO,WAAH,GACXC,MADW,CACJ,CAAC,CAAD,EAAIX,EAAEtC,GAAN,CADI,EAEXkD,KAFW,CAEL,CAAC6C,KAAD,EAAQA,QAAM,EAAd,CAFK,CAAhB;;iBAIKzD,CAAL,CAAOiT,GAAP,GAAaL,KAAKxS,SAAL,CAAe,MAAf,EAAuB4L,IAAvB,CAA4BhM,EAAE0S,IAAF,CAAOzG,QAAnC,EAA6CiB,KAA7C,GAAqD9J,MAArD,CAA4D,MAA5D,EACR7C,IADQ,CACH,QADG,EACO,KADP,EAERA,IAFQ,CAEH,cAFG,EAEa,GAFb,EAGRA,IAHQ,CAGH,YAHG,EAGW,UAAC8D,CAAD,EAAIuH,CAAJ;uBAAUA,CAAV;aAHX,CAAb;;oBAKQ9J,IAAR,CAAa,IAAb;mBACO,KAAK9B,CAAL,CAAOiT,GAAd;;;;aAICpP,OAAT,GAAmB;YACX7D,EAAE0S,IAAF,IAAU,KAAK1S,CAAL,CAAOJ,OAAP,CAAe+S,QAA7B,EAAuC;gBAC7BO,QAAQ,KAAKlT,CAAL,CAAO2D,IAArB;gBACMF,QAAQzD,EAAEgT,WAAhB;gBACMG,QAAQnT,EAAEyS,aAAhB;gBACM5R,SAASqS,MAAMrN,MAAN,CAAa,KAAK7F,CAAL,CAAOa,MAApB,CAAf;iBACKb,CAAL,CAAOiT,GAAP,CACKpL,IADL,CACU,UAASxD,CAAT,EAAY;oBACR2B,MAAM3B,EAAEmJ,QAAF,CAAWC,WAAvB;sBACMhK,KAAN,CAAYA,MAAMY,EAAEiI,UAAF,CAAayG,GAAnB,CAAZ;oBACMK,WAAWjT,GAAGyN,WAAH,CAAe5H,GAAf,EAAoBnF,MAApB,CAAjB;oBACMwS,KAAKH,MAAMlN,GAAN,CAAX;oBACMsN,KAAKH,MAAMnN,GAAN,CAAX;mBACG3F,MAAH,CAAU,IAAV,EACKE,IADL,CACU,IADV,EACgB8S,GAAG,CAAH,CADhB,EAEK9S,IAFL,CAEU,IAFV,EAEgB8S,GAAG,CAAH,CAFhB,EAGK9S,IAHL,CAGU,IAHV,EAGgB+S,GAAG,CAAH,CAHhB,EAIK/S,IAJL,CAIU,IAJV,EAIgB+S,GAAG,CAAH,CAJhB,EAKK/S,IALL,CAKU,MALV,EAKkB6S,WAAW,IAAX,GAAkB,IAAlB,GAAyB,YAL3C;aAPR;;;;aAiBCG,WAAT,GAAuB;;aAEdvT,CAAL,CAAOmD,IAAP,CAAY/C,SAAZ,CAAsB,UAAtB,EAAkCmI,MAAlC;aACKvI,CAAL,CAAOmD,IAAP,CAAYC,MAAZ,CAAmB,UAAnB,EAA+BA,MAA/B,CAAsC,QAAtC,EACK7C,IADL,CACU,IADV,EACgB,YADhB,EAEKA,IAFL,CAEU,IAFV,EAEgB,KAAKP,CAAL,CAAOJ,OAAP,CAAeU,KAAf,GAAuB,CAFvC,EAGKC,IAHL,CAGU,IAHV,EAGgB,KAAKP,CAAL,CAAOJ,OAAP,CAAeY,MAAf,GAAwB,CAHxC,EAIKD,IAJL,CAIU,GAJV,EAIgB,KAAKP,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAJhB;;;WAOG;cACG,WADH;cAEG+P,WAAW,CAACA,OAAD,CAFd;eAAA,mBAGKxR,GAHL,EAGU0Q,IAHV,EAGgB;;;cACbA,IAAF,GAASA,IAAT;uBACW;uBAAM7O,QAAQ/B,IAAR,OAAN;aAAX,EAAoC,CAApC;SALD;cAAA,oBAOM;iBACAkB,CAAL,CAAO2I,SAAP,GAAmBA,SAAnB;iBACK3I,CAAL,CAAOuQ,WAAP,GAAqBA,WAArB;iBACKvT,CAAL,CAAOJ,OAAP,CAAe+S,QAAf,GAA0B,IAA1B;cACEF,aAAF,GAAkB,KAAKzS,CAAL,CAAOyE,YAAP,EAAlB;cACEvE,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;wBACY4B,IAAZ,CAAiB,IAAjB;SAbD;gBAAA,sBAeQ;wBACKA,IAAZ,CAAiB,IAAjB;sBACUA,IAAV,CAAe,IAAf;SAjBD;iBAAA,uBAmBS;cACN2Q,aAAF,CAAgB3O,MAAhB,CAAuB,KAAK9D,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,EAAvB;oBACQhC,IAAR,CAAa,IAAb;SArBD;iBAAA,qBAuBOhD,CAvBP,EAuBU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;SA5BD;YAAA,gBA8BE8L,KA9BF,EA8BQ;gBACHA,KAAJ,EAAU;kBACJ0G,IAAF,GAAS1G,KAAT;aADJ,MAEO;uBACIhM,EAAE0S,IAAT;;;KAlCZ;CAvEJ;;ACAA,iBAAe,YAAW;QAChB1S,IAAI,EAACyT,UAAU,IAAX,EAAV;;aAESC,UAAT,GAAsB;YACd1T,EAAEyT,QAAF,IAAc,KAAKzT,CAAL,CAAOJ,OAAP,CAAe+T,QAA7B,IAAyC,CAAC,KAAK3T,CAAL,CAAOC,IAArD,EAA2D;iBAClDD,CAAL,CAAOE,GAAP,CAAWE,SAAX,CAAqB,MAArB,EAA6BmI,MAA7B;gBACIvI,EAAEyT,QAAF,IAAc,KAAKzT,CAAL,CAAOJ,OAAP,CAAe+T,QAAjC,EAA2C;qBAClC3T,CAAL,CAAO4T,IAAP,GAAc,KAAK5T,CAAL,CAAOE,GAAP,CAAWkD,MAAX,CAAkB,GAAlB,EAAuB7C,IAAvB,CAA4B,OAA5B,EAAoC,KAApC,EAA2CH,SAA3C,CAAqD,QAArD,EACT4L,IADS,CACJhM,EAAEyT,QAAF,CAAWxH,QADP,EACiBiB,KADjB,GACyB9J,MADzB,CACgC,QADhC,EAET7C,IAFS,CAEJ,GAFI,EAEC,CAFD,EAGTA,IAHS,CAGJ,QAHI,EAGM,MAHN,EAITqH,KAJS,CAIH,SAJG,EAIQ,IAJR,CAAd;wBAKQ9F,IAAR,CAAa,IAAb;uBACO,KAAK9B,CAAL,CAAO4T,IAAd;;;;;aAKH/P,OAAT,GAAmB;YACX,KAAK7D,CAAL,CAAOC,IAAP,IAAa,IAAjB,EAAuB;iBACdD,CAAL,CAAO4T,IAAP,CAAYhM,KAAZ,CAAkB,SAAlB,EAA6B,MAA7B;SADJ,MAEO,IAAI,CAAC,KAAK5H,CAAL,CAAOC,IAAR,IAAgB,KAAKD,CAAL,CAAO4T,IAAvB,IAA+B,KAAK5T,CAAL,CAAOJ,OAAP,CAAe+T,QAAlD,EAA4D;gBACzDhQ,OAAO,KAAK3D,CAAL,CAAO2D,IAApB;gBACM9C,SAAS,KAAKb,CAAL,CAAO2D,IAAP,CAAYkC,MAAZ,CAAmB,KAAK7F,CAAL,CAAOa,MAA1B,CAAf;iBACKb,CAAL,CAAO4T,IAAP,CACKrT,IADL,CACU,IADV,EACgB;uBAAKoD,KAAKU,EAAEmJ,QAAF,CAAWC,WAAhB,EAA6B,CAA7B,CAAL;aADhB,EAEKlN,IAFL,CAEU,IAFV,EAEgB;uBAAKoD,KAAKU,EAAEmJ,QAAF,CAAWC,WAAhB,EAA6B,CAA7B,CAAL;aAFhB,EAGK7F,KAHL,CAGW,SAHX,EAGsB,UAASvD,CAAT,EAAY;uBACnBlE,GAAGyN,WAAH,CAAevJ,EAAEmJ,QAAF,CAAWC,WAA1B,EAAuC5M,MAAvC,IAAiD,IAAjD,GAAwD,MAAxD,GAAiE,QAAxE;aAJR;;;;WASD;cACG,YADH;cAAA,oBAEM;iBACAmC,CAAL,CAAO0Q,UAAP,GAAoBA,UAApB;iBACK1T,CAAL,CAAOJ,OAAP,CAAe+T,QAAf,GAA0B,IAA1B;SAJD;iBAAA,uBAMS;oBACA7R,IAAR,CAAa,IAAb;SAPD;YAAA,gBASEkK,KATF,EASQ;cACLyH,QAAF,GAAazH,KAAb;;KAVR;;;ACjCJ,iBAAe,YAAW;QAChBhM,IAAI,EAACyT,UAAU,IAAX,EAAV;;aAESI,aAAT,GAAyB;YACjB7T,EAAEyT,QAAF,IAAc,KAAKzT,CAAL,CAAOJ,OAAP,CAAe+T,QAA7B,IAAyC,CAAC,KAAK3T,CAAL,CAAOC,IAArD,EAA2D;gBACjD0D,OAAO,KAAK3D,CAAL,CAAO2D,IAApB;gBACM9C,SAAS8C,KAAKkC,MAAL,CAAY,KAAK7F,CAAL,CAAOa,MAAnB,CAAf;iBACKyI,YAAL,CAAkBhD,MAAlB,CAAyB,UAAS6B,OAAT,EAAkB;kBACrCsL,QAAF,CAAWxH,QAAX,CAAoB7K,OAApB,CAA4B,UAASiD,CAAT,EAAY;wBAChClE,GAAGyN,WAAH,CAAevJ,EAAEmJ,QAAF,CAAWC,WAA1B,EAAuC5M,MAAvC,KAAkD,IAAtD,EAA4D;gCAChD0I,SAAR;gCACQiF,SAAR,GAAoB,MAApB;gCACQsF,GAAR,CACInQ,KAAKU,EAAEmJ,QAAF,CAAWC,WAAhB,EAA6B,CAA7B,CADJ,EAEI9J,KAAKU,EAAEmJ,QAAF,CAAWC,WAAhB,EAA6B,CAA7B,CAFJ,EAEqC,CAFrC,EAEuC,CAFvC,EAEyC,IAAEnQ,KAAKM,EAFhD;gCAGQ6Q,IAAR;gCACQsF,SAAR;;iBARR;aADJ,EAYG/T,EAAEgI,MAZL;;;;WAgBD;cACG,YADH;cAAA,oBAEM;iBACAhF,CAAL,CAAO6Q,aAAP,GAAuBA,aAAvB;iBACK7T,CAAL,CAAOJ,OAAP,CAAe+T,QAAf,GAA0B,IAA1B;SAJD;iBAAA,uBAMS;0BACM7R,IAAd,CAAmB,IAAnB;SAPD;YAAA,gBASEkK,KATF,EASQ;cACLyH,QAAF,GAAazH,KAAb;SAVD;cAAA,kBAYIhG,GAZJ,EAYS;cACNgC,MAAF,GAAWhC,GAAX;;KAbR;;;ACvBJ,kBAAe,YAAW;QAChBhG,IAAI,EAACgU,WAAW,IAAZ,EAAkBC,OAAO,EAAzB,EAAV;;WAEO;cACG,aADH;cAAA,oBAEM;iBACAjU,CAAL,CAAOJ,OAAP,CAAesU,SAAf,GAA2B,IAA3B;SAHD;kBAAA,wBAKU;gBACL,CAAC,KAAKlU,CAAL,CAAOC,IAAR,IAAgB,KAAKD,CAAL,CAAOJ,OAAP,CAAesU,SAAnC,EAA8C;oBACtCrT,eAAJ;oBACM8C,OAAO,KAAK3D,CAAL,CAAO2D,IAApB;oBACI3D,EAAEiU,KAAF,CAAQhT,MAAR,IAAkB,CAAtB,EAAyB;6BACZ,KAAKjB,CAAL,CAAO2D,IAAP,CAAYkC,MAAZ,CAAmB,KAAK7F,CAAL,CAAOa,MAA1B,CAAT;wBACMsT,UAAUnU,EAAEgU,SAAF,CAAY/H,QAAZ,CAAqB/H,MAArB,CAA4B,UAASG,CAAT,EAAY;+BAC7ClE,GAAGyN,WAAH,CAAevJ,EAAEmJ,QAAF,CAAWC,WAA1B,EAAuC5M,MAAvC,KAAkD,IAAzD;qBADY,CAAhB;wBAGMwD,IAAI8P,QAAQ7W,KAAK8W,KAAL,CAAW9W,KAAK+W,MAAL,MAAiBF,QAAQlT,MAAR,GAAe,CAAhC,CAAX,CAAR,CAAV;sBACEgT,KAAF,CAAQrR,IAAR,CAAa,EAACmB,GAAG,GAAJ,EAAS5F,GAAGkG,EAAEmJ,QAAF,CAAWC,WAAvB,EAAb;;oBAEElP,IAAIyB,EAAEiU,KAAF,CAAQ,CAAR,CAAV;oBACI9T,GAAGyN,WAAH,CAAerP,EAAEJ,CAAjB,EAAoB,KAAK6B,CAAL,CAAO2D,IAAP,CAAYkC,MAAZ,CAAmB,KAAK7F,CAAL,CAAOa,MAA1B,CAApB,IAAyD,IAA7D,EAAmE;sBAC7DoT,KAAF,CAAQhS,KAAR;iBADJ,MAEO;wBACC,CAAC,KAAKjC,CAAL,CAAOJ,OAAP,CAAeiJ,IAApB,EAA0B;6BACjB7I,CAAL,CAAO6D,OAAP,CAAe,OAAf;;yBAECyF,YAAL,CAAkBhD,MAAlB,CAAyB,UAAS6B,OAAT,EAAkB;gCAC/BoB,SAAR;gCACQiF,SAAR,GAAoB,MAApB;gCACQsF,GAAR,CACInQ,KAAKpF,EAAEJ,CAAP,EAAU,CAAV,CADJ,EAEIwF,KAAKpF,EAAEJ,CAAP,EAAU,CAAV,CAFJ,EAEkBI,EAAEwF,CAFpB,EAEsB,CAFtB,EAEwB,IAAEzG,KAAKM,EAF/B;gCAGQ6Q,IAAR;gCACQsF,SAAR;0BACEhQ,CAAF,GAAMxF,EAAEwF,CAAF,GAAM,GAAZ;4BACIxF,EAAEwF,CAAF,GAAI,CAAR,EAAW;8BACLkQ,KAAF,CAAQhS,KAAR;yBADJ,MAEO,IAAIjC,EAAEiU,KAAF,CAAQhT,MAAR,GAAe,CAAnB,EAAsB;gCACnBoD,KAAIrE,EAAEiU,KAAF,CAAQhS,KAAR,EAAV;8BACEgS,KAAF,CAAQrR,IAAR,CAAayB,EAAb;;qBAbR,EAeGrE,EAAEgI,MAfL;;;SAxBT;YAAA,gBA2CEgE,KA3CF,EA2CQ;cACLgI,SAAF,GAAchI,KAAd;SA5CD;cAAA,kBA8CIhG,GA9CJ,EA8CS;cACNgC,MAAF,GAAWhC,GAAX;;KA/CR;;;ACHJ,kBAAe,YAAW;;QAEhBhG,IAAI,EAACE,KAAI,IAAL,EAAW8T,WAAW,IAAtB,EAA4BM,OAAO,IAAnC,EAAV;;aAESC,WAAT,GAAuB;UACjBrU,GAAF,CAAME,SAAN,CAAgB,QAAhB,EAA0BmI,MAA1B;YACIvI,EAAEgU,SAAF,IAAe,KAAKhU,CAAL,CAAOJ,OAAP,CAAesU,SAAlC,EAA6C;gBACnCxV,IAAIsB,EAAEE,GAAF,CAAMkD,MAAN,CAAa,GAAb,EAAkB7C,IAAlB,CAAuB,OAAvB,EAA+B,OAA/B,CAAV;cACE+T,KAAF,GAAU5V,EAAE0B,SAAF,CAAY,SAAZ,EACL4L,IADK,CACAhM,EAAEgU,SAAF,CAAY/H,QADZ,EACsBiB,KADtB,GAC8B9J,MAD9B,CACqC,QADrC,EAEL7C,IAFK,CAEA,OAFA,EAES,QAFT,EAGLA,IAHK,CAGA,IAHA,EAGM,UAAC8D,CAAD,EAAGuH,CAAH;iCAAiBA,CAAjB;aAHN,CAAV;;iBAKK5L,CAAL,CAAOiU,KAAP,GAAevV,EAAE0B,SAAF,CAAY,SAAZ,CAAf;oBACQ0B,IAAR,CAAa,IAAb;oBACQA,IAAR,CAAa,IAAb;mBACO,KAAK9B,CAAL,CAAOiU,KAAd;;;;aAICO,OAAT,GAAmB;YACXC,QAAQzU,EAAEsU,KAAF,CAAQG,KAAR,GAAgBvQ,MAAhB,CAAuB;mBAAKG,EAAEuD,KAAF,CAAQ8M,OAAR,IAAiB,QAAtB;SAAvB,CAAZ;YACID,MAAMxT,MAAN,GAAa,CAAjB,EAAoB;eACbZ,MAAH,OAAcoU,MAAMnX,KAAK8W,KAAL,CAAW9W,KAAK+W,MAAL,MAAiBI,MAAMxT,MAAN,GAAa,CAA9B,CAAX,CAAN,EAAoDgG,EAAlE,EACK1G,IADL,CACU,GADV,EACe,CADf,EAEKA,IAFL,CAEU,QAFV,EAEoB,MAFpB,EAGKA,IAHL,CAGU,gBAHV,EAG4B,CAH5B,EAIKA,IAJL,CAIU,cAJV,EAI0B,MAJ1B,EAKCyQ,UALD,GAMCC,QAND,CAMU,IANV,EAOK1Q,IAPL,CAOU,GAPV,EAOe,EAPf,EAQKA,IARL,CAQU,MARV,EAQkB,MARlB,EASKA,IATL,CASU,cATV,EAS0B,OAT1B;;;;aAaCsD,OAAT,GAAmB;YACX,KAAK7D,CAAL,CAAOC,IAAP,IAAa,IAAjB,EAAuB;iBACdD,CAAL,CAAOiU,KAAP,CAAarM,KAAb,CAAmB,SAAnB,EAA8B,MAA9B;SADJ,MAEO,IAAI,CAAC,KAAK5H,CAAL,CAAOC,IAAR,IAAgB,KAAKD,CAAL,CAAOiU,KAAvB,IAAgC,KAAKjU,CAAL,CAAOJ,OAAP,CAAesU,SAAnD,EAA8D;gBAC3DvQ,OAAO,KAAK3D,CAAL,CAAO2D,IAApB;gBACM9C,SAAS,KAAKb,CAAL,CAAO2D,IAAP,CAAYkC,MAAZ,CAAmB,KAAK7F,CAAL,CAAOa,MAA1B,CAAf;iBACKb,CAAL,CAAOiU,KAAP,CACC1T,IADD,CACM,IADN,EACY;uBAAKoD,KAAKU,EAAEmJ,QAAF,CAAWC,WAAhB,EAA6B,CAA7B,CAAL;aADZ,EAEClN,IAFD,CAEM,IAFN,EAEY;uBAAKoD,KAAKU,EAAEmJ,QAAF,CAAWC,WAAhB,EAA6B,CAA7B,CAAL;aAFZ,EAGC7F,KAHD,CAGO,SAHP,EAGkB,UAASvD,CAAT,EAAY;uBACnBlE,GAAGyN,WAAH,CAAevJ,EAAEmJ,QAAF,CAAWC,WAA1B,EAAuC5M,MAAvC,IAAiD,IAAjD,GAAwD,MAAxD,GAAiE,QAAxE;aAJJ;;;;WASD;cACG,aADH;cAAA,oBAEM;;;iBACAmC,CAAL,CAAOuR,WAAP,GAAqBA,WAArB;iBACKvU,CAAL,CAAOJ,OAAP,CAAesU,SAAf,GAA2B,IAA3B;wBACY;uBAAOM,QAAQ1S,IAAR,OAAP;aAAZ,EAAuC,IAAvC;cACE5B,GAAF,GAAQ,KAAKF,CAAL,CAAOE,GAAf;SAND;iBAAA,uBAQS;oBACA4B,IAAR,CAAa,IAAb;SATD;YAAA,gBAWEkK,KAXF,EAWQ;cACLgI,SAAF,GAAchI,KAAd;SAZD;iBAAA,qBAcOlN,CAdP,EAcU;gBACLA,CAAJ,EAAO;kBACDA,CAAF,GAAMA,CAAN;kBACEoB,GAAF,GAAQC,GAAGC,SAAH,CAAatB,CAAb,CAAR;;mBAEGkB,EAAEE,GAAT;;KAnBR;;;ACnDJ,mBAAe,YAAW;QAChBF,IAAI,EAACyP,cAAc,IAAf,EAAV;;aAESkF,cAAT,GAA0B;YAClB,CAAC3U,EAAEyP,YAAP,EAAqB;gBACXmF,QAAQ,KAAK5U,CAAL,CAAO2D,IAAP,CAAYF,KAAZ,EAAd;gBACMoR,SAAiB,IAAItO,MAAM0J,cAAV,CAAyB2E,KAAzB,EAAgC,GAAhC,EAAqC,GAArC,CAAvB;gBACME,iBAAiB,IAAIvO,MAAMwO,kBAAV,CAA6B,EAACC,WAAW,KAAZ,EAA7B,CAAvB;gBACMC,aAAiB,IAAI1O,MAAM8J,IAAV,CAAewE,MAAf,EAAuBC,cAAvB,CAAvB;;;gBAGMI,OAAO,IAAI3O,MAAM0J,cAAV,CAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,CAAb;gBACMkF,OAAO,IAAI5O,MAAM0J,cAAV,CAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,CAAb;gBACMmF,OAAO,IAAI7O,MAAM0J,cAAV,CAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,CAAb;iBACKtL,SAAL,CAAe,CAAf,EAAkB,CAAlB,EAAqBiQ,KAArB;iBACKjQ,SAAL,CAAeiQ,KAAf,EAAsB,CAAtB,EAAyB,CAAzB;iBACKjQ,SAAL,CAAe,CAAf,EAAiB,CAACiQ,KAAlB,EAAyB,CAAzB;gBACMS,eAAe,IAAI9O,MAAM4J,iBAAV,CAA4B,EAACmF,OAAO,MAAR,EAA5B,CAArB;gBACMC,eAAe,IAAIhP,MAAM4J,iBAAV,CAA4B,EAACmF,OAAO,KAAR,EAA5B,CAArB;gBACME,eAAe,IAAIjP,MAAM4J,iBAAV,CAA4B,EAACmF,OAAO,OAAR,EAA5B,CAArB;gBACMG,WAAW,IAAIlP,MAAM8J,IAAV,CAAe6E,IAAf,EAAqBG,YAArB,CAAjB;gBACMK,WAAW,IAAInP,MAAM8J,IAAV,CAAe8E,IAAf,EAAqBI,YAArB,CAAjB;gBACMI,WAAW,IAAIpP,MAAM8J,IAAV,CAAe+E,IAAf,EAAqBI,YAArB,CAAjB;;cAEE/F,YAAF,GAAiB,IAAIlJ,MAAMqP,QAAV,EAAjB;cACEnG,YAAF,CAAenI,GAAf,CAAmB2N,UAAnB,EAA+BQ,QAA/B,EAAyCC,QAAzC,EAAmDC,QAAnD;;mBAEO7T,IAAP,CAAY,IAAZ;iBACKwO,aAAL,CAAmBC,SAAnB,CAA6BvQ,EAAEyP,YAA/B;;;;aAIC3L,MAAT,GAAkB;YACR0M,KAAK,KAAKxQ,CAAL,CAAO2D,IAAP,CAAYG,MAAZ,EAAX;WACG,CAAH,KAAS,EAAT;YACMrE,KAAK,KAAKO,CAAL,CAAO/B,MAAP,CAAcuS,EAAd,CAAX;YACMC,KAAK,IAAIlK,MAAMmK,UAAV,CAAqB,CAACjR,GAAG,CAAH,CAAtB,EAA6BA,GAAG,CAAH,CAA7B,EAAoCA,GAAG,CAAH,CAApC,EAA2CA,GAAG,CAAH,CAA3C,CAAX;UACEgQ,YAAF,CAAekB,yBAAf,CAAyCF,EAAzC;;;WAGG;cACG,cADH;cAAA,oBAEM;iBACAzQ,CAAL,CAAOJ,OAAP,CAAeiW,eAAf,GAAiC,IAAjC;2BACe/T,IAAf,CAAoB,IAApB;SAJD;iBAAA,uBAMS;gBACJ9B,EAAEyP,YAAN,EAAoB;uBACT3N,IAAP,CAAY,IAAZ;;;KARZ;;;ACxCJ,qBAAe,UAACgM,QAAD,EAAc;QACnB9N,IAAI,EAAC8V,SAAS,EAAV,EAAV;WACO;cACG,eADH;cAAA,oBAEM;;;gBACCC,KAAK,KAAKC,QAAhB;gBACMC,KAAKtW,QAAQuW,OAAnB;eACGD,GAAGlN,gBAAH,CAAoB,EAApB,CAAH;eACGkN,GAAGE,gBAAH,EAAH;eACGF,GAAGG,eAAH,EAAH;eACGH,GAAGI,YAAH,EAAH;eACGJ,GAAGK,WAAH,EAAH;eACGL,GAAG3M,YAAH,EAAH;eACG2M,GAAGM,eAAH,EAAH;eACGN,GAAGnH,WAAH,CAAehB,QAAf,CAAH;;iBAEKxE,YAAL,CAAkBlJ,SAAlB,CAA4B,SAA5B;iBACKoW,KAAL,CAAW;uBAAM,MAAK1T,OAAL,EAAN;aAAX;;cAEElD,OAAF,GAAY,KAAKyW,YAAL,CAAkBI,GAAlB,EAAZ;cACEC,WAAF,GAAgB,eAAO;oBACb1Q,MAAM2Q,IAAInV,KAAJ,CAAU,GAAV,CAAZ;oBACIoV,MAAM5Q,IAAI,CAAJ,CADV;oBAEI6Q,UAAW,EAFf;oBAGIjX,UAAUI,EAAEJ,OAHhB;wBAIQgX,GAAR,IAAe,CAAChX,QAAQgX,GAAR,CAAhB;wBACQA,GAAR,IAAgBhX,QAAQgX,GAAR,CAAhB;oBACIA,OAAK,eAAT,EACIC,QAAQC,QAAR,GAAmB,KAAnB;sBACCT,YAAL,CAAkBI,GAAlB,CAAsBI,OAAtB;aATJ;;cAYEf,OAAF,GAAY,CACR,uBADQ,EAER,mCAFQ,EAGR,wBAHQ,EAIR,gBAJQ,EAKVtJ,GALU,CAKN;uBAAKnI,EAAE7C,KAAF,CAAQ,GAAR,CAAL;aALM,CAAZ;gBAMMuV,MAAM5W,GAAGE,MAAH,CAAU,cAAV,CAAZ;gBACID,SAAJ,CAAc,QAAd,EAAwB4L,IAAxB,CAA6BhM,EAAE8V,OAA/B,EAAwC5I,KAAxC,GAAgD9J,MAAhD,CAAuD,QAAvD,EACKkI,IADL,CACU;uBAAKjH,EAAE,CAAF,CAAL;aADV,EAEKkB,EAFL,CAEQ,OAFR,EAEiB;uBAAKvF,EAAE0W,WAAF,CAAc5U,IAAd,QAAyBuC,EAAEqI,IAAF,CAAO,GAAP,CAAzB,CAAL;aAFjB;SArCD;kBAAA,sBAyCQoJ,OAzCR,EAyCiB;;;cACdA,OAAF,CAAUlT,IAAV,CAAekT,OAAf;cACElW,OAAF,GAAY,KAAKyW,YAAL,CAAkBI,GAAlB,EAAZ;;gBAEMM,MAAM5W,GAAGE,MAAH,CAAU,cAAV,CAAZ;gBACID,SAAJ,CAAc,QAAd,EAAwB4L,IAAxB,CAA6BhM,EAAE8V,OAA/B,EAAwC5I,KAAxC,GAAgD9J,MAAhD,CAAuD,QAAvD,EACKkI,IADL,CACU;uBAAKjH,EAAE,CAAF,CAAL;aADV,EAEKkB,EAFL,CAEQ,OAFR,EAEiB;uBAAKvF,EAAE0W,WAAF,CAAc5U,IAAd,SAAyBuC,EAAEqI,IAAF,CAAO,GAAP,CAAzB,CAAL;aAFjB;;KA9CR;CAFJ;;AC0BAsK,UAAId,OAAJ,GAAa;sCAAA;oCAAA;gCAAA;8BAAA;4BAAA;8BAAA;oCAAA;oCAAA;oCAAA;sCAAA;8CAAA;sCAAA;8BAAA;4BAAA;4BAAA;8BAAA;8BAAA;gCAAA;wBAAA;0BAAA;0BAAA;4BAAA;4BAAA;8BAAA;;CAAb,CA2BA;;;;"}