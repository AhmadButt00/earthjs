{"version":3,"file":"earthjs.js","sources":["../src/versor.js","../src/earthjs.js","../src/plugins/versorDragPlugin.js","../src/plugins/wheelZoomPlugin.js","../src/plugins/threejsPlugin.js","../src/plugins/canvasPlugin.js","../src/plugins/oceanPlugin.js","../src/plugins/configPlugin.js","../src/plugins/graticuleCanvas.js","../src/plugins/graticulePlugin.js","../src/plugins/fauxGlobePlugin.js","../src/plugins/autorotatePlugin.js","../src/plugins/placesPlugin.js","../src/plugins/worldCanvas.js","../src/plugins/worldPlugin.js","../src/plugins/worldThreejs.js","../src/plugins/centerPlugin.js","../src/plugins/countryTooltipPlugin.js","../src/plugins/flattenPlugin.js","../src/plugins/barPlugin.js","../src/plugins/debugThreejs.js","../src/pluginLoader/commonPlugins.js","../index.js"],"sourcesContent":["// Version 0.0.0. Copyright 2017 Mike Bostock.\nexport default function() {\n    var acos = Math.acos,\n        asin = Math.asin,\n        atan2 = Math.atan2,\n        cos = Math.cos,\n        max = Math.max,\n        min = Math.min,\n        PI = Math.PI,\n        sin = Math.sin,\n        sqrt = Math.sqrt,\n        radians = PI / 180,\n        degrees = 180 / PI;\n\n    // Returns the unit quaternion for the given Euler rotation angles [λ, φ, γ].\n    function versor(e) {\n      var l = e[0] / 2 * radians, sl = sin(l), cl = cos(l), // λ / 2\n          p = e[1] / 2 * radians, sp = sin(p), cp = cos(p), // φ / 2\n          g = e[2] / 2 * radians, sg = sin(g), cg = cos(g); // γ / 2\n      return [\n        cl * cp * cg + sl * sp * sg,\n        sl * cp * cg - cl * sp * sg,\n        cl * sp * cg + sl * cp * sg,\n        cl * cp * sg - sl * sp * cg\n      ];\n    }\n\n    // Returns Cartesian coordinates [x, y, z] given spherical coordinates [λ, φ].\n    versor.cartesian = function(e) {\n      var l = e[0] * radians, p = e[1] * radians, cp = cos(p);\n      return [cp * cos(l), cp * sin(l), sin(p)];\n    };\n\n    // Returns the Euler rotation angles [λ, φ, γ] for the given quaternion.\n    versor.rotation = function(q) {\n      return [\n        atan2(2 * (q[0] * q[1] + q[2] * q[3]), 1 - 2 * (q[1] * q[1] + q[2] * q[2])) * degrees,\n        asin(max(-1, min(1, 2 * (q[0] * q[2] - q[3] * q[1])))) * degrees,\n        atan2(2 * (q[0] * q[3] + q[1] * q[2]), 1 - 2 * (q[2] * q[2] + q[3] * q[3])) * degrees\n      ];\n    };\n\n    // Returns the quaternion to rotate between two cartesian points on the sphere.\n    versor.delta = function(v0, v1) {\n      var w = cross(v0, v1), l = sqrt(dot(w, w));\n      if (!l) return [1, 0, 0, 0];\n      var t = acos(max(-1, min(1, dot(v0, v1)))) / 2, s = sin(t); // t = θ / 2\n      return [cos(t), w[2] / l * s, -w[1] / l * s, w[0] / l * s];\n    };\n\n    // Returns the quaternion that represents q0 * q1.\n    versor.multiply = function(q0, q1) {\n      return [\n        q0[0] * q1[0] - q0[1] * q1[1] - q0[2] * q1[2] - q0[3] * q1[3],\n        q0[0] * q1[1] + q0[1] * q1[0] + q0[2] * q1[3] - q0[3] * q1[2],\n        q0[0] * q1[2] - q0[1] * q1[3] + q0[2] * q1[0] + q0[3] * q1[1],\n        q0[0] * q1[3] + q0[1] * q1[2] - q0[2] * q1[1] + q0[3] * q1[0]\n      ];\n    };\n\n    function cross(v0, v1) {\n      return [\n        v0[1] * v1[2] - v0[2] * v1[1],\n        v0[2] * v1[0] - v0[0] * v1[2],\n        v0[0] * v1[1] - v0[1] * v1[0]\n      ];\n    }\n\n    function dot(v0, v1) {\n      return v0[0] * v1[0] + v0[1] * v1[1] + v0[2] * v1[2];\n    }\n\n    return versor;\n}\n","import versorFn from './versor.js';\n\nvar versor = versorFn();\nexport default function (options={}) {\n    options = Object.assign({\n        select: '#earth',\n        rotate: 130,\n        height: 500,\n        width:  700,\n    }, options);\n    var _ = {\n        onResize: {},\n        onResizeKeys: [],\n\n        onRefresh: {},\n        onRefreshKeys: [],\n\n        onInterval: {},\n        onIntervalKeys: [],\n\n        renderOrder: [\n            'renderThree',\n            'svgAddDropShadow',\n            'svgAddCanvas',\n            'canvasAddGraticule',\n            'canvasAddWorldOrCountries',\n            'svgAddOcean',\n            'svgAddGlobeShading',\n            'svgAddGraticule',\n            'svgAddWorldOrCountries',\n            'svgAddGlobeHilight',\n            'svgAddPlaces',\n            'svgAddBar',\n        ],\n        ready: null,\n        loadingData: null\n    }\n    var drag = false;\n    var width = options.width;\n    var height = options.height;\n    var ltScale = d3.scaleLinear().domain([0, width]).range([-180, 180]);\n    var svg = d3.selectAll(options.select).attr(\"width\", width).attr(\"height\", height);\n    var planet = {\n        _: {\n            svg,\n            drag,\n            versor,\n            options,\n            ltScale,\n        },\n        ready: function(fn) {\n            if (fn) {\n                _.ready = fn;\n            } else {\n                return _.loadingData;\n            }\n        },\n        register: function(obj) {\n            var ar = {};\n            planet[obj.name] = ar;\n            Object.keys(obj).map(function(fn) {\n                if ([\n                    'urls',\n                    'onReady',\n                    'onInit',\n                    'onResize',\n                    'onRefresh',\n                    'onInterval'].indexOf(fn)===-1) {\n                    if (typeof(obj[fn])==='function') {\n                        ar[fn] = function() {\n                            return obj[fn].apply(planet, arguments);\n                        }\n                    }\n                }\n            });\n            if (obj.onInit) {\n                obj.onInit.call(planet);\n            }\n            qEvent(obj,'onResize');\n            qEvent(obj,'onRefresh');\n            qEvent(obj,'onInterval');\n            if (obj.urls && obj.onReady) {\n                _.loadingData = true;\n                var q = d3.queue();\n                obj.urls.forEach(function(url) {\n                    var ext = url.split('.').pop();\n                    if (ext==='geojson') {\n                        ext = 'json';\n                    }\n                    q.defer(d3[ext], url);\n                });\n                q.await(function() {\n                    obj.onReady.apply(planet, arguments);\n                    _.loadingData = false;\n                    _.ready.call(planet);\n                });\n            }\n            return planet;\n        }\n    }\n\n    planet._.defs = planet._.svg.append(\"defs\");\n    //----------------------------------------\n    var earth = null;\n    var ticker = null;\n    planet._.ticker = function(interval) {\n        interval = interval || 50;\n        ticker = setInterval(function(){\n            planet._.intervalRun.call(planet);\n            if (earth) {\n                earth.forEach(function(p) {\n                    p._.intervalRun.call(p);\n                });\n            }\n        }, interval);\n        return planet;\n    }\n\n    planet.svgDraw = function(twinEarth) {\n        earth = twinEarth;\n        _.renderOrder.forEach(function(renderer) {\n            planet[renderer] && planet[renderer].call(planet);\n        });\n        if (earth) {\n            earth.forEach(function(p) {\n                p.svgDraw(null);\n            });\n        }\n        if (ticker===null && twinEarth!==null) {\n            planet._.ticker.call(planet);\n        }\n        return planet;\n    }\n\n    //----------------------------------------\n    // Helper\n    planet._.scale = function(y) {\n        planet._.proj.scale(y);\n        planet._.resize.call(planet);\n        planet._.refresh.call(planet);\n        return planet;\n    }\n\n    planet._.rotate = function(r) {\n        planet._.proj.rotate(r);\n        planet._.refresh.call(planet);\n        return planet;\n    }\n\n    planet._.intervalRun = function() {\n        if (_.onIntervalKeys.length>0) {\n            _.onIntervalKeys.map(function(fn) {\n                _.onInterval[fn].call(planet);\n            });\n        }\n    }\n\n    planet._.refresh = function() {\n        if (_.onRefreshKeys.length>0) {\n            _.onRefreshKeys.map(function(fn) {\n                _.onRefresh[fn].call(planet);\n            });\n        }\n        return planet;\n    }\n\n    planet._.resize = function() {\n        if (_.onResizeKeys.length>0) {\n            _.onResizeKeys.map(function(fn) {\n                _.onResize[fn].call(planet);\n            });\n        }\n        return planet;\n    }\n\n    planet._.orthoGraphic = function() {\n        var width = planet._.options.width;\n        var height= planet._.options.height;\n        var rotate = planet._.options.rotate;\n        var ltRotate = planet._.ltScale(rotate);\n        return d3.geoOrthographic()\n            .scale(width / 3.5)\n            .rotate([ltRotate, 0])\n            .translate([width / 2, height / 2])\n            .precision(0.1)\n            .clipAngle(90);\n    }\n\n    planet._.addRenderer = function(name) {\n        if (_.renderOrder.indexOf(name)<0) {\n            _.renderOrder.push(name);            \n        }\n    }\n\n    planet._.proj = planet._.orthoGraphic();\n    planet._.path = d3.geoPath().projection(planet._.proj);\n    return planet;\n    //----------------------------------------\n    function qEvent(obj, qname) {\n        var qkey = qname+'Keys';\n        if (obj[qname]) {\n            _[qname][obj.name] = obj[qname];\n            _[qkey] = Object.keys(_[qname]);\n        }\n    }\n}\n","// Mike Bostock’s Block https://bl.ocks.org/mbostock/7ea1dde508cec6d2d95306f92642bc42\nexport default function() {\n    const _ = {svg:null, q: null, sync: []};\n\n    function dragSetup() {\n        const _this = this,\n        versor = this._.versor;\n        _.svg.call(d3.drag()\n            .on('start', dragstarted)\n            .on('end',   dragsended)\n            .on('drag',  dragged));\n\n        let v0, // Mouse position in Cartesian coordinates at start of drag gesture.\n            r0, // Projection rotation as Euler angles at start.\n            q0; // Projection rotation as versor at start.\n\n        function rotate(src) {\n            const r = src._.proj.rotate();\n            const d = r[0] - r0[0];\n            r[0] = d + this._.proj.rotate()[0];\n            if (r[0] >= 180)\n                r[0] -= 360;\n            this._.rotate(r);\n        }\n\n        function dragstarted() {\n            _this._.drag = true;\n            v0 = versor.cartesian(_this._.proj.invert(d3.mouse(this)));\n            r0 = _this._.proj.rotate();\n            q0 = versor(r0);\n        }\n\n        function dragged() {\n            const v1 = versor.cartesian(_this._.proj.rotate(r0).invert(d3.mouse(this))),\n                q1 = versor.multiply(q0, versor.delta(v0, v1)),\n                r1 = versor.rotation(q1);\n            _this._.rotate(r1);\n        }\n\n        function dragsended() {\n            _.sync.forEach(function(p) {\n                rotate.call(p, _this);\n            })\n            _this._.drag = false;\n        }\n    }\n\n    return {\n        name: 'versorDragPlugin',\n        onInit() {\n            _.svg = this._.svg;\n            dragSetup.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n                dragSetup.call(this);\n            }\n            return _.svg;\n        },\n        sync(arr) {\n            _.sync = arr;\n        }\n    }\n}\n","export default function() {\n    return {\n        name: 'wheelZoomPlugin',\n        onInit() {\n            const _this = this;\n            this._.svg.on('wheel', function() {\n                const y = d3.event.deltaY+_this._.proj.scale();\n                if (y>230 && y<1000) {\n                    _this._.scale(y);\n                }\n            });\n        }\n    }\n}\n","// Philippe Rivière’s https://bl.ocks.org/Fil/9ed0567b68501ee3c3fef6fbe3c81564\n// https://gist.github.com/Fil/ad107bae48e0b88014a0e3575fe1ba64\nexport default function() {\n    const _ = {renderer: null, scene: null, camera: null, scale: null};\n\n    function renderThree() {\n        setTimeout(function() {\n            _.renderer.render(_.scene, _.camera);\n        },1);\n    }\n\n    return {\n        name: 'threejsPlugin',\n        onInit() {\n            const\n                width = this._.options.width,\n                height= this._.options.height;\n            _.scene  = new THREE.Scene()\n            _.yAxis  = new THREE.Vector3(0,1,0);\n            _.camera = new THREE.OrthographicCamera(-width / 2, width / 2, height / 2, -height / 2, 0.1, 10000)\n            _.camera.position.z = 500; // (higher than RADIUS + size of the bubble)\n            this._.camera = _.camera;\n\n            // Create renderer object.\n            _.renderer = new THREE.WebGLRenderer({antialias: true});\n            _.renderer.domElement.id = 'three-js';\n            _.renderer.setClearColor('white', 1);\n            _.renderer.setSize(width, height);\n            document.body.appendChild(_.renderer.domElement)\n\n            this.renderThree = renderThree; // renderer\n        },\n        onRefresh() {\n            renderThree.call(this);\n        },\n        addObject(obj) {\n            _.scene.add(obj);\n        }\n    }\n}\n","// Bo Ericsson’s Block http://bl.ocks.org/boeric/aa80b0048b7e39dd71c8fbe958d1b1d4\nexport default () => {\n    const _ = {canvas: null, path: null, q: null}\n\n    function svgAddCanvas() {\n        if (this._.options.showCanvas) {\n            if (!_.canvas) {\n                const fObject = this._.svg.append(\"g\").attr(\"class\",\"canvas\").append(\"foreignObject\")\n                .attr(\"x\", 0)\n                .attr(\"y\", 0)\n                .attr(\"width\", this._.options.width)\n                .attr(\"height\", this._.options.height);\n                const fBody = fObject.append(\"xhtml:body\")\n                .style(\"margin\", \"0px\")\n                .style(\"padding\", \"0px\")\n                .style(\"background-color\", \"none\")\n                .style(\"width\", this._.options.width + \"px\")\n                .style(\"height\", this._.options.height + \"px\");\n                _.canvas = fBody.append(\"canvas\");\n            }\n            _.canvas\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._.options.width)\n            .attr(\"height\", this._.options.height);\n            return _.canvas;\n        }\n    }\n\n    return {\n        name: 'canvasPlugin',\n        onInit() {\n            this.svgAddCanvas = svgAddCanvas;\n            this._.options.showCanvas = true;\n            _.path = d3.geoPath().projection(this._.proj);\n        },\n        onRefresh() {\n            const width = this._.options.width,\n                height= this._.options.height;\n            _.canvas.each(function() {\n                this.getContext(\"2d\").clearRect(0, 0, width, height);\n            });\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.canvas = d3.selectAll(q);\n            }\n            return _.canvas;\n        },\n        render(fn) {\n            if (this._.options.showCanvas) {\n                const _this = this;\n                _.canvas.each(function() {\n                    const context = this.getContext(\"2d\");\n                    fn.call(_this, context, _.path.context(context));\n                });\n            }\n        }\n    }\n}\n","export default function(initOptions={}) {\n    const _ = {svg:null, q: null};\n\n    function svgAddOcean() {\n        _.svg.selectAll('#ocean,.ocean').remove();\n        if (this._.options.showOcean) {\n            const ocean_fill = this._.defs.append(\"radialGradient\")\n                .attr(\"id\", \"ocean\")\n                .attr(\"cx\", \"75%\")\n                .attr(\"cy\", \"25%\");\n            ocean_fill.append(\"stop\")\n                .attr(\"offset\", \"5%\")\n                .attr(\"stop-color\", \"#ddf\");\n            ocean_fill.append(\"stop\")\n                .attr(\"offset\", \"100%\")\n                .attr(\"stop-color\", \"#9ab\");\n            this._.ocean = _.svg.append(\"g\").attr(\"class\",\"ocean\").append(\"circle\")\n                .attr(\"cx\",this._.options.width / 2).attr(\"cy\", this._.options.height / 2)\n                .attr(\"class\", \"noclicks\");\n            resize.call(this);\n            return this._.ocean;\n        }\n    }\n\n    function resize() {\n        if (this._.ocean && this._.options.showOcean) {\n            this._.ocean.attr(\"r\", this._.proj.scale());\n        }\n    }\n\n    initOptions = Object.assign({\n        showOcean: true,\n    }, initOptions);\n\n    return {\n        name: 'oceanPlugin',\n        onInit() {\n            Object.assign(this._.options, initOptions);\n            this.svgAddOcean = svgAddOcean;\n            _.svg = this._.svg;\n        },\n        onResize() {\n            resize.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","export default function() {\n    return {\n        name: 'configPlugin',\n        set(newOpt) {\n            if (newOpt) {\n                Object.assign(this._.options, newOpt);\n                if (newOpt.spin!==undefined) {\n                    const p = this.autorotatePlugin;\n                    newOpt.spin ? p.start() : p.stop();\n                }\n                this._.drag = true;\n                this.svgDraw();\n                this._.drag = false;\n            }\n            return Object.assign({}, this._.options);\n        }\n    }\n}\n","export default function() {\n    const datumGraticule = d3.geoGraticule();\n\n    function canvasAddGraticule() {\n        if (this._.options.showGraticule) {\n            this.canvasPlugin.render(function(context, path) {\n                context.beginPath();\n                path(datumGraticule());\n                context.lineWidth = 0.3;\n                context.strokeStyle = 'rgba(119,119,119,0.4)';\n                context.stroke();\n            });\n        }\n    }\n\n    return {\n        name: 'graticuleCanvas',\n        onInit() {\n            this.canvasAddGraticule = canvasAddGraticule;\n            this._.options.showGraticule = true;\n        },\n        onRefresh() {\n            canvasAddGraticule.call(this);\n        }\n    }\n}\n","export default function() {\n    const datumGraticule = d3.geoGraticule();\n    const _ = {svg:null, q: null}\n\n    function svgAddGraticule() {\n        _.svg.selectAll('.graticule').remove();\n        if (this._.options.showGraticule) {\n            this._.graticule = _.svg.append(\"g\").attr(\"class\",\"graticule\").append(\"path\")\n                .datum(datumGraticule)\n                .attr(\"class\", \"noclicks\");\n            refresh.call(this);\n            return this._.graticule;\n        }\n    }\n\n    function refresh() {\n        if (this._.graticule && this._.options.showGraticule) {\n            this._.graticule.attr(\"d\", this._.path);\n        }\n    }\n\n    return {\n        name: 'graticulePlugin',\n        onInit() {\n            this.svgAddGraticule = svgAddGraticule;\n            this._.options.showGraticule = true;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","// Derek Watkins’s Block http://bl.ocks.org/dwtkns/4686432\n//\nexport default function(initOptions={}) {\n    const _ = {svg:null, q: null};\n\n    function svgAddDropShadow() {\n        _.svg.selectAll('#drop_shadow,.drop_shadow').remove();\n        if (this._.options.showGlobeShadow) {\n            const drop_shadow = this._.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"drop_shadow\")\n                  .attr(\"cx\", \"50%\")\n                  .attr(\"cy\", \"50%\");\n                drop_shadow.append(\"stop\")\n                  .attr(\"offset\",\"20%\").attr(\"stop-color\", \"#000\")\n                  .attr(\"stop-opacity\",\".5\")\n                drop_shadow.append(\"stop\")\n                  .attr(\"offset\",\"100%\").attr(\"stop-color\", \"#000\")\n                  .attr(\"stop-opacity\",\"0\")\n            this._.dropShadow = _.svg.append(\"g\").attr(\"class\",\"drop_shadow\").append(\"ellipse\")\n                  .attr(\"cx\", this._.options.width/2).attr(\"cy\", this._.options.height-50)\n                  .attr(\"rx\", this._.proj.scale()*0.90)\n                  .attr(\"ry\", this._.proj.scale()*0.25)\n                  .attr(\"class\", \"noclicks\")\n                  .style(\"fill\", \"url(#drop_shadow)\");\n            this._.dropShadow;\n        }\n    }\n\n    function svgAddGlobeShading() {\n        _.svg.selectAll('#shading,.shading').remove();\n        if (this._.options.showGlobeShading) {\n            const globe_shading = this._.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"shading\")\n                  .attr(\"cx\", \"50%\")\n                  .attr(\"cy\", \"40%\");\n                globe_shading.append(\"stop\")\n                  .attr(\"offset\",\"50%\").attr(\"stop-color\", \"#9ab\")\n                  .attr(\"stop-opacity\",\"0\")\n                globe_shading.append(\"stop\")\n                  .attr(\"offset\",\"100%\").attr(\"stop-color\", \"#3e6184\")\n                  .attr(\"stop-opacity\",\"0.3\")\n            this._.globeShading = _.svg.append(\"g\").attr(\"class\",\"shading\").append(\"circle\")\n                .attr(\"cx\", this._.options.width / 2).attr(\"cy\", this._.options.height / 2)\n                .attr(\"r\",  this._.proj.scale())\n                .attr(\"class\",\"noclicks\")\n                .style(\"fill\", \"url(#shading)\");\n            return this._.globeShading;\n        }\n    }\n\n    function svgAddGlobeHilight() {\n        _.svg.selectAll('#hilight,.hilight').remove();\n        if (this._.options.showGlobeHilight) {\n            const globe_highlight = this._.defs.append(\"radialGradient\")\n                  .attr(\"id\", \"hilight\")\n                  .attr(\"cx\", \"75%\")\n                  .attr(\"cy\", \"25%\");\n                globe_highlight.append(\"stop\")\n                  .attr(\"offset\", \"5%\").attr(\"stop-color\", \"#ffd\")\n                  .attr(\"stop-opacity\",\"0.6\");\n                globe_highlight.append(\"stop\")\n                  .attr(\"offset\", \"100%\").attr(\"stop-color\", \"#ba9\")\n                  .attr(\"stop-opacity\",\"0.2\");\n            this._.globeHilight = _.svg.append(\"g\").attr(\"class\",\"hilight\").append(\"circle\")\n                .attr(\"cx\", this._.options.width / 2).attr(\"cy\", this._.options.height / 2)\n                .attr(\"r\",  this._.proj.scale())\n                .attr(\"class\",\"noclicks\")\n                .style(\"fill\", \"url(#hilight)\");\n            return this._.globeHilight;\n        }\n    }\n\n    initOptions = Object.assign({\n        showGlobeShadow: true,\n        showGlobeShading: true,\n        showGlobeHilight: true,\n    }, initOptions);\n\n    return {\n        name: 'fauxGlobePlugin',\n        onInit() {\n            Object.assign(this._.options, initOptions);\n            this.svgAddDropShadow = svgAddDropShadow;\n            this.svgAddGlobeHilight = svgAddGlobeHilight;\n            this.svgAddGlobeShading = svgAddGlobeShading;\n            _.svg = this._.svg;\n        },\n        onResize() {\n            if (this._.globeShading && this._.options.showGlobeShading) {\n                this._.globeShading.attr(\"r\", this._.proj.scale());\n            }\n            if (this._.globeHilight && this._.options.showGlobeHilight) {\n                this._.globeHilight.attr(\"r\", this._.proj.scale());\n            }\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        }\n    }\n}\n","export default degPerSec => {\n    const _ = {\n        spin: true,\n        lastTick: null,\n        degree: degPerSec,\n        sync: []\n    }\n\n    function rotate(delta) {\n        const r = this._.proj.rotate();\n        r[0] += _.degree * delta / 1000;\n        if (r[0] >= 180)\n            r[0] -= 360;\n        this._.rotate(r);\n    }\n\n    return {\n        name: 'autorotatePlugin',\n        onInit() {\n            this._.options.spin = true;\n        },\n        onInterval() {\n            const now = new Date();\n            if (!_.lastTick || !_.spin || this._.drag) {\n                _.lastTick = now;\n            } else {\n                const delta = now - _.lastTick;\n                rotate.call(this, delta);\n                _.sync.forEach(p => rotate.call(p, delta));\n                _.lastTick = now;\n            }\n        },\n        speed(degPerSec) {\n            _.degree = degPerSec;\n        },\n        start() {\n            _.spin = true;\n        },\n        stop() {\n            _.spin = false;\n        },\n        sync(arr) {\n            _.sync = arr;\n        }\n    };\n}\n","export default function(urlPlaces) {\n    const _ = {svg:null, q: null, places: null};\n\n    function svgAddPlaces() {\n        _.svg.selectAll('.points,.labels').remove();\n        if (_.places) {\n            if (this._.options.showPlaces) {\n                svgAddPlacePoints.call(this);\n                svgAddPlaceLabels.call(this);\n                refresh.call(this);\n            }\n        }\n    }\n\n    function refresh() {\n        if (this._.placePoints) {\n            this._.placePoints.attr(\"d\", this._.path);\n            position_labels.call(this);\n        }\n    }\n\n    function svgAddPlacePoints() {\n        this._.placePoints = _.svg.append(\"g\").attr(\"class\",\"points\").selectAll(\"path\")\n            .data(_.places.features).enter().append(\"path\")\n            .attr(\"class\", \"point\");\n        return this._.placePoints;\n    }\n\n    function svgAddPlaceLabels() {\n        this._.placeLabels = _.svg.append(\"g\").attr(\"class\",\"labels\").selectAll(\"text\")\n            .data(_.places.features).enter().append(\"text\")\n            .attr(\"class\", \"label\")\n            .text(function(d) { return d.properties.name });\n        return this._.placeLabels;\n    }\n\n    function position_labels() {\n        const _this = this;\n        const centerPos = this._.proj.invert([this._.options.width / 2, this._.options.height/2]);\n\n        this._.placeLabels\n            .attr(\"text-anchor\",function(d) {\n                const x = _this._.proj(d.geometry.coordinates)[0];\n                return x < _this._.options.width/2-20 ? \"end\" :\n                       x < _this._.options.width/2+20 ? \"middle\" :\n                       \"start\"\n            })\n            .attr(\"transform\", function(d) {\n                const loc = _this._.proj(d.geometry.coordinates),\n                    x = loc[0],\n                    y = loc[1];\n                const offset = x < _this._.options.width/2 ? -5 : 5;\n                return \"translate(\" + (x+offset) + \",\" + (y-2) + \")\"\n            })\n            .style(\"display\", function(d) {\n                return d3.geoDistance(d.geometry.coordinates, centerPos) > 1.57 ? 'none' : 'inline';\n            });\n    }\n\n    return {\n        name: 'placesPlugin',\n        urls: urlPlaces && [urlPlaces],\n        onReady(err, places) {\n            _.places = places;\n        },\n        onInit() {\n            this._.options.showPlaces = true;\n            this.svgAddPlaces = svgAddPlaces;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(p) {\n            if (p) {\n                const data = p.placesPlugin.data()\n                _.places = data.places;\n            } else {\n                return {places: _.places}\n            }\n        }\n    };\n}\n","// John J Czaplewski’s Block http://bl.ocks.org/jczaplew/6798471\nexport default function(urlWorld, urlCountryNames) {\n    const _ = {world: null, countryNames: null, style: {}};\n\n    function canvasAddWorldOrCountries() {\n        if (this._.options.showLand) {\n            if (_.world) {\n                canvasAddWorld.call(this);\n                if (this._.options.showCountries) {\n                    canvasAddCountries.call(this);\n                }\n                if (this._.options.showLakes) {\n                    canvasAddLakes.call(this);\n                }\n            }\n        }\n    }\n\n    function canvasAddWorld() {\n        const land = topojson.feature(_.world, _.world.objects.land);\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(land);\n            context.fillStyle = _.style.land || 'rgba(117, 87, 57, 0.4)';\n            context.fill();\n        });\n    }\n\n    function canvasAddCountries() {\n        const countries = topojson.feature(_.world, _.world.objects.countries);\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(countries);\n            context.lineWidth = 0.5;\n            context.strokeStyle = _.style.countries || 'rgba(80, 64, 39, 0.6)';\n            context.stroke();\n        });\n    }\n\n    function canvasAddLakes() {\n        const lakes = topojson.feature(_.world, _.world.objects.ne_110m_lakes);\n        this.canvasPlugin.render(function(context, path) {\n            context.beginPath();\n            path(lakes);\n            context.fillStyle = _.style.lakes || 'rgba(80, 87, 97, 0.4)';\n            context.fill();\n        });\n    }\n\n    let urls = null;\n    if (urlWorld) {\n        urls = [urlWorld];\n        if (urlCountryNames) {\n            urls.push(urlCountryNames);\n        }\n    }\n\n    return {\n        name: 'worldCanvas',\n        urls: urls,\n        onReady(err, world, countryNames) {\n            _.world = world;\n            _.countryNames = countryNames;\n        },\n        onInit() {\n            this._.options.showLand = true;\n            this._.options.showLakes = true;\n            this._.options.showCountries = true;\n            this.canvasAddWorldOrCountries = canvasAddWorldOrCountries;\n        },\n        onRefresh() {\n            canvasAddWorldOrCountries.call(this);\n        },\n        data(p) {\n            if (p) {\n                const data = p.worldCanvas.data()\n                _.countryNames = data.countryNames;\n                _.world = data.world;\n            } else {\n                return {\n                    countryNames: _.countryNames,\n                    world: _.world\n                }\n            }\n        },\n        style(s) {\n            if (s) {\n                _.style = s;\n            }\n            return _.style;\n        }\n    }\n}\n","export default function(urlWorld, urlCountryNames) {\n    const _ = {svg:null, q: null, world: null, countryNames: null};\n    const countryClick = function() {\n        // console.log(d);\n    }\n\n    function svgAddWorldOrCountries() {\n        _.svg.selectAll('.land,.lakes,.countries').remove();\n        if (this._.options.showLand) {\n            if (_.world) {\n                if (this._.options.showCountries) {\n                    this.svgAddCountries.call(this);\n                } else {\n                    this.svgAddWorld.call(this);\n                }\n                if (this._.options.showLakes) {\n                    this.svgAddLakes.call(this);\n                }\n            }\n            // render to correct position\n            refresh.call(this);\n        }\n    }\n\n    function refresh() {\n        if (_.world && this._.options.showLand) {\n            if (this._.options.showCountries) {\n                this._.countries.attr(\"d\", this._.path);\n            } else {\n                this._.world.attr(\"d\", this._.path);\n            }\n            if (this._.options.showLakes) {\n                this._.lakes.attr(\"d\", this._.path);\n            }\n        }\n    }\n\n    function svgAddWorld() {\n        const land = topojson.feature(_.world, _.world.objects.land);\n\n        this._.world = _.svg.append(\"g\").attr(\"class\",\"land\").append(\"path\")\n            .datum(land);\n        return this._.world;\n    }\n\n    function svgAddCountries() {\n        const countries = topojson.feature(_.world, _.world.objects.countries).features;\n\n        this._.countries = _.svg.append(\"g\").attr(\"class\",\"countries\").selectAll(\"path\")\n            .data(countries).enter().append(\"path\").on('click', countryClick)\n                .attr(\"id\",function(d) {return 'x'+d.id});\n        return this._.countries;\n    }\n\n    function svgAddLakes() {\n        const lakes = topojson.feature(_.world, _.world.objects.ne_110m_lakes);\n\n        this._.lakes = _.svg.append(\"g\").attr(\"class\",\"lakes\").append(\"path\")\n            .datum(lakes);\n        return this._.lakes;\n    }\n\n    let urls = null;\n    if (urlWorld) {\n        urls = [urlWorld];\n        if (urlCountryNames) {\n            urls.push(urlCountryNames);\n        }\n    }\n    return {\n        name: 'worldPlugin',\n        urls: urls,\n        onReady(err, world, countryNames) {\n            _.world = world;\n            _.countryNames = countryNames;\n\n        },\n        onInit() {\n            this._.options.showLand = true;\n            this._.options.showLakes = true;\n            this._.options.showCountries = true;\n            this.svgAddWorldOrCountries = svgAddWorldOrCountries;\n            this.svgAddCountries = svgAddCountries;\n            this.svgAddLakes = svgAddLakes;\n            this.svgAddWorld = svgAddWorld;\n            _.svg = this._.svg;\n        },\n        onRefresh() {\n            refresh.call(this);\n        },\n        countries() {\n            return topojson.feature(_.world, _.world.objects.countries).features;\n        },\n        countryName(d) {\n            let cname = '';\n            if (_.countryNames) {\n                cname = _.countryNames.find(function(x) {\n                    return x.id==d.id;\n                });\n            }\n            return cname;\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(p) {\n            if (p) {\n                const data = p.worldPlugin.data()\n                _.countryNames = data.countryNames;\n                _.world = data.world;\n            } else {\n                return {\n                    countryNames: _.countryNames,\n                    world: _.world\n                }\n            }\n        }\n    };\n}\n","export default function() {\n    const _ = {sphereObject: null};\n\n    function addWorld() {\n        if (!_.sphereObject) {\n            const _this  = this;\n            const group  = new THREE.Group();\n            const loader = new THREE.TextureLoader();\n            loader.load(\"./d/world.jpg\", function(texture) {\n                const geometry   = new THREE.SphereGeometry( 200, 20, 20 );\n                const material   = new THREE.MeshBasicMaterial( { map: texture, overdraw: 0.5 } );\n                _.sphereObject = new THREE.Mesh( geometry, material );\n                group.add(_.sphereObject);\n                rotate.call(_this);\n            });\n            _this.threejsPlugin.addObject(group);\n        }\n    }\n\n    function rotate() {\n        const rt = this._.proj.rotate();\n        rt[0] -= 90;\n        const q1 = this._.versor(rt);\n        const q2 = new THREE.Quaternion(-q1[2], q1[1], q1[3], q1[0]);\n        _.sphereObject.setRotationFromQuaternion(q2);\n    }\n\n    return {\n        name: 'worldThreejs',\n        onInit() {\n            addWorld.call(this);\n        },\n        onRefresh() {\n            if (_.sphereObject) {\n                rotate.call(this);\n            }\n        }\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default () => {\n    const _ = {focused: null, svgAddCountriesOld: null}\n\n    function country(cnt, id) {\n        id = id.replace('x', '');\n        for(let i=0, l=cnt.length; i<l; i++) {\n            if(cnt[i].id == id) {return cnt[i];}\n        }\n    }\n\n    function transition(p) {\n        d3.transition()\n        .duration(2500)\n        .tween(\"rotate\", () => {\n            const  r = d3.interpolate(this._.proj.rotate(), [-p[0], -p[1]]);\n            return t => {\n                this._.rotate(r(t));\n            };\n        })\n    }\n\n    function svgAddCountries() {\n        const _this = this;\n        const countries = _.svgAddCountriesOld.call(this);\n        countries.on(\"click\", function() {\n            const id = this.id.replace('x', '');\n            const c = _this.worldPlugin.countries();\n            const focusedCountry = country(c, id);\n            const p = d3.geoCentroid(focusedCountry);\n            transition.call(_this, p);\n            if (typeof(_.focused)==='function') {\n                _.focused.call(_this);\n            }\n        });\n        return countries;\n    }\n\n    return {\n        name: 'centerPlugin',\n        onInit() {\n            _.svgAddCountriesOld = this.svgAddCountries;\n            this.svgAddCountries = svgAddCountries;\n        },\n        go(id) {\n            const c = this.worldPlugin.countries();\n            const focusedCountry = country(c, id),\n                p = d3.geoCentroid(focusedCountry);\n            transition.call(this, p);\n        },\n        focused(fn) {\n            _.focused = fn;\n        }\n    }\n}\n","// KoGor’s Block http://bl.ocks.org/KoGor/5994804\nexport default function() {\n    const countryTooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"countryTooltip\");\n\n    return {\n        name: 'countryTooltipPlugin',\n        onInit() {\n            const _this = this;\n            const originalsvgAddCountries = this.svgAddCountries;\n            this.svgAddCountries  = function() {\n                return originalsvgAddCountries.call(this)\n                .on(\"mouseover\", function(d) {\n                    const country = _this.worldPlugin.countryName.call(_this, d);\n                    countryTooltip.text(country.name)\n                    .style(\"left\", (d3.event.pageX + 7) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 15) + \"px\")\n                    .style(\"display\", \"block\")\n                    .style(\"opacity\", 1);\n                })\n                .on(\"mouseout\", function() {\n                    countryTooltip.style(\"opacity\", 0)\n                    .style(\"display\", \"none\");\n                })\n                .on(\"mousemove\", function() {\n                    countryTooltip.style(\"left\", (d3.event.pageX + 7) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 15) + \"px\");\n                });\n            }\n        },\n    }\n}\n","export default function() {\n    const _ = {proj: null};\n\n    return {\n        name: 'flattenPlugin',\n        onInit() {\n            const width = 700,\n                height = 500,\n                _this = this;\n\n            function animation() {\n                _this._.svg.transition()\n                    .duration(10500)\n                    .tween(\"projection\", function() {\n                        return function(_x) {\n                            animation.alpha(_x);\n                            _this._.refresh();\n                        };\n                    });\n            }\n\n            function interpolatedProjection(a, b) {\n                const px = d3.geoProjection(raw).scale(1);\n                let alpha;\n\n                function raw(lamda, pi) {\n                    const pa = a([lamda *= 180 / Math.PI, pi *= 180 / Math.PI]), pb = b([lamda, pi]);\n                    return [(1 - alpha) * pa[0] + alpha * pb[0], (alpha - 1) * pa[1] - alpha * pb[1]];\n                }\n\n                animation.alpha = function(_x) {\n                    if (!arguments.length)\n                        return alpha;\n                    const ta = a.translate(),\n                        tb = b.translate();\n                        alpha = + _x;\n                        tb[0] = ta[0];\n                        tb[1] = ta[1]/1.2;\n                    // console.log(px.rotate(), _x);\n                    px.translate([\n                        (1 - alpha) * ta[0] + alpha * tb[0],\n                        ((1 - alpha) * ta[1] + alpha * tb[1])\n                    ]);\n                    return px;\n                };\n                animation.alpha(0);\n                return px;\n            }\n\n            const g1 = this._.proj;\n            const g2 = d3.geoEquirectangular()\n                .scale(width/4)\n                .translate([width / 2, height / 2]);\n            _.proj = interpolatedProjection(g1, g2);\n            // _.proj.center([0,0]);\n            this._.animation = animation;\n            this._.px = _.proj;\n            this._.g1 = g1;\n            this._.g2 = g2;\n        },\n        toMap() {\n            // const r = this._.proj.rotate();\n            this._.path = d3.geoPath().projection(_.proj);\n            // this._.proj.rotate([r[0],0,0]);\n            // this._.proj.center([0,0]);\n            this.svgDraw();\n            this._.animation.call(this);\n        }\n    }\n}\n","export default urlBars => {\n    const _ = {svg:null, barProjection: null, q: null, bars: null};\n\n    function svgAddBar() {\n        _.svg.selectAll('.bar').remove();\n        if (_.bars && this._.options.showBars) {\n            const gBar = _.svg.append(\"g\").attr(\"class\",\"bar\");\n            const mask = gBar.append(\"mask\")\n                .attr(\"id\", \"edge\");\n            mask.append(\"rect\")\n                .attr(\"x\", 0)\n                .attr(\"y\", 0)\n                .attr(\"width\", \"100%\")\n                .attr(\"height\", \"100%\")\n                .attr(\"fill\", \"white\");\n            mask.append(\"use\")\n                .attr(\"xlink:href\", \"#edgeCircle\")\n                .attr(\"fill\", \"black\");\n            this._.mask = mask;\n\n            _.max = d3.max(_.bars, d => parseInt(d.Value))\n\n            const scale = this._.proj.scale();\n            _.lengthScale = d3.scaleLinear()\n                .domain([0, _.max])\n                .range([scale, scale+50])\n\n            this._.bar = gBar.selectAll(\"line\").data(_.bars).enter().append(\"line\")\n                .attr(\"stroke\", \"red\")\n                .attr(\"stroke-width\", \"2\");\n            // render to correct position\n            refresh.call(this);\n            return this._.bar;\n        }\n    }\n\n    function refresh() {\n        if (_.bars && this._.options.showBars) {\n            const proj= this._.proj;\n            const centerPos = proj.invert([this._.options.width / 2, this._.options.height/2]);\n            this._.bar\n                .attr(\"x1\", d => proj([d.Longitude, d.Latitude])[0])\n                .attr(\"y1\", d => proj([d.Longitude, d.Latitude])[1])\n                .attr(\"x2\", d => {\n                    _.barProjection.scale(_.lengthScale(d.Value));\n                    return _.barProjection([d.Longitude, d.Latitude])[0];\n                })\n                .attr(\"y2\", d => {\n                    _.barProjection.scale(_.lengthScale(d.Value));\n                    return _.barProjection([d.Longitude, d.Latitude])[1];\n                })\n                .attr(\"mask\", d => {\n                    const gDistance = d3.geoDistance([d.Longitude, d.Latitude], centerPos);\n                    return gDistance < 1.57 ? null : \"url(#edge)\";\n                });\n        }\n    }\n\n    function svgClipPath() {\n        // mask creation\n        this._.defs.selectAll('clipPath').remove();\n        this._.defs.append(\"clipPath\").append(\"circle\")\n            .attr(\"id\", \"edgeCircle\")\n            .attr(\"cx\", this._.options.width / 2)\n            .attr(\"cy\", this._.options.height / 2)\n            .attr(\"r\",  this._.proj.scale());\n    }\n\n    return {\n        name: 'barPlugin',\n        urls: urlBars && [urlBars],\n        onReady(err, bars) {\n            _.bars = bars;\n            setTimeout(() => refresh.call(this),1);\n        },\n        onInit() {\n            this.svgAddBar = svgAddBar;\n            this.svgClipPath = svgClipPath;\n            this._.options.showBars = true;\n            _.barProjection = this._.orthoGraphic();\n            _.svg = this._.svg;\n            svgClipPath.call(this);\n        },\n        onResize() {\n            svgClipPath.call(this);\n            svgAddBar.call(this);\n        },\n        onRefresh() {\n            _.barProjection.rotate(this._.proj.rotate());\n            refresh.call(this);\n        },\n        selectAll(q) {\n            if (q) {\n                _.q = q;\n                _.svg = d3.selectAll(q);\n            }\n            return _.svg;\n        },\n        data(p) {\n            if (p) {\n                const data = p.barPlugin.data()\n                _.bars = data.bars;\n            } else {\n                return {bars: _.bars}\n            }\n        },\n    }\n}\n","export default function() {\n    const _ = {sphereObject: null};\n\n    function addDebugSphere() {\n        if (!_.sphereObject) {\n            const SCALE = this._.proj.scale();\n            const sphere         = new THREE.SphereGeometry(SCALE, 100, 100);\n            const sphereMaterial = new THREE.MeshNormalMaterial({wireframe: false});\n            const sphereMesh     = new THREE.Mesh(sphere, sphereMaterial);\n\n            // For debug ...\n            const dot1 = new THREE.SphereGeometry(30, 10, 10);\n            const dot2 = new THREE.SphereGeometry(30, 10, 10);\n            const dot3 = new THREE.SphereGeometry(30, 10, 10);\n            dot1.translate(0, 0, SCALE);\n            dot2.translate(SCALE, 0, 0);\n            dot3.translate(0,-SCALE, 0);\n            const dot1Material = new THREE.MeshBasicMaterial({color: 'blue' });\n            const dot2Material = new THREE.MeshBasicMaterial({color: 'red'  });\n            const dot3Material = new THREE.MeshBasicMaterial({color: 'green'});\n            const dot1Mesh = new THREE.Mesh(dot1, dot1Material);\n            const dot2Mesh = new THREE.Mesh(dot2, dot2Material);\n            const dot3Mesh = new THREE.Mesh(dot3, dot3Material);\n\n            _.sphereObject = new THREE.Object3D();\n            _.sphereObject.add(sphereMesh, dot1Mesh, dot2Mesh, dot3Mesh);\n\n            rotate.call(this);\n            this.threejsPlugin.addObject(_.sphereObject);\n        }\n    }\n\n    function rotate() {\n        const rt = this._.proj.rotate();\n        rt[0] -= 90;\n        const q1 = this._.versor(rt);\n        const q2 = new THREE.Quaternion(-q1[2], q1[1], q1[3], q1[0]);\n        _.sphereObject.setRotationFromQuaternion(q2);\n    }\n\n    return {\n        name: 'debugThreejs',\n        onInit() {\n            this._.options.showDebugSpahre = true;\n            addDebugSphere.call(this);\n        },\n        onRefresh() {\n            if (_.sphereObject) {\n                rotate.call(this);\n            }\n        }\n    }\n}\n","export default () => {\n    const _ = {checker: []};\n    return {\n        name: 'commonPlugins',\n        onInit() {\n            const rg = this.register;\n            const pl = earthjs.plugins;\n            rg(pl.autorotatePlugin(10));\n            rg(pl.versorDragPlugin());\n            rg(pl.wheelZoomPlugin());\n            rg(pl.configPlugin());\n            rg(pl.oceanPlugin());\n            rg(pl.canvasPlugin());\n            rg(pl.graticuleCanvas());\n            rg(pl.worldCanvas('./d/world-110m.json'));\n\n            this.canvasPlugin.selectAll('.canvas');\n            this.ready(() => this.svgDraw());\n\n            _.options = this.configPlugin.set();\n            _.buttonClick = str => {\n                const arr = str.split(':'),\n                    key = arr[2],\n                    resultx  = {},\n                    options  =_.options;\n                options[key] = !options[key];\n                resultx[key] =  options[key];\n                if (key=='hideCountries')\n                    resultx.hideLand = false;\n                this.configPlugin.set(resultx);\n            };\n\n            _.checker = [\n                'ocean:Ocean:showOcean',\n                'graticule:Graticule:showGraticule',\n                'hideLand:Land:showLand',\n                'spin:Spin:spin',\n            ].map(d => d.split(':'));\n            const opt = d3.select('.set-options');\n            opt.selectAll('button').data(_.checker).enter().append('button')\n                .text(d => d[1])\n                .on('click', d => _.buttonClick.call(this, d.join(':')));\n        },\n        addChecker(checker) {\n            _.checker.push(checker);\n            _.options = this.configPlugin.set();\n\n            const opt = d3.select('.set-options');\n            opt.selectAll('button').data(_.checker).enter().append('button')\n                .text(d => d[1])\n                .on('click', d => _.buttonClick.call(this, d.join(':')));\n        }\n    }\n}\n","import app from './src/earthjs';\nimport versorDragPlugin from './src/plugins/versorDragPlugin.js';\nimport wheelZoomPlugin from './src/plugins/wheelZoomPlugin.js';\nimport threejsPlugin from './src/plugins/threejsPlugin.js';\nimport canvasPlugin from './src/plugins/canvasPlugin.js';\nimport oceanPlugin from './src/plugins/oceanPlugin.js';\nimport configPlugin from './src/plugins/configPlugin.js';\nimport graticuleCanvas from './src/plugins/graticuleCanvas.js';\nimport graticulePlugin from './src/plugins/graticulePlugin.js';\nimport fauxGlobePlugin from './src/plugins/fauxGlobePlugin.js';\nimport autorotatePlugin from './src/plugins/autorotatePlugin.js';\nimport placesPlugin from './src/plugins/placesPlugin.js';\nimport worldCanvas from './src/plugins/worldCanvas.js';\nimport worldPlugin from './src/plugins/worldPlugin.js';\nimport worldThreejs from './src/plugins/worldThreejs.js';\nimport centerPlugin from './src/plugins/centerPlugin.js';\nimport countryTooltipPlugin from './src/plugins/countryTooltipPlugin.js';\nimport flattenPlugin from './src/plugins/flattenPlugin.js';\nimport barPlugin from './src/plugins/barPlugin.js';\nimport debugThreejs from './src/plugins/debugThreejs.js';\nimport commonPlugins from './src/pluginLoader/commonPlugins';\napp.plugins= {\n    versorDragPlugin,\n    wheelZoomPlugin,\n    threejsPlugin,\n    canvasPlugin,\n    oceanPlugin,\n    configPlugin,\n    graticuleCanvas,\n    graticulePlugin,\n    fauxGlobePlugin,\n    autorotatePlugin,\n    placesPlugin,\n    worldCanvas,\n    worldPlugin,\n    worldThreejs,\n    centerPlugin,\n    countryTooltipPlugin,\n    flattenPlugin,\n    barPlugin,\n    debugThreejs,\n    commonPlugins,\n};\nexport default app;\n"],"names":["acos","Math","asin","atan2","cos","max","min","PI","sin","sqrt","radians","degrees","versor","e","l","sl","cl","sp","p","cp","sg","g","cg","cartesian","rotation","q","delta","v0","v1","w","cross","dot","t","s","multiply","q0","q1","versorFn","options","Object","assign","_","drag","width","height","ltScale","d3","scaleLinear","domain","range","svg","selectAll","select","attr","planet","fn","ready","loadingData","obj","ar","name","keys","map","indexOf","apply","arguments","onInit","call","urls","onReady","queue","forEach","url","ext","split","pop","defer","await","defs","append","earth","ticker","interval","setInterval","intervalRun","svgDraw","twinEarth","renderOrder","renderer","scale","y","proj","resize","refresh","rotate","r","onIntervalKeys","length","onInterval","onRefreshKeys","onRefresh","onResizeKeys","onResize","orthoGraphic","ltRotate","geoOrthographic","translate","precision","clipAngle","addRenderer","push","path","geoPath","projection","qEvent","qname","qkey","sync","dragSetup","_this","on","dragstarted","dragsended","dragged","src","d","r0","invert","mouse","r1","arr","event","deltaY","scene","camera","renderThree","render","THREE","Scene","yAxis","Vector3","OrthographicCamera","position","z","WebGLRenderer","antialias","domElement","id","setClearColor","setSize","body","appendChild","add","canvas","svgAddCanvas","showCanvas","fObject","fBody","style","each","getContext","clearRect","context","initOptions","svgAddOcean","remove","showOcean","ocean_fill","ocean","newOpt","spin","undefined","autorotatePlugin","start","stop","datumGraticule","geoGraticule","canvasAddGraticule","showGraticule","canvasPlugin","beginPath","lineWidth","strokeStyle","stroke","svgAddGraticule","graticule","datum","svgAddDropShadow","showGlobeShadow","drop_shadow","dropShadow","svgAddGlobeShading","showGlobeShading","globe_shading","globeShading","svgAddGlobeHilight","showGlobeHilight","globe_highlight","globeHilight","degPerSec","degree","now","Date","lastTick","urlPlaces","places","svgAddPlaces","showPlaces","placePoints","svgAddPlacePoints","data","features","enter","svgAddPlaceLabels","placeLabels","text","properties","position_labels","centerPos","x","geometry","coordinates","loc","offset","geoDistance","err","placesPlugin","urlWorld","urlCountryNames","world","countryNames","canvasAddWorldOrCountries","showLand","showCountries","showLakes","canvasAddWorld","land","topojson","feature","objects","fillStyle","fill","canvasAddCountries","countries","canvasAddLakes","lakes","ne_110m_lakes","worldCanvas","countryClick","svgAddWorldOrCountries","svgAddCountries","svgAddWorld","svgAddLakes","cname","find","worldPlugin","sphereObject","addWorld","group","Group","loader","TextureLoader","load","texture","SphereGeometry","material","MeshBasicMaterial","overdraw","Mesh","threejsPlugin","addObject","rt","q2","Quaternion","setRotationFromQuaternion","focused","svgAddCountriesOld","country","cnt","replace","i","transition","duration","tween","interpolate","c","focusedCountry","geoCentroid","countryTooltip","originalsvgAddCountries","countryName","pageX","pageY","animation","_x","alpha","interpolatedProjection","a","b","px","geoProjection","raw","lamda","pi","pa","pb","ta","tb","g1","g2","geoEquirectangular","barProjection","bars","svgAddBar","showBars","gBar","mask","parseInt","Value","lengthScale","bar","Longitude","Latitude","gDistance","svgClipPath","urlBars","barPlugin","addDebugSphere","SCALE","sphere","sphereMaterial","MeshNormalMaterial","wireframe","sphereMesh","dot1","dot2","dot3","dot1Material","color","dot2Material","dot3Material","dot1Mesh","dot2Mesh","dot3Mesh","Object3D","showDebugSpahre","checker","rg","register","pl","earthjs","plugins","versorDragPlugin","wheelZoomPlugin","configPlugin","oceanPlugin","graticuleCanvas","set","buttonClick","str","key","resultx","hideLand","opt","join","app"],"mappings":"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"}